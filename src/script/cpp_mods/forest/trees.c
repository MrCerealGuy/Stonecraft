/* WARNING: This file was automatically generated by lua2c. */

#ifdef __cplusplus
extern "C" {
#endif
#include <lua.h>
#include <lauxlib.h>
#include <lualib.h>
#ifdef __cplusplus
}
#endif
#include <stdio.h>
#include <stdlib.h>


#include <string.h>


#include <assert.h>

/* function(pos, tree) */
static int lcf1 (lua_State * L) {
  enum { lc_nformalargs = 2 };
  lua_settop(L,2);
  
  /* fir_growing(pos) */
  lua_getfield(L,LUA_ENVIRONINDEX,"fir_growing");
  lua_pushvalue(L,1);
  lua_call(L,1,0);
  assert(lua_gettop(L) == 2);
  return 0;
}


/* name: (main)
 * function(...) */
static int lcf_main (lua_State * L) {
  enum { lc_nformalargs = 0 };
  #ifndef NDEBUG
  const int lc_nactualargs = lua_gettop(L);
  #endif
  #ifndef NDEBUG
  const int lc_nextra = (lc_nactualargs - lc_nformalargs);
  #endif
  
  /* register_tree("oak", {
   * 	description = "chene",
   * 	sapling = {chance = 1, growing = 6},
   * 	growing = {
   * 		trunk_height = {min = 7, max = 13},
   * 		height_above_trunk = 3,
   * 		percent_size = 70,
   * 		radius = 3,
   * 		corners = 1,
   * 		percent_leaves = 55,
   * 		associated = {
   * 			["flowers:viola"] = 8,
   * 			["flowers:rose"] = 2,
   * 		}
   * 	},
   * 	apportionment = {
   * 		frequency = 15,
   * 		temperature = {min = 8, max = 16},
   * 		density = 15,
   * 		biome = 40,
   * 		tolerance = 20,
   * 	},
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"register_tree");
  lua_pushliteral(L,"oak");
  lua_createtable(L,0,4);
  lua_pushliteral(L,"description");
  lua_pushliteral(L,"chene");
  lua_rawset(L,-3);
  lua_pushliteral(L,"sapling");
  lua_createtable(L,0,2);
  lua_pushliteral(L,"chance");
  lua_pushnumber(L,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"growing");
  lua_pushnumber(L,6);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"growing");
  lua_createtable(L,0,7);
  lua_pushliteral(L,"trunk_height");
  lua_createtable(L,0,2);
  lua_pushliteral(L,"min");
  lua_pushnumber(L,7);
  lua_rawset(L,-3);
  lua_pushliteral(L,"max");
  lua_pushnumber(L,13);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"height_above_trunk");
  lua_pushnumber(L,3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"percent_size");
  lua_pushnumber(L,70);
  lua_rawset(L,-3);
  lua_pushliteral(L,"radius");
  lua_pushnumber(L,3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"corners");
  lua_pushnumber(L,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"percent_leaves");
  lua_pushnumber(L,55);
  lua_rawset(L,-3);
  lua_pushliteral(L,"associated");
  lua_createtable(L,0,2);
  lua_pushliteral(L,"flowers:viola");
  lua_pushnumber(L,8);
  lua_rawset(L,-3);
  lua_pushliteral(L,"flowers:rose");
  lua_pushnumber(L,2);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"apportionment");
  lua_createtable(L,0,5);
  lua_pushliteral(L,"frequency");
  lua_pushnumber(L,15);
  lua_rawset(L,-3);
  lua_pushliteral(L,"temperature");
  lua_createtable(L,0,2);
  lua_pushliteral(L,"min");
  lua_pushnumber(L,8);
  lua_rawset(L,-3);
  lua_pushliteral(L,"max");
  lua_pushnumber(L,16);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"density");
  lua_pushnumber(L,15);
  lua_rawset(L,-3);
  lua_pushliteral(L,"biome");
  lua_pushnumber(L,40);
  lua_rawset(L,-3);
  lua_pushliteral(L,"tolerance");
  lua_pushnumber(L,20);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* register_tree("birch", {
   * 	description = "bouleau",
   * 	sapling = {chance = 5, growing = 12},
   * 	growing = {
   * 		trunk_height = {min = 4, max = 6},
   * 		height_above_trunk = 2,
   * 		percent_size = 70,
   * 		radius = 2,
   * 		corners = 2,
   * 		percent_leaves = 65,
   * 	},
   * 	apportionment = {
   * 		frequency = 5,
   * 		temperature = {min = 9, max = 18},
   * 		density = 5,
   * 		biome = 20,
   * 		tolerance = 30,
   * 	},
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"register_tree");
  lua_pushliteral(L,"birch");
  lua_createtable(L,0,4);
  lua_pushliteral(L,"description");
  lua_pushliteral(L,"bouleau");
  lua_rawset(L,-3);
  lua_pushliteral(L,"sapling");
  lua_createtable(L,0,2);
  lua_pushliteral(L,"chance");
  lua_pushnumber(L,5);
  lua_rawset(L,-3);
  lua_pushliteral(L,"growing");
  lua_pushnumber(L,12);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"growing");
  lua_createtable(L,0,6);
  lua_pushliteral(L,"trunk_height");
  lua_createtable(L,0,2);
  lua_pushliteral(L,"min");
  lua_pushnumber(L,4);
  lua_rawset(L,-3);
  lua_pushliteral(L,"max");
  lua_pushnumber(L,6);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"height_above_trunk");
  lua_pushnumber(L,2);
  lua_rawset(L,-3);
  lua_pushliteral(L,"percent_size");
  lua_pushnumber(L,70);
  lua_rawset(L,-3);
  lua_pushliteral(L,"radius");
  lua_pushnumber(L,2);
  lua_rawset(L,-3);
  lua_pushliteral(L,"corners");
  lua_pushnumber(L,2);
  lua_rawset(L,-3);
  lua_pushliteral(L,"percent_leaves");
  lua_pushnumber(L,65);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"apportionment");
  lua_createtable(L,0,5);
  lua_pushliteral(L,"frequency");
  lua_pushnumber(L,5);
  lua_rawset(L,-3);
  lua_pushliteral(L,"temperature");
  lua_createtable(L,0,2);
  lua_pushliteral(L,"min");
  lua_pushnumber(L,9);
  lua_rawset(L,-3);
  lua_pushliteral(L,"max");
  lua_pushnumber(L,18);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"density");
  lua_pushnumber(L,5);
  lua_rawset(L,-3);
  lua_pushliteral(L,"biome");
  lua_pushnumber(L,20);
  lua_rawset(L,-3);
  lua_pushliteral(L,"tolerance");
  lua_pushnumber(L,30);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* register_tree("willow", {
   * 	description = "saule",
   * 	sapling = {chance = 20, growing = 14},
   * 	growing = {
   * 		trunk_height = {min = 7, max = 10},
   * 		height_above_trunk = 3,
   * 		percent_size = 80,
   * 		radius = 3,
   * 		corners = 1,
   * 		percent_leaves = 55,
   * 	},
   * 	apportionment = {
   * 		frequency = 4,
   * 		temperature = {min = 7, max = 15},
   * 		density = 8,
   * 		biome = 30,
   * 		tolerance = 35,
   * 		water_proximity = 6,
   * 	},
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"register_tree");
  lua_pushliteral(L,"willow");
  lua_createtable(L,0,4);
  lua_pushliteral(L,"description");
  lua_pushliteral(L,"saule");
  lua_rawset(L,-3);
  lua_pushliteral(L,"sapling");
  lua_createtable(L,0,2);
  lua_pushliteral(L,"chance");
  lua_pushnumber(L,20);
  lua_rawset(L,-3);
  lua_pushliteral(L,"growing");
  lua_pushnumber(L,14);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"growing");
  lua_createtable(L,0,6);
  lua_pushliteral(L,"trunk_height");
  lua_createtable(L,0,2);
  lua_pushliteral(L,"min");
  lua_pushnumber(L,7);
  lua_rawset(L,-3);
  lua_pushliteral(L,"max");
  lua_pushnumber(L,10);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"height_above_trunk");
  lua_pushnumber(L,3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"percent_size");
  lua_pushnumber(L,80);
  lua_rawset(L,-3);
  lua_pushliteral(L,"radius");
  lua_pushnumber(L,3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"corners");
  lua_pushnumber(L,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"percent_leaves");
  lua_pushnumber(L,55);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"apportionment");
  lua_createtable(L,0,6);
  lua_pushliteral(L,"frequency");
  lua_pushnumber(L,4);
  lua_rawset(L,-3);
  lua_pushliteral(L,"temperature");
  lua_createtable(L,0,2);
  lua_pushliteral(L,"min");
  lua_pushnumber(L,7);
  lua_rawset(L,-3);
  lua_pushliteral(L,"max");
  lua_pushnumber(L,15);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"density");
  lua_pushnumber(L,8);
  lua_rawset(L,-3);
  lua_pushliteral(L,"biome");
  lua_pushnumber(L,30);
  lua_rawset(L,-3);
  lua_pushliteral(L,"tolerance");
  lua_pushnumber(L,35);
  lua_rawset(L,-3);
  lua_pushliteral(L,"water_proximity");
  lua_pushnumber(L,6);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* register_tree("fir", {
   * 	description = "sapin",
   * 	sapling = {chance = 3.5, growing = 3.2},
   * 	growing = {
   * 		radius = 3,
   * 		method = function(pos, tree)
   * 			fir_growing(pos)
   * 		end,
   * 	},
   * 	apportionment = {
   * 		frequency = 20,
   * 		temperature = {min = 2, max = 10},
   * 		density = 15,
   * 		biome = 70,
   * 		tolerance = 25,
   * 	},
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"register_tree");
  lua_pushliteral(L,"fir");
  lua_createtable(L,0,4);
  lua_pushliteral(L,"description");
  lua_pushliteral(L,"sapin");
  lua_rawset(L,-3);
  lua_pushliteral(L,"sapling");
  lua_createtable(L,0,2);
  lua_pushliteral(L,"chance");
  lua_pushnumber(L,3.5);
  lua_rawset(L,-3);
  lua_pushliteral(L,"growing");
  lua_pushnumber(L,3.2);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"growing");
  lua_createtable(L,0,2);
  lua_pushliteral(L,"radius");
  lua_pushnumber(L,3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"method");
  lua_pushcfunction(L,lcf1);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"apportionment");
  lua_createtable(L,0,5);
  lua_pushliteral(L,"frequency");
  lua_pushnumber(L,20);
  lua_rawset(L,-3);
  lua_pushliteral(L,"temperature");
  lua_createtable(L,0,2);
  lua_pushliteral(L,"min");
  lua_pushnumber(L,2);
  lua_rawset(L,-3);
  lua_pushliteral(L,"max");
  lua_pushnumber(L,10);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"density");
  lua_pushnumber(L,15);
  lua_rawset(L,-3);
  lua_pushliteral(L,"biome");
  lua_pushnumber(L,70);
  lua_rawset(L,-3);
  lua_pushliteral(L,"tolerance");
  lua_pushnumber(L,25);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* register_tree("mirabelle", {
   * 	description = "mirabellier",
   * 	descriptions = {
   * 		fruitleaves = "Feuilles de mirabellier avec mirabelles",
   * 		fruit = "Mirabelle",
   * 	},
   * 	tiles = {
   * 		leaves = "default_leaves.png",
   * 		tree = "default_tree.png",
   * 		tree_top = "default_tree_top.png",
   * 		sapling = "mirabelle_sapling.png",
   * 		fruitleaves = "mirabelle_fruitleaves.png",
   * 		fruit = "mirabelle_fruit.png",
   * 		wood = "default_wood.png",
   * 	},
   * 	sapling = {chance = 7, growing = 15},
   * 	fruits = {chance = 4, max = 20, hearts = 0.5, craft = "dye:yellow", craft_sapling = true},
   * 	growing = {
   * 		trunk_height = {min = 4, max = 5},
   * 		height_above_trunk = 2,
   * 		percent_size = 70,
   * 		radius = 2,
   * 		corners = 2,
   * 		percent_leaves = 72,
   * 	},
   * 	apportionment = {
   * 		frequency = 3,
   * 		temperature = {min = 6, max = 16},
   * 		density = 3,
   * 		biome = 25,
   * 		tolerance = 10,
   * 	},
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"register_tree");
  lua_pushliteral(L,"mirabelle");
  lua_createtable(L,0,7);
  lua_pushliteral(L,"description");
  lua_pushliteral(L,"mirabellier");
  lua_rawset(L,-3);
  lua_pushliteral(L,"descriptions");
  lua_createtable(L,0,2);
  lua_pushliteral(L,"fruitleaves");
  lua_pushliteral(L,"Feuilles de mirabellier avec mirabelles");
  lua_rawset(L,-3);
  lua_pushliteral(L,"fruit");
  lua_pushliteral(L,"Mirabelle");
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"tiles");
  lua_createtable(L,0,7);
  lua_pushliteral(L,"leaves");
  lua_pushliteral(L,"default_leaves.png");
  lua_rawset(L,-3);
  lua_pushliteral(L,"tree");
  lua_pushliteral(L,"default_tree.png");
  lua_rawset(L,-3);
  lua_pushliteral(L,"tree_top");
  lua_pushliteral(L,"default_tree_top.png");
  lua_rawset(L,-3);
  lua_pushliteral(L,"sapling");
  lua_pushliteral(L,"mirabelle_sapling.png");
  lua_rawset(L,-3);
  lua_pushliteral(L,"fruitleaves");
  lua_pushliteral(L,"mirabelle_fruitleaves.png");
  lua_rawset(L,-3);
  lua_pushliteral(L,"fruit");
  lua_pushliteral(L,"mirabelle_fruit.png");
  lua_rawset(L,-3);
  lua_pushliteral(L,"wood");
  lua_pushliteral(L,"default_wood.png");
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"sapling");
  lua_createtable(L,0,2);
  lua_pushliteral(L,"chance");
  lua_pushnumber(L,7);
  lua_rawset(L,-3);
  lua_pushliteral(L,"growing");
  lua_pushnumber(L,15);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"fruits");
  lua_createtable(L,0,5);
  lua_pushliteral(L,"chance");
  lua_pushnumber(L,4);
  lua_rawset(L,-3);
  lua_pushliteral(L,"max");
  lua_pushnumber(L,20);
  lua_rawset(L,-3);
  lua_pushliteral(L,"hearts");
  lua_pushnumber(L,0.5);
  lua_rawset(L,-3);
  lua_pushliteral(L,"craft");
  lua_pushliteral(L,"dye:yellow");
  lua_rawset(L,-3);
  lua_pushliteral(L,"craft_sapling");
  lua_pushboolean(L,1);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"growing");
  lua_createtable(L,0,6);
  lua_pushliteral(L,"trunk_height");
  lua_createtable(L,0,2);
  lua_pushliteral(L,"min");
  lua_pushnumber(L,4);
  lua_rawset(L,-3);
  lua_pushliteral(L,"max");
  lua_pushnumber(L,5);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"height_above_trunk");
  lua_pushnumber(L,2);
  lua_rawset(L,-3);
  lua_pushliteral(L,"percent_size");
  lua_pushnumber(L,70);
  lua_rawset(L,-3);
  lua_pushliteral(L,"radius");
  lua_pushnumber(L,2);
  lua_rawset(L,-3);
  lua_pushliteral(L,"corners");
  lua_pushnumber(L,2);
  lua_rawset(L,-3);
  lua_pushliteral(L,"percent_leaves");
  lua_pushnumber(L,72);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"apportionment");
  lua_createtable(L,0,5);
  lua_pushliteral(L,"frequency");
  lua_pushnumber(L,3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"temperature");
  lua_createtable(L,0,2);
  lua_pushliteral(L,"min");
  lua_pushnumber(L,6);
  lua_rawset(L,-3);
  lua_pushliteral(L,"max");
  lua_pushnumber(L,16);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"density");
  lua_pushnumber(L,3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"biome");
  lua_pushnumber(L,25);
  lua_rawset(L,-3);
  lua_pushliteral(L,"tolerance");
  lua_pushnumber(L,10);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* register_tree("cherry", {
   * 	description = "cerisier",
   * 	descriptions = {
   * 		fruitleaves = "Feuilles de cerisier avec cerises",
   * 		fruit = "Cerise",
   * 	},
   * 	tiles = {
   * 		leaves = "default_leaves.png",
   * 		tree = "default_tree.png",
   * 		tree_top = "default_tree_top.png",
   * 		sapling = "cherry_sapling.png",
   * 		fruitleaves = "cherry_fruitleaves.png",
   * 		fruit = "cherry_fruit.png",
   * 		wood = "default_wood.png",
   * 	},
   * 	sapling = {chance = 7, growing = 15},
   * 	fruits = {chance = 4, max = 20, hearts = 0.5, craft = "dye:red", craft_sapling = true},
   * 	growing = {
   * 		trunk_height = {min = 4, max = 5},
   * 		height_above_trunk = 2,
   * 		percent_size = 70,
   * 		radius = 2,
   * 		corners = 2,
   * 		percent_leaves = 72,
   * 	},
   * 	apportionment = {
   * 		frequency = 3,
   * 		temperature = {min = 6, max = 16},
   * 		density = 3,
   * 		biome = 25,
   * 		tolerance = 10,
   * 	},
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"register_tree");
  lua_pushliteral(L,"cherry");
  lua_createtable(L,0,7);
  lua_pushliteral(L,"description");
  lua_pushliteral(L,"cerisier");
  lua_rawset(L,-3);
  lua_pushliteral(L,"descriptions");
  lua_createtable(L,0,2);
  lua_pushliteral(L,"fruitleaves");
  lua_pushliteral(L,"Feuilles de cerisier avec cerises");
  lua_rawset(L,-3);
  lua_pushliteral(L,"fruit");
  lua_pushliteral(L,"Cerise");
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"tiles");
  lua_createtable(L,0,7);
  lua_pushliteral(L,"leaves");
  lua_pushliteral(L,"default_leaves.png");
  lua_rawset(L,-3);
  lua_pushliteral(L,"tree");
  lua_pushliteral(L,"default_tree.png");
  lua_rawset(L,-3);
  lua_pushliteral(L,"tree_top");
  lua_pushliteral(L,"default_tree_top.png");
  lua_rawset(L,-3);
  lua_pushliteral(L,"sapling");
  lua_pushliteral(L,"cherry_sapling.png");
  lua_rawset(L,-3);
  lua_pushliteral(L,"fruitleaves");
  lua_pushliteral(L,"cherry_fruitleaves.png");
  lua_rawset(L,-3);
  lua_pushliteral(L,"fruit");
  lua_pushliteral(L,"cherry_fruit.png");
  lua_rawset(L,-3);
  lua_pushliteral(L,"wood");
  lua_pushliteral(L,"default_wood.png");
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"sapling");
  lua_createtable(L,0,2);
  lua_pushliteral(L,"chance");
  lua_pushnumber(L,7);
  lua_rawset(L,-3);
  lua_pushliteral(L,"growing");
  lua_pushnumber(L,15);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"fruits");
  lua_createtable(L,0,5);
  lua_pushliteral(L,"chance");
  lua_pushnumber(L,4);
  lua_rawset(L,-3);
  lua_pushliteral(L,"max");
  lua_pushnumber(L,20);
  lua_rawset(L,-3);
  lua_pushliteral(L,"hearts");
  lua_pushnumber(L,0.5);
  lua_rawset(L,-3);
  lua_pushliteral(L,"craft");
  lua_pushliteral(L,"dye:red");
  lua_rawset(L,-3);
  lua_pushliteral(L,"craft_sapling");
  lua_pushboolean(L,1);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"growing");
  lua_createtable(L,0,6);
  lua_pushliteral(L,"trunk_height");
  lua_createtable(L,0,2);
  lua_pushliteral(L,"min");
  lua_pushnumber(L,4);
  lua_rawset(L,-3);
  lua_pushliteral(L,"max");
  lua_pushnumber(L,5);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"height_above_trunk");
  lua_pushnumber(L,2);
  lua_rawset(L,-3);
  lua_pushliteral(L,"percent_size");
  lua_pushnumber(L,70);
  lua_rawset(L,-3);
  lua_pushliteral(L,"radius");
  lua_pushnumber(L,2);
  lua_rawset(L,-3);
  lua_pushliteral(L,"corners");
  lua_pushnumber(L,2);
  lua_rawset(L,-3);
  lua_pushliteral(L,"percent_leaves");
  lua_pushnumber(L,72);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"apportionment");
  lua_createtable(L,0,5);
  lua_pushliteral(L,"frequency");
  lua_pushnumber(L,3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"temperature");
  lua_createtable(L,0,2);
  lua_pushliteral(L,"min");
  lua_pushnumber(L,6);
  lua_rawset(L,-3);
  lua_pushliteral(L,"max");
  lua_pushnumber(L,16);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"density");
  lua_pushnumber(L,3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"biome");
  lua_pushnumber(L,25);
  lua_rawset(L,-3);
  lua_pushliteral(L,"tolerance");
  lua_pushnumber(L,10);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* register_tree("plum", {
   * 	description = "prunier",
   * 	descriptions = {
   * 		fruitleaves = "Feuilles de prunier avec prunes",
   * 		fruit = "Prune",
   * 	},
   * 	tiles = {
   * 		leaves = "default_leaves.png",
   * 		tree = "default_tree.png",
   * 		tree_top = "default_tree_top.png",
   * 		sapling = "plum_sapling.png",
   * 		fruitleaves = "plum_fruitleaves.png",
   * 		fruit = "plum_fruit.png",
   * 		wood = "default_wood.png",
   * 	},
   * 	sapling = {chance = 7, growing = 15},
   * 	fruits = {chance = 4, max = 20, hearts = 0.5, craft = "dye:violet", craft_sapling = true},
   * 	growing = {
   * 		trunk_height = {min = 4, max = 5},
   * 		height_above_trunk = 2,
   * 		percent_size = 70,
   * 		radius = 2,
   * 		corners = 2,
   * 		percent_leaves = 72,
   * 	},
   * 	apportionment = {
   * 		frequency = 3,
   * 		temperature = {min = 6, max = 16},
   * 		density = 3,
   * 		biome = 25,
   * 		tolerance = 10,
   * 	},
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"register_tree");
  lua_pushliteral(L,"plum");
  lua_createtable(L,0,7);
  lua_pushliteral(L,"description");
  lua_pushliteral(L,"prunier");
  lua_rawset(L,-3);
  lua_pushliteral(L,"descriptions");
  lua_createtable(L,0,2);
  lua_pushliteral(L,"fruitleaves");
  lua_pushliteral(L,"Feuilles de prunier avec prunes");
  lua_rawset(L,-3);
  lua_pushliteral(L,"fruit");
  lua_pushliteral(L,"Prune");
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"tiles");
  lua_createtable(L,0,7);
  lua_pushliteral(L,"leaves");
  lua_pushliteral(L,"default_leaves.png");
  lua_rawset(L,-3);
  lua_pushliteral(L,"tree");
  lua_pushliteral(L,"default_tree.png");
  lua_rawset(L,-3);
  lua_pushliteral(L,"tree_top");
  lua_pushliteral(L,"default_tree_top.png");
  lua_rawset(L,-3);
  lua_pushliteral(L,"sapling");
  lua_pushliteral(L,"plum_sapling.png");
  lua_rawset(L,-3);
  lua_pushliteral(L,"fruitleaves");
  lua_pushliteral(L,"plum_fruitleaves.png");
  lua_rawset(L,-3);
  lua_pushliteral(L,"fruit");
  lua_pushliteral(L,"plum_fruit.png");
  lua_rawset(L,-3);
  lua_pushliteral(L,"wood");
  lua_pushliteral(L,"default_wood.png");
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"sapling");
  lua_createtable(L,0,2);
  lua_pushliteral(L,"chance");
  lua_pushnumber(L,7);
  lua_rawset(L,-3);
  lua_pushliteral(L,"growing");
  lua_pushnumber(L,15);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"fruits");
  lua_createtable(L,0,5);
  lua_pushliteral(L,"chance");
  lua_pushnumber(L,4);
  lua_rawset(L,-3);
  lua_pushliteral(L,"max");
  lua_pushnumber(L,20);
  lua_rawset(L,-3);
  lua_pushliteral(L,"hearts");
  lua_pushnumber(L,0.5);
  lua_rawset(L,-3);
  lua_pushliteral(L,"craft");
  lua_pushliteral(L,"dye:violet");
  lua_rawset(L,-3);
  lua_pushliteral(L,"craft_sapling");
  lua_pushboolean(L,1);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"growing");
  lua_createtable(L,0,6);
  lua_pushliteral(L,"trunk_height");
  lua_createtable(L,0,2);
  lua_pushliteral(L,"min");
  lua_pushnumber(L,4);
  lua_rawset(L,-3);
  lua_pushliteral(L,"max");
  lua_pushnumber(L,5);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"height_above_trunk");
  lua_pushnumber(L,2);
  lua_rawset(L,-3);
  lua_pushliteral(L,"percent_size");
  lua_pushnumber(L,70);
  lua_rawset(L,-3);
  lua_pushliteral(L,"radius");
  lua_pushnumber(L,2);
  lua_rawset(L,-3);
  lua_pushliteral(L,"corners");
  lua_pushnumber(L,2);
  lua_rawset(L,-3);
  lua_pushliteral(L,"percent_leaves");
  lua_pushnumber(L,72);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"apportionment");
  lua_createtable(L,0,5);
  lua_pushliteral(L,"frequency");
  lua_pushnumber(L,3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"temperature");
  lua_createtable(L,0,2);
  lua_pushliteral(L,"min");
  lua_pushnumber(L,6);
  lua_rawset(L,-3);
  lua_pushliteral(L,"max");
  lua_pushnumber(L,16);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"density");
  lua_pushnumber(L,3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"biome");
  lua_pushnumber(L,25);
  lua_rawset(L,-3);
  lua_pushliteral(L,"tolerance");
  lua_pushnumber(L,10);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* register_tree("apple_tree", {
   * 	description = "pommier",
   * 	descriptions = {
   * 		fruitleaves = "Feuilles de pommier avec pommes",
   * 	},
   * 	register = {fruitleaves = true},
   * 	names = {
   * 		tree = "default:tree",
   * 		leaves = "default:leaves",
   * 		wood = "default:wood",
   * 		sapling = "default:sapling",
   * 		fruitleaves = "forest:apple_fruitleaves",
   * 		fruit = "default:apple",
   * 	},
   * 	tiles = {fruitleaves = "default_leaves.png^default_apple.png"},
   * 	fruits = {chance = 2, max = 12, craft_sapling = true},
   * 	growing = {
   * 		trunk_height = {min = 4, max = 5},
   * 		height_above_trunk = 2,
   * 		percent_size = 70,
   * 		radius = 2,
   * 		corners = 2,
   * 		percent_leaves = 72,
   * 	},
   * 	apportionment = {
   * 		frequency = 3,
   * 		temperature = {min = 4, max = 16},
   * 		density = 4,
   * 		biome = 25,
   * 		tolerance = 10,
   * 	},
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"register_tree");
  lua_pushliteral(L,"apple_tree");
  lua_createtable(L,0,8);
  lua_pushliteral(L,"description");
  lua_pushliteral(L,"pommier");
  lua_rawset(L,-3);
  lua_pushliteral(L,"descriptions");
  lua_createtable(L,0,1);
  lua_pushliteral(L,"fruitleaves");
  lua_pushliteral(L,"Feuilles de pommier avec pommes");
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"register");
  lua_createtable(L,0,1);
  lua_pushliteral(L,"fruitleaves");
  lua_pushboolean(L,1);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"names");
  lua_createtable(L,0,6);
  lua_pushliteral(L,"tree");
  lua_pushliteral(L,"default:tree");
  lua_rawset(L,-3);
  lua_pushliteral(L,"leaves");
  lua_pushliteral(L,"default:leaves");
  lua_rawset(L,-3);
  lua_pushliteral(L,"wood");
  lua_pushliteral(L,"default:wood");
  lua_rawset(L,-3);
  lua_pushliteral(L,"sapling");
  lua_pushliteral(L,"default:sapling");
  lua_rawset(L,-3);
  lua_pushliteral(L,"fruitleaves");
  lua_pushliteral(L,"forest:apple_fruitleaves");
  lua_rawset(L,-3);
  lua_pushliteral(L,"fruit");
  lua_pushliteral(L,"default:apple");
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"tiles");
  lua_createtable(L,0,1);
  lua_pushliteral(L,"fruitleaves");
  lua_pushliteral(L,"default_leaves.png^default_apple.png");
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"fruits");
  lua_createtable(L,0,3);
  lua_pushliteral(L,"chance");
  lua_pushnumber(L,2);
  lua_rawset(L,-3);
  lua_pushliteral(L,"max");
  lua_pushnumber(L,12);
  lua_rawset(L,-3);
  lua_pushliteral(L,"craft_sapling");
  lua_pushboolean(L,1);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"growing");
  lua_createtable(L,0,6);
  lua_pushliteral(L,"trunk_height");
  lua_createtable(L,0,2);
  lua_pushliteral(L,"min");
  lua_pushnumber(L,4);
  lua_rawset(L,-3);
  lua_pushliteral(L,"max");
  lua_pushnumber(L,5);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"height_above_trunk");
  lua_pushnumber(L,2);
  lua_rawset(L,-3);
  lua_pushliteral(L,"percent_size");
  lua_pushnumber(L,70);
  lua_rawset(L,-3);
  lua_pushliteral(L,"radius");
  lua_pushnumber(L,2);
  lua_rawset(L,-3);
  lua_pushliteral(L,"corners");
  lua_pushnumber(L,2);
  lua_rawset(L,-3);
  lua_pushliteral(L,"percent_leaves");
  lua_pushnumber(L,72);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"apportionment");
  lua_createtable(L,0,5);
  lua_pushliteral(L,"frequency");
  lua_pushnumber(L,3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"temperature");
  lua_createtable(L,0,2);
  lua_pushliteral(L,"min");
  lua_pushnumber(L,4);
  lua_rawset(L,-3);
  lua_pushliteral(L,"max");
  lua_pushnumber(L,16);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"density");
  lua_pushnumber(L,4);
  lua_rawset(L,-3);
  lua_pushliteral(L,"biome");
  lua_pushnumber(L,25);
  lua_rawset(L,-3);
  lua_pushliteral(L,"tolerance");
  lua_pushnumber(L,10);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* register_tree("jungle", {
   * 	description = "arbre de jungle",
   * 	register = {},
   * 	names = {
   * 		tree = "default:jungletree",
   * 		leaves = "default:jungleleaves",
   * 		wood = "default:junglewood",
   * 		sapling = "default:junglesapling",
   * 	},
   * 	growing = {
   * 		trunk_height = {min = 8, max = 12},
   * 		height_above_trunk = 3,
   * 		percent_size = 40,
   * 		radius = 3,
   * 		corners = 1,
   * 		percent_leaves = 64,
   * 		base = 60,
   * 		associated = {
   * 			["default:junglegrass"] = 30
   * 		}
   * 	},
   * 	apportionment = {
   * 		frequency = 18,
   * 		temperature = {min = 13, max = 20},
   * 		water_proximity = 16,
   * 		density = 20,
   * 		biome = 75,
   * 		tolerance = 15,
   * 	},
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"register_tree");
  lua_pushliteral(L,"jungle");
  lua_createtable(L,0,5);
  lua_pushliteral(L,"description");
  lua_pushliteral(L,"arbre de jungle");
  lua_rawset(L,-3);
  lua_pushliteral(L,"register");
  lua_newtable(L);
  lua_rawset(L,-3);
  lua_pushliteral(L,"names");
  lua_createtable(L,0,4);
  lua_pushliteral(L,"tree");
  lua_pushliteral(L,"default:jungletree");
  lua_rawset(L,-3);
  lua_pushliteral(L,"leaves");
  lua_pushliteral(L,"default:jungleleaves");
  lua_rawset(L,-3);
  lua_pushliteral(L,"wood");
  lua_pushliteral(L,"default:junglewood");
  lua_rawset(L,-3);
  lua_pushliteral(L,"sapling");
  lua_pushliteral(L,"default:junglesapling");
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"growing");
  lua_createtable(L,0,8);
  lua_pushliteral(L,"trunk_height");
  lua_createtable(L,0,2);
  lua_pushliteral(L,"min");
  lua_pushnumber(L,8);
  lua_rawset(L,-3);
  lua_pushliteral(L,"max");
  lua_pushnumber(L,12);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"height_above_trunk");
  lua_pushnumber(L,3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"percent_size");
  lua_pushnumber(L,40);
  lua_rawset(L,-3);
  lua_pushliteral(L,"radius");
  lua_pushnumber(L,3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"corners");
  lua_pushnumber(L,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"percent_leaves");
  lua_pushnumber(L,64);
  lua_rawset(L,-3);
  lua_pushliteral(L,"base");
  lua_pushnumber(L,60);
  lua_rawset(L,-3);
  lua_pushliteral(L,"associated");
  lua_createtable(L,0,1);
  lua_pushliteral(L,"default:junglegrass");
  lua_pushnumber(L,30);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"apportionment");
  lua_createtable(L,0,6);
  lua_pushliteral(L,"frequency");
  lua_pushnumber(L,18);
  lua_rawset(L,-3);
  lua_pushliteral(L,"temperature");
  lua_createtable(L,0,2);
  lua_pushliteral(L,"min");
  lua_pushnumber(L,13);
  lua_rawset(L,-3);
  lua_pushliteral(L,"max");
  lua_pushnumber(L,20);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"water_proximity");
  lua_pushnumber(L,16);
  lua_rawset(L,-3);
  lua_pushliteral(L,"density");
  lua_pushnumber(L,20);
  lua_rawset(L,-3);
  lua_pushliteral(L,"biome");
  lua_pushnumber(L,75);
  lua_rawset(L,-3);
  lua_pushliteral(L,"tolerance");
  lua_pushnumber(L,15);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* register_tree("beech", {
   * 	description = "hetre",
   * 	sapling = {chance = 1.5, growing = 8},
   * 	growing = {
   * 		trunk_height = {min = 6, max = 10},
   * 		height_above_trunk = 3,
   * 		percent_size = 60,
   * 		radius = 3,
   * 		corners = 1,
   * 		percent_leaves = 68,
   * 		associated = {
   * 			["flowers:viola"] = 4,
   * 			["flowers:tulip"] = 3,
   * 			["flowers:rose"] = 1,
   * 		}
   * 	},
   * 	apportionment = {
   * 		frequency = 12,
   * 		temperature = {min = 6, max = 16},
   * 		density = 16,
   * 		biome = 35,
   * 		tolerance = 20,
   * 	},
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"register_tree");
  lua_pushliteral(L,"beech");
  lua_createtable(L,0,4);
  lua_pushliteral(L,"description");
  lua_pushliteral(L,"hetre");
  lua_rawset(L,-3);
  lua_pushliteral(L,"sapling");
  lua_createtable(L,0,2);
  lua_pushliteral(L,"chance");
  lua_pushnumber(L,1.5);
  lua_rawset(L,-3);
  lua_pushliteral(L,"growing");
  lua_pushnumber(L,8);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"growing");
  lua_createtable(L,0,7);
  lua_pushliteral(L,"trunk_height");
  lua_createtable(L,0,2);
  lua_pushliteral(L,"min");
  lua_pushnumber(L,6);
  lua_rawset(L,-3);
  lua_pushliteral(L,"max");
  lua_pushnumber(L,10);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"height_above_trunk");
  lua_pushnumber(L,3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"percent_size");
  lua_pushnumber(L,60);
  lua_rawset(L,-3);
  lua_pushliteral(L,"radius");
  lua_pushnumber(L,3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"corners");
  lua_pushnumber(L,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"percent_leaves");
  lua_pushnumber(L,68);
  lua_rawset(L,-3);
  lua_pushliteral(L,"associated");
  lua_createtable(L,0,3);
  lua_pushliteral(L,"flowers:viola");
  lua_pushnumber(L,4);
  lua_rawset(L,-3);
  lua_pushliteral(L,"flowers:tulip");
  lua_pushnumber(L,3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"flowers:rose");
  lua_pushnumber(L,1);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"apportionment");
  lua_createtable(L,0,5);
  lua_pushliteral(L,"frequency");
  lua_pushnumber(L,12);
  lua_rawset(L,-3);
  lua_pushliteral(L,"temperature");
  lua_createtable(L,0,2);
  lua_pushliteral(L,"min");
  lua_pushnumber(L,6);
  lua_rawset(L,-3);
  lua_pushliteral(L,"max");
  lua_pushnumber(L,16);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"density");
  lua_pushnumber(L,16);
  lua_rawset(L,-3);
  lua_pushliteral(L,"biome");
  lua_pushnumber(L,35);
  lua_rawset(L,-3);
  lua_pushliteral(L,"tolerance");
  lua_pushnumber(L,20);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* register_tree("ginkgo", {
   * 	description = "ginkgo",
   * 	sapling = {chance = 1.2, growing = 3.5},
   * 	growing = {
   * 		trunk_height = {min = 6, max = 12},
   * 		height_above_trunk = 3,
   * 		percent_size = 72,
   * 		radius = 3,
   * 		corners = 1,
   * 		percent_leaves = 45,
   * 		associated = {
   * 			["flowers:viola"] = 10,
   * 			["flowers:tulip"] = 2,
   * 		}
   * 	},
   * 	apportionment = {
   * 		frequency = 1,
   * 		temperature = {min = 7, max = 13},
   * 		density = 2,
   * 		biome = 60,
   * 		tolerance = 5,
   * 	},
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"register_tree");
  lua_pushliteral(L,"ginkgo");
  lua_createtable(L,0,4);
  lua_pushliteral(L,"description");
  lua_pushliteral(L,"ginkgo");
  lua_rawset(L,-3);
  lua_pushliteral(L,"sapling");
  lua_createtable(L,0,2);
  lua_pushliteral(L,"chance");
  lua_pushnumber(L,1.2);
  lua_rawset(L,-3);
  lua_pushliteral(L,"growing");
  lua_pushnumber(L,3.5);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"growing");
  lua_createtable(L,0,7);
  lua_pushliteral(L,"trunk_height");
  lua_createtable(L,0,2);
  lua_pushliteral(L,"min");
  lua_pushnumber(L,6);
  lua_rawset(L,-3);
  lua_pushliteral(L,"max");
  lua_pushnumber(L,12);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"height_above_trunk");
  lua_pushnumber(L,3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"percent_size");
  lua_pushnumber(L,72);
  lua_rawset(L,-3);
  lua_pushliteral(L,"radius");
  lua_pushnumber(L,3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"corners");
  lua_pushnumber(L,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"percent_leaves");
  lua_pushnumber(L,45);
  lua_rawset(L,-3);
  lua_pushliteral(L,"associated");
  lua_createtable(L,0,2);
  lua_pushliteral(L,"flowers:viola");
  lua_pushnumber(L,10);
  lua_rawset(L,-3);
  lua_pushliteral(L,"flowers:tulip");
  lua_pushnumber(L,2);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"apportionment");
  lua_createtable(L,0,5);
  lua_pushliteral(L,"frequency");
  lua_pushnumber(L,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"temperature");
  lua_createtable(L,0,2);
  lua_pushliteral(L,"min");
  lua_pushnumber(L,7);
  lua_rawset(L,-3);
  lua_pushliteral(L,"max");
  lua_pushnumber(L,13);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"density");
  lua_pushnumber(L,2);
  lua_rawset(L,-3);
  lua_pushliteral(L,"biome");
  lua_pushnumber(L,60);
  lua_rawset(L,-3);
  lua_pushliteral(L,"tolerance");
  lua_pushnumber(L,5);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* register_tree("lavender", {
   * 	description = "lavande",
   * 	descriptions = {
   * 		fruitleaves = "Feuilles de lavande avec fleurs",
   * 		fruit = "Fleurs de lavande",
   * 	},
   * 	sapling = {chance = 10, growing = 14},
   * 	growing = {
   * 		trunk_height = {min = 1, max = 2},
   * 		height_above_trunk = 1,
   * 		percent_size = 180,
   * 		radius = 2,
   * 		corners = 1,
   * 		percent_leaves = 75,
   * 		associated = {
   * 			["flowers:viola"] = 4,
   * 			["flowers:tulip"] = 7,
   * 		}
   * 	},
   * 	fruits = {chance = 6, max = 35, hearts = 0, craft = "dye:violet", craft_sapling = true},
   * 	wood_by_trunk = 1,
   * 	apportionment = {
   * 		frequency = 3,
   * 		temperature = {min = 8, max = 18},
   * 		water_proximity = -30,
   * 		density = 1,
   * 		biome = 80,
   * 		tolerance = 15,
   * 	},
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"register_tree");
  lua_pushliteral(L,"lavender");
  lua_createtable(L,0,7);
  lua_pushliteral(L,"description");
  lua_pushliteral(L,"lavande");
  lua_rawset(L,-3);
  lua_pushliteral(L,"descriptions");
  lua_createtable(L,0,2);
  lua_pushliteral(L,"fruitleaves");
  lua_pushliteral(L,"Feuilles de lavande avec fleurs");
  lua_rawset(L,-3);
  lua_pushliteral(L,"fruit");
  lua_pushliteral(L,"Fleurs de lavande");
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"sapling");
  lua_createtable(L,0,2);
  lua_pushliteral(L,"chance");
  lua_pushnumber(L,10);
  lua_rawset(L,-3);
  lua_pushliteral(L,"growing");
  lua_pushnumber(L,14);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"growing");
  lua_createtable(L,0,7);
  lua_pushliteral(L,"trunk_height");
  lua_createtable(L,0,2);
  lua_pushliteral(L,"min");
  lua_pushnumber(L,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"max");
  lua_pushnumber(L,2);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"height_above_trunk");
  lua_pushnumber(L,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"percent_size");
  lua_pushnumber(L,180);
  lua_rawset(L,-3);
  lua_pushliteral(L,"radius");
  lua_pushnumber(L,2);
  lua_rawset(L,-3);
  lua_pushliteral(L,"corners");
  lua_pushnumber(L,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"percent_leaves");
  lua_pushnumber(L,75);
  lua_rawset(L,-3);
  lua_pushliteral(L,"associated");
  lua_createtable(L,0,2);
  lua_pushliteral(L,"flowers:viola");
  lua_pushnumber(L,4);
  lua_rawset(L,-3);
  lua_pushliteral(L,"flowers:tulip");
  lua_pushnumber(L,7);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"fruits");
  lua_createtable(L,0,5);
  lua_pushliteral(L,"chance");
  lua_pushnumber(L,6);
  lua_rawset(L,-3);
  lua_pushliteral(L,"max");
  lua_pushnumber(L,35);
  lua_rawset(L,-3);
  lua_pushliteral(L,"hearts");
  lua_pushnumber(L,0);
  lua_rawset(L,-3);
  lua_pushliteral(L,"craft");
  lua_pushliteral(L,"dye:violet");
  lua_rawset(L,-3);
  lua_pushliteral(L,"craft_sapling");
  lua_pushboolean(L,1);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"wood_by_trunk");
  lua_pushnumber(L,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"apportionment");
  lua_createtable(L,0,6);
  lua_pushliteral(L,"frequency");
  lua_pushnumber(L,3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"temperature");
  lua_createtable(L,0,2);
  lua_pushliteral(L,"min");
  lua_pushnumber(L,8);
  lua_rawset(L,-3);
  lua_pushliteral(L,"max");
  lua_pushnumber(L,18);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"water_proximity");
  lua_pushnumber(L,-30);
  lua_rawset(L,-3);
  lua_pushliteral(L,"density");
  lua_pushnumber(L,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"biome");
  lua_pushnumber(L,80);
  lua_rawset(L,-3);
  lua_pushliteral(L,"tolerance");
  lua_pushnumber(L,15);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  return 0;
}


/* from lua.c */
static int traceback (lua_State *L) {
  if (!lua_isstring(L, 1))  /* 'message' not a string? */
    return 1;  /* keep it intact */
  lua_getfield(L, LUA_GLOBALSINDEX, "debug");
  if (!lua_istable(L, -1)) {
    lua_pop(L, 1);
    return 1;
  }
  lua_getfield(L, -1, "traceback");
  if (!lua_isfunction(L, -1)) {
    lua_pop(L, 2);
    return 1;
  }
  lua_pushvalue(L, 1);  /* pass error message */
  lua_pushinteger(L, 2);  /* skip this function and traceback */
  lua_call(L, 2, 1);  /* call debug.traceback */
  return 1;
}


static void lc_l_message (const char *pname, const char *msg) {
  if (pname) fprintf(stderr, "%s: ", pname);
  fprintf(stderr, "%s\n", msg);
  fflush(stderr);
}

static int lc_report (lua_State *L, int status) {
  if (status && !lua_isnil(L, -1)) {
    const char *msg = lua_tostring(L, -1);
    if (msg == NULL) msg = "(error object is not a string)";
    /*FIX-IMROVE:progname*/
    lc_l_message("lua", msg);
    lua_pop(L, 1);
  }
  return status;
}

static int lc_docall (lua_State *L, int narg, int clear) {
  int status;
  int base = lua_gettop(L) - narg;  /* function index */
  lua_pushcfunction(L, traceback);  /* push traceback function */
  lua_insert(L, base);  /* put it under chunk and args */
  /*FIX? signal(SIGINT, laction); */
  status = lua_pcall(L, narg, (clear ? 0 : LUA_MULTRET), base);
  /*FIX? signal(SIGINT, SIG_DFL); */
  lua_remove(L, base);  /* remove traceback function */
  /* force a complete garbage collection in case of errors */
  if (status != 0) lua_gc(L, LUA_GCCOLLECT, 0);
  return status;
}

static int lc_dofile (lua_State *L, const char *name) {
  int status = luaL_loadfile(L, name) || lc_docall(L, 0, 1);
  return lc_report(L, status);
}

static int lc_dostring (lua_State *L, const char *s, const char *name) {
  int status = luaL_loadbuffer(L, s, strlen(s), name) || lc_docall(L, 0, 1);
  return lc_report(L, status);
}

static int lc_handle_luainit (lua_State *L) {
  const char *init = getenv(LUA_INIT);
  if (init == NULL) return 0;  /* status OK */
  else if (init[0] == '@')
    return lc_dofile(L, init+1);
  else
    return lc_dostring(L, init, "=" LUA_INIT);
}


typedef struct {
  int c;
  const char ** v;
} lc_args_t;


/* create global arg table */
static void lc_createarg(lua_State * L, const lc_args_t * const args) {
  int i;
  lua_newtable(L);
  for (i=0; i < args->c; i++) {
    lua_pushstring(L, args->v[i]);
    lua_rawseti(L, -2, i);
  }
  lua_setglobal(L, "arg");
}


int lc_pmain_mod_forest_trees(lua_State * L) {
	  luaL_openlibs(L);

	  lua_pushcfunction(L, traceback);

	  const int status1 = lc_handle_luainit(L);
	  if (status1 != 0) return 0;

	  /* note: IMPROVE: closure not always needed here */
	  lua_newtable(L); /* closure table */
	  lua_pushcclosure(L, lcf_main, 1);

	  int status2 = lua_pcall(L, 0, 0, -2);
	  if (status2 != 0) {
	    const char * msg = lua_tostring(L,-1);
	    if (msg == NULL) msg = "(error object is not a string)";
	    fputs(msg, stderr);
	  }
	  return 0;
	}
