/* WARNING: This file was automatically generated by lua2c. */

#ifdef __cplusplus
extern "C" {
#endif
#include <lua.h>
#include <lauxlib.h>
#include <lualib.h>
#ifdef __cplusplus
}
#endif
#include <stdio.h>
#include <stdlib.h>


#include <string.h>


#include <assert.h>

/* name: (main)
 * function(...) */
static int lcf_main (lua_State * L) {
  enum { lc_nformalargs = 0 };
  #ifndef NDEBUG
  const int lc_nactualargs = lua_gettop(L);
  #endif
  #ifndef NDEBUG
  const int lc_nextra = (lc_nactualargs - lc_nformalargs);
  #endif
  
  /* --= Register Biome Decoration Using Plants Mega Pack Lite
   * --= Desert Biome
   * -- Cactus
   * minetest.register_decoration({
   * 	deco_type = "simple",
   * 	place_on = {"default:desert_sand", "default:sandstone"},
   * 	sidelen = 16,
   * 	fill_ratio = 0.005,
   * 	biomes = {"desert", "sandstone"},
   * 	decoration = {
   * 		"xanadu:cactus_echinocereus", "xanadu:cactus_matucana",
   * 		"xanadu:cactus_baseball", "xanadu:cactus_golden"
   * 	},
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_decoration");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,6);
  lua_pushliteral(L,"deco_type");
  lua_pushliteral(L,"simple");
  lua_rawset(L,-3);
  lua_pushliteral(L,"place_on");
  lua_createtable(L,2,0);
  lua_pushliteral(L,"default:desert_sand");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"default:sandstone");
  lua_rawseti(L,-2,2);
  lua_rawset(L,-3);
  lua_pushliteral(L,"sidelen");
  lua_pushnumber(L,16);
  lua_rawset(L,-3);
  lua_pushliteral(L,"fill_ratio");
  lua_pushnumber(L,0.005);
  lua_rawset(L,-3);
  lua_pushliteral(L,"biomes");
  lua_createtable(L,2,0);
  lua_pushliteral(L,"desert");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"sandstone");
  lua_rawseti(L,-2,2);
  lua_rawset(L,-3);
  lua_pushliteral(L,"decoration");
  lua_createtable(L,4,0);
  lua_pushliteral(L,"xanadu:cactus_echinocereus");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"xanadu:cactus_matucana");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"xanadu:cactus_baseball");
  lua_rawseti(L,-2,3);
  lua_pushliteral(L,"xanadu:cactus_golden");
  lua_rawseti(L,-2,4);
  lua_rawset(L,-3);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* -- Desert Plants
   * minetest.register_decoration({
   * 	deco_type = "simple",
   * 	place_on = {"default:desert_sand", "default:sandstone", "default:sand"},
   * 	sidelen = 16,
   * 	fill_ratio = 0.004,
   * 	biomes = {"desert", "sandstone"},
   * 	decoration = {
   * 		"xanadu:desert_kangaroo", "xanadu:desert_brittle",
   * 		"xanadu:desert_ocotillo", "xanadu:desert_whitesage"
   * 	},
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_decoration");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,6);
  lua_pushliteral(L,"deco_type");
  lua_pushliteral(L,"simple");
  lua_rawset(L,-3);
  lua_pushliteral(L,"place_on");
  lua_createtable(L,3,0);
  lua_pushliteral(L,"default:desert_sand");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"default:sandstone");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"default:sand");
  lua_rawseti(L,-2,3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"sidelen");
  lua_pushnumber(L,16);
  lua_rawset(L,-3);
  lua_pushliteral(L,"fill_ratio");
  lua_pushnumber(L,0.004);
  lua_rawset(L,-3);
  lua_pushliteral(L,"biomes");
  lua_createtable(L,2,0);
  lua_pushliteral(L,"desert");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"sandstone");
  lua_rawseti(L,-2,2);
  lua_rawset(L,-3);
  lua_pushliteral(L,"decoration");
  lua_createtable(L,4,0);
  lua_pushliteral(L,"xanadu:desert_kangaroo");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"xanadu:desert_brittle");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"xanadu:desert_ocotillo");
  lua_rawseti(L,-2,3);
  lua_pushliteral(L,"xanadu:desert_whitesage");
  lua_rawseti(L,-2,4);
  lua_rawset(L,-3);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* --=  Prairie Biome
   * -- Grass
   * minetest.register_decoration({
   * 	deco_type = "simple",
   * 	place_on = {"ethereal:prairie_dirt", "ethereal:green_dirt"},
   * 	sidelen = 16,
   * 	fill_ratio = 0.005,
   * 	biomes = {"prairie", "grassy", "grassytwo"},
   * 	decoration = {
   * 		"xanadu:grass_prairie", "xanadu:grass_cord",
   * 		"xanadu:grass_wheatgrass", "xanadu:desert_whitesage"
   * 	},
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_decoration");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,6);
  lua_pushliteral(L,"deco_type");
  lua_pushliteral(L,"simple");
  lua_rawset(L,-3);
  lua_pushliteral(L,"place_on");
  lua_createtable(L,2,0);
  lua_pushliteral(L,"ethereal:prairie_dirt");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"ethereal:green_dirt");
  lua_rawseti(L,-2,2);
  lua_rawset(L,-3);
  lua_pushliteral(L,"sidelen");
  lua_pushnumber(L,16);
  lua_rawset(L,-3);
  lua_pushliteral(L,"fill_ratio");
  lua_pushnumber(L,0.005);
  lua_rawset(L,-3);
  lua_pushliteral(L,"biomes");
  lua_createtable(L,3,0);
  lua_pushliteral(L,"prairie");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"grassy");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"grassytwo");
  lua_rawseti(L,-2,3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"decoration");
  lua_createtable(L,4,0);
  lua_pushliteral(L,"xanadu:grass_prairie");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"xanadu:grass_cord");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"xanadu:grass_wheatgrass");
  lua_rawseti(L,-2,3);
  lua_pushliteral(L,"xanadu:desert_whitesage");
  lua_rawseti(L,-2,4);
  lua_rawset(L,-3);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* -- Flowers
   * minetest.register_decoration({
   * 	deco_type = "simple",
   * 	place_on = {
   * 		"ethereal:prairie_grass", "ethereal:green_dirt",
   * 		"ethereal:grove_dirt", "ethereal:bamboo_dirt"
   * 	},
   * 	sidelen = 16,
   * 	fill_ratio = 0.005,
   * 	biomes = {"prairie", "grassy", "grassytwo", "bamboo"},
   * 	decoration = {
   * 		"xanadu:flower_jacobsladder", "xanadu:flower_thistle",
   * 		"xanadu:flower_wildcarrot"
   * 	},
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_decoration");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,6);
  lua_pushliteral(L,"deco_type");
  lua_pushliteral(L,"simple");
  lua_rawset(L,-3);
  lua_pushliteral(L,"place_on");
  lua_createtable(L,4,0);
  lua_pushliteral(L,"ethereal:prairie_grass");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"ethereal:green_dirt");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"ethereal:grove_dirt");
  lua_rawseti(L,-2,3);
  lua_pushliteral(L,"ethereal:bamboo_dirt");
  lua_rawseti(L,-2,4);
  lua_rawset(L,-3);
  lua_pushliteral(L,"sidelen");
  lua_pushnumber(L,16);
  lua_rawset(L,-3);
  lua_pushliteral(L,"fill_ratio");
  lua_pushnumber(L,0.005);
  lua_rawset(L,-3);
  lua_pushliteral(L,"biomes");
  lua_createtable(L,4,0);
  lua_pushliteral(L,"prairie");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"grassy");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"grassytwo");
  lua_rawseti(L,-2,3);
  lua_pushliteral(L,"bamboo");
  lua_rawseti(L,-2,4);
  lua_rawset(L,-3);
  lua_pushliteral(L,"decoration");
  lua_createtable(L,3,0);
  lua_pushliteral(L,"xanadu:flower_jacobsladder");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"xanadu:flower_thistle");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"xanadu:flower_wildcarrot");
  lua_rawseti(L,-2,3);
  lua_rawset(L,-3);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_decoration({
   * 	deco_type = "simple",
   * 	place_on = {
   * 		"ethereal:prairie_grass", "ethereal:green_dirt",
   * 		"ethereal:grove_dirt"
   * 	},
   * 	sidelen = 16,
   * 	fill_ratio = 0.005,
   * 	biomes = {"prairie", "grassy", "grassytwo", "grove"},
   * 	decoration = {
   * 		"xanadu:flower_delphinium", "xanadu:flower_celosia",
   * 		"xanadu:flower_daisy", "xanadu:flower_bluerose"
   * 	},
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_decoration");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,6);
  lua_pushliteral(L,"deco_type");
  lua_pushliteral(L,"simple");
  lua_rawset(L,-3);
  lua_pushliteral(L,"place_on");
  lua_createtable(L,3,0);
  lua_pushliteral(L,"ethereal:prairie_grass");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"ethereal:green_dirt");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"ethereal:grove_dirt");
  lua_rawseti(L,-2,3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"sidelen");
  lua_pushnumber(L,16);
  lua_rawset(L,-3);
  lua_pushliteral(L,"fill_ratio");
  lua_pushnumber(L,0.005);
  lua_rawset(L,-3);
  lua_pushliteral(L,"biomes");
  lua_createtable(L,4,0);
  lua_pushliteral(L,"prairie");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"grassy");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"grassytwo");
  lua_rawseti(L,-2,3);
  lua_pushliteral(L,"grove");
  lua_rawseti(L,-2,4);
  lua_rawset(L,-3);
  lua_pushliteral(L,"decoration");
  lua_createtable(L,4,0);
  lua_pushliteral(L,"xanadu:flower_delphinium");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"xanadu:flower_celosia");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"xanadu:flower_daisy");
  lua_rawseti(L,-2,3);
  lua_pushliteral(L,"xanadu:flower_bluerose");
  lua_rawseti(L,-2,4);
  lua_rawset(L,-3);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* -- Shrubs
   * minetest.register_decoration({
   * 	deco_type = "simple",
   * 	place_on = {
   * 		"ethereal:prairie_grass", "ethereal:green_dirt",
   * 		"ethereal:grove_dirt", "ethereal:jungle_grass",
   * 		"ethereal:gray_dirt"
   * 	},
   * 	sidelen = 16,
   * 	fill_ratio = 0.005,
   * 	biomes = {
   * 		"prairie", "grassy", "grassytwo", "grove", "junglee",
   * 		"grayness", "jumble"
   * 	},
   * 	decoration = {"xanadu:shrub_kerria", "xanadu:shrub_spicebush"},
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_decoration");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,6);
  lua_pushliteral(L,"deco_type");
  lua_pushliteral(L,"simple");
  lua_rawset(L,-3);
  lua_pushliteral(L,"place_on");
  lua_createtable(L,5,0);
  lua_pushliteral(L,"ethereal:prairie_grass");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"ethereal:green_dirt");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"ethereal:grove_dirt");
  lua_rawseti(L,-2,3);
  lua_pushliteral(L,"ethereal:jungle_grass");
  lua_rawseti(L,-2,4);
  lua_pushliteral(L,"ethereal:gray_dirt");
  lua_rawseti(L,-2,5);
  lua_rawset(L,-3);
  lua_pushliteral(L,"sidelen");
  lua_pushnumber(L,16);
  lua_rawset(L,-3);
  lua_pushliteral(L,"fill_ratio");
  lua_pushnumber(L,0.005);
  lua_rawset(L,-3);
  lua_pushliteral(L,"biomes");
  lua_createtable(L,7,0);
  lua_pushliteral(L,"prairie");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"grassy");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"grassytwo");
  lua_rawseti(L,-2,3);
  lua_pushliteral(L,"grove");
  lua_rawseti(L,-2,4);
  lua_pushliteral(L,"junglee");
  lua_rawseti(L,-2,5);
  lua_pushliteral(L,"grayness");
  lua_rawseti(L,-2,6);
  lua_pushliteral(L,"jumble");
  lua_rawseti(L,-2,7);
  lua_rawset(L,-3);
  lua_pushliteral(L,"decoration");
  lua_createtable(L,2,0);
  lua_pushliteral(L,"xanadu:shrub_kerria");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"xanadu:shrub_spicebush");
  lua_rawseti(L,-2,2);
  lua_rawset(L,-3);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* --= Jungle Biome
   * minetest.register_decoration({
   * 	deco_type = "simple",
   * 	place_on = {"ethereal:jungle_dirt", "ethereal:green_dirt"},
   * 	sidelen = 16,
   * 	fill_ratio = 0.007,
   * 	biomes = {"junglee", "jumble"},
   * 	decoration = {
   * 		"xanadu:rainforest_guzmania", "xanadu:rainforest_devil",
   * 		"xanadu:rainforest_lazarus", "xanadu:rainforest_lollipop",
   * 		"xanadu:mushroom_woolly"
   * 	},
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_decoration");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,6);
  lua_pushliteral(L,"deco_type");
  lua_pushliteral(L,"simple");
  lua_rawset(L,-3);
  lua_pushliteral(L,"place_on");
  lua_createtable(L,2,0);
  lua_pushliteral(L,"ethereal:jungle_dirt");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"ethereal:green_dirt");
  lua_rawseti(L,-2,2);
  lua_rawset(L,-3);
  lua_pushliteral(L,"sidelen");
  lua_pushnumber(L,16);
  lua_rawset(L,-3);
  lua_pushliteral(L,"fill_ratio");
  lua_pushnumber(L,0.007);
  lua_rawset(L,-3);
  lua_pushliteral(L,"biomes");
  lua_createtable(L,2,0);
  lua_pushliteral(L,"junglee");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"jumble");
  lua_rawseti(L,-2,2);
  lua_rawset(L,-3);
  lua_pushliteral(L,"decoration");
  lua_createtable(L,5,0);
  lua_pushliteral(L,"xanadu:rainforest_guzmania");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"xanadu:rainforest_devil");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"xanadu:rainforest_lazarus");
  lua_rawseti(L,-2,3);
  lua_pushliteral(L,"xanadu:rainforest_lollipop");
  lua_rawseti(L,-2,4);
  lua_pushliteral(L,"xanadu:mushroom_woolly");
  lua_rawseti(L,-2,5);
  lua_rawset(L,-3);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* --= Cold Biomes
   * minetest.register_decoration({
   * 	deco_type = "simple",
   * 	place_on = {
   * 		"default:dirt_with_snow", "ethereal:cold_dirt",
   * 		"ethereal:gray_dirt"
   * 	},
   * 	sidelen = 16,
   * 	fill_ratio = 0.005,
   * 	biomes = {"snowy", "alpine", "grayness"},
   * 	decoration = {
   * 		"xanadu:mountain_edelweiss", "xanadu:mountain_armeria",
   * 		"xanadu:mountain_bellflower", "xanadu:mountain_willowherb",
   * 		"xanadu:mountain_bistort"
   * 	},
   * 
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_decoration");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,6);
  lua_pushliteral(L,"deco_type");
  lua_pushliteral(L,"simple");
  lua_rawset(L,-3);
  lua_pushliteral(L,"place_on");
  lua_createtable(L,3,0);
  lua_pushliteral(L,"default:dirt_with_snow");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"ethereal:cold_dirt");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"ethereal:gray_dirt");
  lua_rawseti(L,-2,3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"sidelen");
  lua_pushnumber(L,16);
  lua_rawset(L,-3);
  lua_pushliteral(L,"fill_ratio");
  lua_pushnumber(L,0.005);
  lua_rawset(L,-3);
  lua_pushliteral(L,"biomes");
  lua_createtable(L,3,0);
  lua_pushliteral(L,"snowy");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"alpine");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"grayness");
  lua_rawseti(L,-2,3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"decoration");
  lua_createtable(L,5,0);
  lua_pushliteral(L,"xanadu:mountain_edelweiss");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"xanadu:mountain_armeria");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"xanadu:mountain_bellflower");
  lua_rawseti(L,-2,3);
  lua_pushliteral(L,"xanadu:mountain_willowherb");
  lua_rawseti(L,-2,4);
  lua_pushliteral(L,"xanadu:mountain_bistort");
  lua_rawseti(L,-2,5);
  lua_rawset(L,-3);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* --= Mushroom Biome
   * minetest.register_decoration({
   * 	deco_type = "simple",
   * 	place_on = {"ethereal:mushroom_dirt"},
   * 	sidelen = 16,
   * 	fill_ratio = 0.005,
   * 	biomes = {"mushroom"},
   * 	decoration = {
   * 		"xanadu:mushroom_powderpuff", "xanadu:mushroom_chanterelle",
   * 		"xanadu:mushroom_parasol"
   * 	},
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_decoration");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,6);
  lua_pushliteral(L,"deco_type");
  lua_pushliteral(L,"simple");
  lua_rawset(L,-3);
  lua_pushliteral(L,"place_on");
  lua_createtable(L,1,0);
  lua_pushliteral(L,"ethereal:mushroom_dirt");
  lua_rawseti(L,-2,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"sidelen");
  lua_pushnumber(L,16);
  lua_rawset(L,-3);
  lua_pushliteral(L,"fill_ratio");
  lua_pushnumber(L,0.005);
  lua_rawset(L,-3);
  lua_pushliteral(L,"biomes");
  lua_createtable(L,1,0);
  lua_pushliteral(L,"mushroom");
  lua_rawseti(L,-2,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"decoration");
  lua_createtable(L,3,0);
  lua_pushliteral(L,"xanadu:mushroom_powderpuff");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"xanadu:mushroom_chanterelle");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"xanadu:mushroom_parasol");
  lua_rawseti(L,-2,3);
  lua_rawset(L,-3);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* --= Lakeside
   * minetest.register_decoration({
   * 	deco_type = "simple",
   * 	place_on = {"default:sand", "default:green_dirt"},
   * 	sidelen = 16,
   * 	fill_ratio = 0.015,
   * 	biomes = {"sandclay", "grassy_ocean", "grassy", "grassytwo", "jumble"},
   * 	decoration = {
   * 		"xanadu:wetlands_cattails", "xanadu:wetlands_pickerel",
   * 		"xanadu:wetlands_mannagrass", "xanadu:wetlands_turtle"
   * 	},
   * 	spawn_by = "default:water_source",
   * 	num_spawn_by = 1,
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_decoration");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,8);
  lua_pushliteral(L,"deco_type");
  lua_pushliteral(L,"simple");
  lua_rawset(L,-3);
  lua_pushliteral(L,"place_on");
  lua_createtable(L,2,0);
  lua_pushliteral(L,"default:sand");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"default:green_dirt");
  lua_rawseti(L,-2,2);
  lua_rawset(L,-3);
  lua_pushliteral(L,"sidelen");
  lua_pushnumber(L,16);
  lua_rawset(L,-3);
  lua_pushliteral(L,"fill_ratio");
  lua_pushnumber(L,0.015);
  lua_rawset(L,-3);
  lua_pushliteral(L,"biomes");
  lua_createtable(L,5,0);
  lua_pushliteral(L,"sandclay");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"grassy_ocean");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"grassy");
  lua_rawseti(L,-2,3);
  lua_pushliteral(L,"grassytwo");
  lua_rawseti(L,-2,4);
  lua_pushliteral(L,"jumble");
  lua_rawseti(L,-2,5);
  lua_rawset(L,-3);
  lua_pushliteral(L,"decoration");
  lua_createtable(L,4,0);
  lua_pushliteral(L,"xanadu:wetlands_cattails");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"xanadu:wetlands_pickerel");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"xanadu:wetlands_mannagrass");
  lua_rawseti(L,-2,3);
  lua_pushliteral(L,"xanadu:wetlands_turtle");
  lua_rawseti(L,-2,4);
  lua_rawset(L,-3);
  lua_pushliteral(L,"spawn_by");
  lua_pushliteral(L,"default:water_source");
  lua_rawset(L,-3);
  lua_pushliteral(L,"num_spawn_by");
  lua_pushnumber(L,1);
  lua_rawset(L,-3);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* --= Harsh Biomes
   * minetest.register_decoration({
   * 	deco_type = "simple",
   * 	place_on = {
   * 		"ethereal:mushroom_dirt", "ethereal:green_dirt",
   * 		"ethereal:gray_dirt", "ethereal:cold_dirt",
   * 		"ethereal:dirt_with_snow", "ethereal:jungle_dirt",
   * 		"ethereal:prairie_dirt", "ethereal:grove_dirt",
   * 		"ethereal:dry_dirt", "ethereal:fiery_dirt", "default:sand",
   * 		"default:desert_sand", "xanadu:red", "ethereal:bamboo_dirt"
   * 	},
   * 	sidelen = 16,
   * 	fill_ratio = 0.004,
   * 	biomes = {
   * 		"mushroom", "prairie", "grayness", "plains", "desert",
   * 		"junglee", "grassy", "grassytwo", "jumble", "snowy", "alpine",
   * 		"fiery", "mesa", "bamboo"
   * 	},
   * 	decoration = {"xanadu:spooky_thornbush", "xanadu:spooky_baneberry"},
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_decoration");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,6);
  lua_pushliteral(L,"deco_type");
  lua_pushliteral(L,"simple");
  lua_rawset(L,-3);
  lua_pushliteral(L,"place_on");
  lua_createtable(L,14,0);
  lua_pushliteral(L,"ethereal:mushroom_dirt");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"ethereal:green_dirt");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"ethereal:gray_dirt");
  lua_rawseti(L,-2,3);
  lua_pushliteral(L,"ethereal:cold_dirt");
  lua_rawseti(L,-2,4);
  lua_pushliteral(L,"ethereal:dirt_with_snow");
  lua_rawseti(L,-2,5);
  lua_pushliteral(L,"ethereal:jungle_dirt");
  lua_rawseti(L,-2,6);
  lua_pushliteral(L,"ethereal:prairie_dirt");
  lua_rawseti(L,-2,7);
  lua_pushliteral(L,"ethereal:grove_dirt");
  lua_rawseti(L,-2,8);
  lua_pushliteral(L,"ethereal:dry_dirt");
  lua_rawseti(L,-2,9);
  lua_pushliteral(L,"ethereal:fiery_dirt");
  lua_rawseti(L,-2,10);
  lua_pushliteral(L,"default:sand");
  lua_rawseti(L,-2,11);
  lua_pushliteral(L,"default:desert_sand");
  lua_rawseti(L,-2,12);
  lua_pushliteral(L,"xanadu:red");
  lua_rawseti(L,-2,13);
  lua_pushliteral(L,"ethereal:bamboo_dirt");
  lua_rawseti(L,-2,14);
  lua_rawset(L,-3);
  lua_pushliteral(L,"sidelen");
  lua_pushnumber(L,16);
  lua_rawset(L,-3);
  lua_pushliteral(L,"fill_ratio");
  lua_pushnumber(L,0.004);
  lua_rawset(L,-3);
  lua_pushliteral(L,"biomes");
  lua_createtable(L,14,0);
  lua_pushliteral(L,"mushroom");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"prairie");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"grayness");
  lua_rawseti(L,-2,3);
  lua_pushliteral(L,"plains");
  lua_rawseti(L,-2,4);
  lua_pushliteral(L,"desert");
  lua_rawseti(L,-2,5);
  lua_pushliteral(L,"junglee");
  lua_rawseti(L,-2,6);
  lua_pushliteral(L,"grassy");
  lua_rawseti(L,-2,7);
  lua_pushliteral(L,"grassytwo");
  lua_rawseti(L,-2,8);
  lua_pushliteral(L,"jumble");
  lua_rawseti(L,-2,9);
  lua_pushliteral(L,"snowy");
  lua_rawseti(L,-2,10);
  lua_pushliteral(L,"alpine");
  lua_rawseti(L,-2,11);
  lua_pushliteral(L,"fiery");
  lua_rawseti(L,-2,12);
  lua_pushliteral(L,"mesa");
  lua_rawseti(L,-2,13);
  lua_pushliteral(L,"bamboo");
  lua_rawseti(L,-2,14);
  lua_rawset(L,-3);
  lua_pushliteral(L,"decoration");
  lua_createtable(L,2,0);
  lua_pushliteral(L,"xanadu:spooky_thornbush");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"xanadu:spooky_baneberry");
  lua_rawseti(L,-2,2);
  lua_rawset(L,-3);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* --= Poppy's growing in Clearing Biome in memory of RealBadAngel
   * minetest.register_decoration({
   * 	deco_type = "simple",
   * 	place_on = {
   * 		"ethereal:green_dirt",
   * 	},
   * 	sidelen = 16,
   * 	fill_ratio = 0.004,
   * 	biomes = {"clearing"},
   * 	decoration = {"xanadu:poppy"},
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_decoration");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,6);
  lua_pushliteral(L,"deco_type");
  lua_pushliteral(L,"simple");
  lua_rawset(L,-3);
  lua_pushliteral(L,"place_on");
  lua_createtable(L,1,0);
  lua_pushliteral(L,"ethereal:green_dirt");
  lua_rawseti(L,-2,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"sidelen");
  lua_pushnumber(L,16);
  lua_rawset(L,-3);
  lua_pushliteral(L,"fill_ratio");
  lua_pushnumber(L,0.004);
  lua_rawset(L,-3);
  lua_pushliteral(L,"biomes");
  lua_createtable(L,1,0);
  lua_pushliteral(L,"clearing");
  lua_rawseti(L,-2,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"decoration");
  lua_createtable(L,1,0);
  lua_pushliteral(L,"xanadu:poppy");
  lua_rawseti(L,-2,1);
  lua_rawset(L,-3);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  return 0;
}


/* from lua.c */
static int traceback (lua_State *L) {
  if (!lua_isstring(L, 1))  /* 'message' not a string? */
    return 1;  /* keep it intact */
  lua_getfield(L, LUA_GLOBALSINDEX, "debug");
  if (!lua_istable(L, -1)) {
    lua_pop(L, 1);
    return 1;
  }
  lua_getfield(L, -1, "traceback");
  if (!lua_isfunction(L, -1)) {
    lua_pop(L, 2);
    return 1;
  }
  lua_pushvalue(L, 1);  /* pass error message */
  lua_pushinteger(L, 2);  /* skip this function and traceback */
  lua_call(L, 2, 1);  /* call debug.traceback */
  return 1;
}


static void lc_l_message (const char *pname, const char *msg) {
  if (pname) fprintf(stderr, "%s: ", pname);
  fprintf(stderr, "%s\n", msg);
  fflush(stderr);
}

static int lc_report (lua_State *L, int status) {
  if (status && !lua_isnil(L, -1)) {
    const char *msg = lua_tostring(L, -1);
    if (msg == NULL) msg = "(error object is not a string)";
    /*FIX-IMROVE:progname*/
    lc_l_message("lua", msg);
    lua_pop(L, 1);
  }
  return status;
}

static int lc_docall (lua_State *L, int narg, int clear) {
  int status;
  int base = lua_gettop(L) - narg;  /* function index */
  lua_pushcfunction(L, traceback);  /* push traceback function */
  lua_insert(L, base);  /* put it under chunk and args */
  /*FIX? signal(SIGINT, laction); */
  status = lua_pcall(L, narg, (clear ? 0 : LUA_MULTRET), base);
  /*FIX? signal(SIGINT, SIG_DFL); */
  lua_remove(L, base);  /* remove traceback function */
  /* force a complete garbage collection in case of errors */
  if (status != 0) lua_gc(L, LUA_GCCOLLECT, 0);
  return status;
}

static int lc_dofile (lua_State *L, const char *name) {
  int status = luaL_loadfile(L, name) || lc_docall(L, 0, 1);
  return lc_report(L, status);
}

static int lc_dostring (lua_State *L, const char *s, const char *name) {
  int status = luaL_loadbuffer(L, s, strlen(s), name) || lc_docall(L, 0, 1);
  return lc_report(L, status);
}

static int lc_handle_luainit (lua_State *L) {
  const char *init = getenv(LUA_INIT);
  if (init == NULL) return 0;  /* status OK */
  else if (init[0] == '@')
    return lc_dofile(L, init+1);
  else
    return lc_dostring(L, init, "=" LUA_INIT);
}


typedef struct {
  int c;
  const char ** v;
} lc_args_t;


/* create global arg table */
static void lc_createarg(lua_State * L, const lc_args_t * const args) {
  int i;
  lua_newtable(L);
  for (i=0; i < args->c; i++) {
    lua_pushstring(L, args->v[i]);
    lua_rawseti(L, -2, i);
  }
  lua_setglobal(L, "arg");
}


int lc_pmain_mod_ethereal_plantpack(lua_State * L) {
  luaL_openlibs(L);

  lua_pushcfunction(L, traceback);

  const int status1 = lc_handle_luainit(L);
  if (status1 != 0) return 0;

  /* note: IMPROVE: closure not always needed here */
  lua_newtable(L); /* closure table */
  lua_pushcclosure(L, lcf_main, 1);

  int status2 = lua_pcall(L, 0, 0, -2);
  if (status2 != 0) {
    const char * msg = lua_tostring(L,-1);
    if (msg == NULL) msg = "(error object is not a string)";
    fputs(msg, stderr);
  }
  return 0;
}


