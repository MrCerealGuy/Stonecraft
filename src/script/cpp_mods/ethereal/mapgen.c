/* WARNING: This file was automatically generated by lua2c. */

#ifdef __cplusplus
extern "C" {
#endif
#include <lua.h>
#include <lauxlib.h>
#include <lualib.h>
#ifdef __cplusplus
}
#endif
#include <stdio.h>
#include <stdlib.h>


#include <string.h>


#include <assert.h>

#include "cpp_mods/cpp_mods_init.h"

/* name: add_biome
 * function(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p) */
static int lcf1_add_biome (lua_State * L) {
  lua_checkstack(L,26);
  enum { lc_nformalargs = 16 };
  lua_settop(L,16);
  
  /* if p ~= 1 then */
  enum { lc1 = 16 };
  lua_pushnumber(L,1);
  const int lc2 = lua_equal(L,16,-1);
  lua_pop(L,1);
  lua_pushboolean(L,lc2);
  lua_pushboolean(L,!(lua_toboolean(L,-1)));
  lua_remove(L,-2);
  const int lc3 = lua_toboolean(L,-1);
  lua_pop(L,1);
  if (lc3) {
    
    /* return */
    return 0;
    assert(lua_gettop(L) == 16);
  }
  lua_settop(L,lc1);
  assert(lua_gettop(L) == 16);
  
  /* minetest.register_biome({
   * 		name = a,
   * 		node_dust = b,
   * 		node_top = c,
   * 		depth_top = d,
   * 		node_filler = e,
   * 		depth_filler = f,
   * 		node_stone = g,
   * 		node_water_top = h,
   * 		depth_water_top = i,
   * 		node_water = j,
   * 		node_river_water = k,
   * 		y_min = l,
   * 		y_max = m,
   * 		heat_point = n,
   * 		humidity_point = o,
   * 	}) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_biome");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,15);
  lua_pushliteral(L,"name");
  lua_pushvalue(L,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"node_dust");
  lua_pushvalue(L,2);
  lua_rawset(L,-3);
  lua_pushliteral(L,"node_top");
  lua_pushvalue(L,3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"depth_top");
  lua_pushvalue(L,4);
  lua_rawset(L,-3);
  lua_pushliteral(L,"node_filler");
  lua_pushvalue(L,5);
  lua_rawset(L,-3);
  lua_pushliteral(L,"depth_filler");
  lua_pushvalue(L,6);
  lua_rawset(L,-3);
  lua_pushliteral(L,"node_stone");
  lua_pushvalue(L,7);
  lua_rawset(L,-3);
  lua_pushliteral(L,"node_water_top");
  lua_pushvalue(L,8);
  lua_rawset(L,-3);
  lua_pushliteral(L,"depth_water_top");
  lua_pushvalue(L,9);
  lua_rawset(L,-3);
  lua_pushliteral(L,"node_water");
  lua_pushvalue(L,10);
  lua_rawset(L,-3);
  lua_pushliteral(L,"node_river_water");
  lua_pushvalue(L,11);
  lua_rawset(L,-3);
  lua_pushliteral(L,"y_min");
  lua_pushvalue(L,12);
  lua_rawset(L,-3);
  lua_pushliteral(L,"y_max");
  lua_pushvalue(L,13);
  lua_rawset(L,-3);
  lua_pushliteral(L,"heat_point");
  lua_pushvalue(L,14);
  lua_rawset(L,-3);
  lua_pushliteral(L,"humidity_point");
  lua_pushvalue(L,15);
  lua_rawset(L,-3);
  lua_call(L,1,0);
  assert(lua_gettop(L) == 16);
  return 0;
}


/* name: add_schem
 * function(a, b, c, d, e, f, g) */
static int lcf1_add_schem (lua_State * L) {
  enum { lc_nformalargs = 7 };
  lua_settop(L,7);
  
  /* if g ~= 1 then */
  enum { lc4 = 7 };
  lua_pushnumber(L,1);
  const int lc5 = lua_equal(L,7,-1);
  lua_pop(L,1);
  lua_pushboolean(L,lc5);
  lua_pushboolean(L,!(lua_toboolean(L,-1)));
  lua_remove(L,-2);
  const int lc6 = lua_toboolean(L,-1);
  lua_pop(L,1);
  if (lc6) {
    
    /* return */
    return 0;
    assert(lua_gettop(L) == 7);
  }
  lua_settop(L,lc4);
  assert(lua_gettop(L) == 7);
  
  /* minetest.register_decoration({
   * 		deco_type = "schematic",
   * 		place_on = a,
   * 		sidelen = 80,
   * 		fill_ratio = b,
   * 		biomes = c,
   * 		y_min = d,
   * 		y_max = e,
   * 		schematic = f,
   * 		flags = "place_center_x, place_center_z",
   * 	}) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_decoration");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,9);
  lua_pushliteral(L,"deco_type");
  lua_pushliteral(L,"schematic");
  lua_rawset(L,-3);
  lua_pushliteral(L,"place_on");
  lua_pushvalue(L,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"sidelen");
  lua_pushnumber(L,80);
  lua_rawset(L,-3);
  lua_pushliteral(L,"fill_ratio");
  lua_pushvalue(L,2);
  lua_rawset(L,-3);
  lua_pushliteral(L,"biomes");
  lua_pushvalue(L,3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"y_min");
  lua_pushvalue(L,4);
  lua_rawset(L,-3);
  lua_pushliteral(L,"y_max");
  lua_pushvalue(L,5);
  lua_rawset(L,-3);
  lua_pushliteral(L,"schematic");
  lua_pushvalue(L,6);
  lua_rawset(L,-3);
  lua_pushliteral(L,"flags");
  lua_pushliteral(L,"place_center_x, place_center_z");
  lua_rawset(L,-3);
  lua_call(L,1,0);
  assert(lua_gettop(L) == 7);
  return 0;
}


/* name: add_node
 * function(a, b, c, d, e, f, g, h, i, j) */
static int lcf1_add_node (lua_State * L) {
  lua_checkstack(L,20);
  enum { lc_nformalargs = 10 };
  lua_settop(L,10);
  
  /* if j ~= 1 then */
  enum { lc10 = 10 };
  lua_pushnumber(L,1);
  const int lc11 = lua_equal(L,10,-1);
  lua_pop(L,1);
  lua_pushboolean(L,lc11);
  lua_pushboolean(L,!(lua_toboolean(L,-1)));
  lua_remove(L,-2);
  const int lc12 = lua_toboolean(L,-1);
  lua_pop(L,1);
  if (lc12) {
    
    /* return */
    return 0;
    assert(lua_gettop(L) == 10);
  }
  lua_settop(L,lc10);
  assert(lua_gettop(L) == 10);
  
  /* minetest.register_decoration({
   * 		deco_type = "simple",
   * 		place_on = a,
   * 		sidelen = 80,
   * 		fill_ratio = b,
   * 		biomes = c,
   * 		y_min = d,
   * 		y_max = e,
   * 		decoration = f,
   * 		height_max = g,
   * 		spawn_by = h,
   * 		num_spawn_by = i,
   * 	}) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_decoration");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,11);
  lua_pushliteral(L,"deco_type");
  lua_pushliteral(L,"simple");
  lua_rawset(L,-3);
  lua_pushliteral(L,"place_on");
  lua_pushvalue(L,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"sidelen");
  lua_pushnumber(L,80);
  lua_rawset(L,-3);
  lua_pushliteral(L,"fill_ratio");
  lua_pushvalue(L,2);
  lua_rawset(L,-3);
  lua_pushliteral(L,"biomes");
  lua_pushvalue(L,3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"y_min");
  lua_pushvalue(L,4);
  lua_rawset(L,-3);
  lua_pushliteral(L,"y_max");
  lua_pushvalue(L,5);
  lua_rawset(L,-3);
  lua_pushliteral(L,"decoration");
  lua_pushvalue(L,6);
  lua_rawset(L,-3);
  lua_pushliteral(L,"height_max");
  lua_pushvalue(L,7);
  lua_rawset(L,-3);
  lua_pushliteral(L,"spawn_by");
  lua_pushvalue(L,8);
  lua_rawset(L,-3);
  lua_pushliteral(L,"num_spawn_by");
  lua_pushvalue(L,9);
  lua_rawset(L,-3);
  lua_call(L,1,0);
  assert(lua_gettop(L) == 10);
  return 0;
}


/* __add metamethod handler.
 * warning: assumes indices in range LUA_REGISTRYINDEX < x < 0 are relative. */
static void lc_add(lua_State * L, int idxa, int idxb) {
  if (lua_isnumber(L,idxa) && lua_isnumber(L,idxb)) {
    lua_pushnumber(L,lua_tonumber(L,idxa) + lua_tonumber(L,idxb));
  }
  else {
    if (luaL_getmetafield(L,idxa,"__add")||luaL_getmetafield(L,idxb,"__add")) {
      lua_pushvalue(L,idxa < 0 && idxa > LUA_REGISTRYINDEX ? idxa-1 : idxa);
      lua_pushvalue(L,idxb < 0 && idxb > LUA_REGISTRYINDEX ? idxb-2 : idxb);
      lua_call(L,2,1);
    }
    else {
      luaL_error(L, "attempt to perform arithmetic");
    }
  }
}


/* function(minp, maxp) */
static int lcf48 (lua_State * L) {
  enum { lc_nformalargs = 2 };
  lua_settop(L,2);
  
  /* if minp.y > -30 or maxp.y < -3000 then */
  enum { lc24 = 2 };
  lua_pushnumber(L,-30);
  lua_pushliteral(L,"y");
  lua_gettable(L,1);
  const int lc25 = lua_lessthan(L,-2,-1);
  lua_pop(L,2);
  lua_pushboolean(L,lc25);
  if (!(lua_toboolean(L,-1))) {
    lua_pop(L,1);
    lua_pushliteral(L,"y");
    lua_gettable(L,2);
    lua_pushnumber(L,-3000);
    const int lc26 = lua_lessthan(L,-2,-1);
    lua_pop(L,2);
    lua_pushboolean(L,lc26);
  }
  const int lc27 = lua_toboolean(L,-1);
  lua_pop(L,1);
  if (lc27) {
    
    /* return */
    return 0;
    assert(lua_gettop(L) == 2);
  }
  lua_settop(L,lc24);
  assert(lua_gettop(L) == 2);
  
  /* local bpos */
  lua_settop(L,(lua_gettop(L) + 1));
  assert(lua_gettop(L) == 3);
  
  /* local coal = minetest.find_nodes_in_area_under_air(minp, maxp, "default:stone_with_coal") */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"find_nodes_in_area_under_air");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_pushvalue(L,1);
  lua_pushvalue(L,2);
  lua_pushliteral(L,"default:stone_with_coal");
  lua_call(L,3,1);
  assert(lua_gettop(L) == 4);
  
  /* for n = 1, #coal do */
  lua_pushnumber(L,1);
  const double lc31 = lua_objlen(L,4);
  lua_pushnumber(L,lc31);
  if (!((lua_isnumber(L,-2) && lua_isnumber(L,-1)))) {
    luaL_error(L,"'for' limit must be a number");
  }
  double lc28_var = lua_tonumber(L,-2);
  const double lc29_limit = lua_tonumber(L,-1);
  const double lc30_step = 1;
  lua_pop(L,2);
  enum { lc32 = 4 };
  while ((((lc30_step > 0) && (lc28_var <= lc29_limit)) || ((lc30_step <= 0) && (lc28_var >= lc29_limit)))) {
    
    /* internal: local n at index 5 */
    lua_pushnumber(L,lc28_var);
    
    /* bpos = {x = coal[n].x, y = coal[n].y + 1, z = coal[n].z } */
    lua_createtable(L,0,3);
    lua_pushliteral(L,"x");
    lua_pushvalue(L,5);
    lua_gettable(L,4);
    lua_pushliteral(L,"x");
    lua_gettable(L,-2);
    lua_remove(L,-2);
    lua_rawset(L,-3);
    lua_pushliteral(L,"y");
    lua_pushvalue(L,5);
    lua_gettable(L,4);
    lua_pushliteral(L,"y");
    lua_gettable(L,-2);
    lua_remove(L,-2);
    lua_pushnumber(L,1);
    lc_add(L,-2,-1);
    lua_remove(L,-2);
    lua_remove(L,-2);
    lua_rawset(L,-3);
    lua_pushliteral(L,"z");
    lua_pushvalue(L,5);
    lua_gettable(L,4);
    lua_pushliteral(L,"z");
    lua_gettable(L,-2);
    lua_remove(L,-2);
    lua_rawset(L,-3);
    lua_replace(L,3);
    assert(lua_gettop(L) == 5);
    
    /* if math.random(1, 2) == 1 then */
    enum { lc33 = 5 };
    lua_getfield(L,LUA_ENVIRONINDEX,"math");
    lua_pushliteral(L,"random");
    lua_gettable(L,-2);
    lua_remove(L,-2);
    lua_pushnumber(L,1);
    lua_pushnumber(L,2);
    lua_call(L,2,1);
    lua_pushnumber(L,1);
    const int lc34 = lua_equal(L,-2,-1);
    lua_pop(L,2);
    lua_pushboolean(L,lc34);
    const int lc35 = lua_toboolean(L,-1);
    lua_pop(L,1);
    if (lc35) {
      
      /* if bpos.y > -3000 and bpos.y < -2000 then */
      enum { lc36 = 5 };
      lua_pushnumber(L,-3000);
      lua_pushliteral(L,"y");
      lua_gettable(L,3);
      const int lc37 = lua_lessthan(L,-2,-1);
      lua_pop(L,2);
      lua_pushboolean(L,lc37);
      if (lua_toboolean(L,-1)) {
        lua_pop(L,1);
        lua_pushliteral(L,"y");
        lua_gettable(L,3);
        lua_pushnumber(L,-2000);
        const int lc38 = lua_lessthan(L,-2,-1);
        lua_pop(L,2);
        lua_pushboolean(L,lc38);
      }
      const int lc39 = lua_toboolean(L,-1);
      lua_pop(L,1);
      if (lc39) {
        
        /* minetest.swap_node(bpos, {name = "ethereal:illumishroom3"}) */
        lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
        lua_pushliteral(L,"swap_node");
        lua_gettable(L,-2);
        lua_remove(L,-2);
        lua_pushvalue(L,3);
        lua_createtable(L,0,1);
        lua_pushliteral(L,"name");
        lua_pushliteral(L,"ethereal:illumishroom3");
        lua_rawset(L,-3);
        lua_call(L,2,0);
        assert(lua_gettop(L) == 5);
      }
      else {
        
        /* elseif bpos.y > -2000 and bpos.y < -1000 then */
        enum { lc40 = 5 };
        lua_pushnumber(L,-2000);
        lua_pushliteral(L,"y");
        lua_gettable(L,3);
        const int lc41 = lua_lessthan(L,-2,-1);
        lua_pop(L,2);
        lua_pushboolean(L,lc41);
        if (lua_toboolean(L,-1)) {
          lua_pop(L,1);
          lua_pushliteral(L,"y");
          lua_gettable(L,3);
          lua_pushnumber(L,-1000);
          const int lc42 = lua_lessthan(L,-2,-1);
          lua_pop(L,2);
          lua_pushboolean(L,lc42);
        }
        const int lc43 = lua_toboolean(L,-1);
        lua_pop(L,1);
        if (lc43) {
          
          /* minetest.swap_node(bpos, {name = "ethereal:illumishroom2"}) */
          lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
          lua_pushliteral(L,"swap_node");
          lua_gettable(L,-2);
          lua_remove(L,-2);
          lua_pushvalue(L,3);
          lua_createtable(L,0,1);
          lua_pushliteral(L,"name");
          lua_pushliteral(L,"ethereal:illumishroom2");
          lua_rawset(L,-3);
          lua_call(L,2,0);
          assert(lua_gettop(L) == 5);
        }
        else {
          
          /* elseif bpos.y > -1000 and bpos.y < -30 then */
          enum { lc44 = 5 };
          lua_pushnumber(L,-1000);
          lua_pushliteral(L,"y");
          lua_gettable(L,3);
          const int lc45 = lua_lessthan(L,-2,-1);
          lua_pop(L,2);
          lua_pushboolean(L,lc45);
          if (lua_toboolean(L,-1)) {
            lua_pop(L,1);
            lua_pushliteral(L,"y");
            lua_gettable(L,3);
            lua_pushnumber(L,-30);
            const int lc46 = lua_lessthan(L,-2,-1);
            lua_pop(L,2);
            lua_pushboolean(L,lc46);
          }
          const int lc47 = lua_toboolean(L,-1);
          lua_pop(L,1);
          if (lc47) {
            
            /* minetest.swap_node(bpos, {name = "ethereal:illumishroom"}) */
            lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
            lua_pushliteral(L,"swap_node");
            lua_gettable(L,-2);
            lua_remove(L,-2);
            lua_pushvalue(L,3);
            lua_createtable(L,0,1);
            lua_pushliteral(L,"name");
            lua_pushliteral(L,"ethereal:illumishroom");
            lua_rawset(L,-3);
            lua_call(L,2,0);
            assert(lua_gettop(L) == 5);
          }
          lua_settop(L,lc44);
        }
        lua_settop(L,lc40);
      }
      lua_settop(L,lc36);
      assert(lua_gettop(L) == 5);
    }
    lua_settop(L,lc33);
    assert(lua_gettop(L) == 5);
    
    /* internal: stack cleanup on scope exit */
    lua_pop(L,1);
    lc28_var += lc30_step;
  }
  lua_settop(L,lc32);
  assert(lua_gettop(L) == 4);
  return 0;
}


/* name: (main)
 * function(...) */
static int lcf_main (lua_State * L) {
  lua_checkstack(L,22);
  enum { lc_nformalargs = 0 };
  const int lc_nactualargs = lua_gettop(L);
  const int lc_nextra = (lc_nactualargs - lc_nformalargs);
  
  /* -- clear default mapgen biomes, decorations and ores
   * minetest.clear_registered_biomes() */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"clear_registered_biomes");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,0,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.clear_registered_decorations() */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"clear_registered_decorations");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,0,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* --minetest.clear_registered_ores()
   * local path = minetest.get_modpath("ethereal") */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"get_modpath");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_pushliteral(L,"ethereal");
  lua_call(L,1,1);
  assert(lua_gettop(L) - lc_nextra == 1);
  
  /* dofile(path .. "/ores.lua") */
  lc_pmain_mod_ethereal_ores(L);
  /* lua_getfield(L,LUA_ENVIRONINDEX,"dofile");
  lua_pushvalue(L,(1 + lc_nextra));
  lua_pushliteral(L,"/ores.lua");
  lua_concat(L,2);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 1); */
  
  /* path = path .. "/schematics/" */
  lua_pushvalue(L,(1 + lc_nextra));
  lua_pushliteral(L,"/schematics/");
  lua_concat(L,2);
  lua_replace(L,(1 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 1);
  
  /* local dpath = minetest.get_modpath("default") .. "/schematics/" */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"get_modpath");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_pushliteral(L,"default");
  lua_call(L,1,1);
  lua_pushliteral(L,"/schematics/");
  lua_concat(L,2);
  assert(lua_gettop(L) - lc_nextra == 2);
  
  /* -- tree schematics
   * dofile(path .. "orange_tree.lua") */
  lc_pmain_mod_ethereal_orange_tree(L);
  /* lua_getfield(L,LUA_ENVIRONINDEX,"dofile");
  lua_pushvalue(L,(1 + lc_nextra));
  lua_pushliteral(L,"orange_tree.lua");
  lua_concat(L,2);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 2); */
  
  /* dofile(path .. "banana_tree.lua") */
  lc_pmain_mod_ethereal_banana_tree(L);
  /* lua_getfield(L,LUA_ENVIRONINDEX,"dofile");
  lua_pushvalue(L,(1 + lc_nextra));
  lua_pushliteral(L,"banana_tree.lua");
  lua_concat(L,2);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 2); */
  
  /* dofile(path .. "bamboo_tree.lua") */
  lc_pmain_mod_ethereal_bamboo_tree(L);
  /* lua_getfield(L,LUA_ENVIRONINDEX,"dofile");
  lua_pushvalue(L,(1 + lc_nextra));
  lua_pushliteral(L,"bamboo_tree.lua");
  lua_concat(L,2);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 2); */
  
  /* dofile(path .. "birch_tree.lua") */
  lc_pmain_mod_ethereal_birch_tree(L);
  /* lua_getfield(L,LUA_ENVIRONINDEX,"dofile");
  lua_pushvalue(L,(1 + lc_nextra));
  lua_pushliteral(L,"birch_tree.lua");
  lua_concat(L,2);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 2); */
  
  /* dofile(path .. "bush.lua") */
  lc_pmain_mod_ethereal_bush(L);
  /* lua_getfield(L,LUA_ENVIRONINDEX,"dofile");
  lua_pushvalue(L,(1 + lc_nextra));
  lua_pushliteral(L,"bush.lua");
  lua_concat(L,2);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 2); */
  
  /* dofile(path .. "waterlily.lua") */
  lc_pmain_mod_ethereal_waterlily(L);
  /* lua_getfield(L,LUA_ENVIRONINDEX,"dofile");
  lua_pushvalue(L,(1 + lc_nextra));
  lua_pushliteral(L,"waterlily.lua");
  lua_concat(L,2);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 2); */
  
  /* --= Biomes (Minetest 0.4.13 and above)
   * local add_biome = function(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p)
   * 
   * 	if p ~= 1 then return end
   * 
   * 	minetest.register_biome({
   * 		name = a,
   * 		node_dust = b,
   * 		node_top = c,
   * 		depth_top = d,
   * 		node_filler = e,
   * 		depth_filler = f,
   * 		node_stone = g,
   * 		node_water_top = h,
   * 		depth_water_top = i,
   * 		node_water = j,
   * 		node_river_water = k,
   * 		y_min = l,
   * 		y_max = m,
   * 		heat_point = n,
   * 		humidity_point = o,
   * 	})
   * end */
  lua_pushcfunction(L,lcf1_add_biome);
  assert(lua_gettop(L) - lc_nextra == 3);
  
  /* add_biome("underground", nil, nil, nil, nil, nil, nil, nil, nil, nil, nil,
   * 	-31000, -192, 50, 50, 1) */
  lua_pushvalue(L,(3 + lc_nextra));
  lua_pushliteral(L,"underground");
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnumber(L,-31000);
  lua_pushnumber(L,-192);
  lua_pushnumber(L,50);
  lua_pushnumber(L,50);
  lua_pushnumber(L,1);
  lua_call(L,16,0);
  assert(lua_gettop(L) - lc_nextra == 3);
  
  /* add_biome("mountain", nil, "default:snow", 1, "default:snowblock", 2,
   * 	nil, nil, nil, nil, nil, 140, 31000, 50, 50, 1) */
  lua_pushvalue(L,(3 + lc_nextra));
  lua_pushliteral(L,"mountain");
  lua_pushnil(L);
  lua_pushliteral(L,"default:snow");
  lua_pushnumber(L,1);
  lua_pushliteral(L,"default:snowblock");
  lua_pushnumber(L,2);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnumber(L,140);
  lua_pushnumber(L,31000);
  lua_pushnumber(L,50);
  lua_pushnumber(L,50);
  lua_pushnumber(L,1);
  lua_call(L,16,0);
  assert(lua_gettop(L) - lc_nextra == 3);
  
  /* add_biome("desert", nil, "default:desert_sand", 1, "default:desert_sand", 3,
   * 	"default:desert_stone", nil, nil, nil, nil, 3, 23, 35, 20, ethereal.desert) */
  lua_pushvalue(L,(3 + lc_nextra));
  lua_pushliteral(L,"desert");
  lua_pushnil(L);
  lua_pushliteral(L,"default:desert_sand");
  lua_pushnumber(L,1);
  lua_pushliteral(L,"default:desert_sand");
  lua_pushnumber(L,3);
  lua_pushliteral(L,"default:desert_stone");
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnumber(L,3);
  lua_pushnumber(L,23);
  lua_pushnumber(L,35);
  lua_pushnumber(L,20);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"desert");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,16,0);
  assert(lua_gettop(L) - lc_nextra == 3);
  
  /* add_biome("desert_ocean", nil, "default:sand", 1, "default:sand", 2,
   * 	"default:desert_stone", nil, nil, nil, nil, -192, 3, 35, 20, ethereal.desert) */
  lua_pushvalue(L,(3 + lc_nextra));
  lua_pushliteral(L,"desert_ocean");
  lua_pushnil(L);
  lua_pushliteral(L,"default:sand");
  lua_pushnumber(L,1);
  lua_pushliteral(L,"default:sand");
  lua_pushnumber(L,2);
  lua_pushliteral(L,"default:desert_stone");
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnumber(L,-192);
  lua_pushnumber(L,3);
  lua_pushnumber(L,35);
  lua_pushnumber(L,20);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"desert");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,16,0);
  assert(lua_gettop(L) - lc_nextra == 3);
  
  /* add_biome("glacier", "default:snowblock", "default:snowblock", 1,
   * 	"default:snowblock", 3, "default:ice", "default:ice", 10, -8, 31000, 0, 50, ethereal.glacier) */
  lua_pushvalue(L,(3 + lc_nextra));
  lua_pushliteral(L,"glacier");
  lua_pushliteral(L,"default:snowblock");
  lua_pushliteral(L,"default:snowblock");
  lua_pushnumber(L,1);
  lua_pushliteral(L,"default:snowblock");
  lua_pushnumber(L,3);
  lua_pushliteral(L,"default:ice");
  lua_pushliteral(L,"default:ice");
  lua_pushnumber(L,10);
  lua_pushnumber(L,-8);
  lua_pushnumber(L,31000);
  lua_pushnumber(L,0);
  lua_pushnumber(L,50);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"glacier");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,14,0);
  assert(lua_gettop(L) - lc_nextra == 3);
  
  /* add_biome("glacier_ocean", "default:snowblock", "default:sand", 1, "default:sand", 3,
   * 	nil, nil, nil, nil, nil, -112, -9, 0, 50, ethereal.glacier) */
  lua_pushvalue(L,(3 + lc_nextra));
  lua_pushliteral(L,"glacier_ocean");
  lua_pushliteral(L,"default:snowblock");
  lua_pushliteral(L,"default:sand");
  lua_pushnumber(L,1);
  lua_pushliteral(L,"default:sand");
  lua_pushnumber(L,3);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnumber(L,-112);
  lua_pushnumber(L,-9);
  lua_pushnumber(L,0);
  lua_pushnumber(L,50);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"glacier");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,16,0);
  assert(lua_gettop(L) - lc_nextra == 3);
  
  /* add_biome("clearing", nil, "ethereal:green_dirt", 1, "default:dirt", 3,
   * 	nil, nil, nil, nil, nil, 3, 71, 45, 65, 1) */
  lua_pushvalue(L,(3 + lc_nextra));
  lua_pushliteral(L,"clearing");
  lua_pushnil(L);
  lua_pushliteral(L,"ethereal:green_dirt");
  lua_pushnumber(L,1);
  lua_pushliteral(L,"default:dirt");
  lua_pushnumber(L,3);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnumber(L,3);
  lua_pushnumber(L,71);
  lua_pushnumber(L,45);
  lua_pushnumber(L,65);
  lua_pushnumber(L,1);
  lua_call(L,16,0);
  assert(lua_gettop(L) - lc_nextra == 3);
  
  /* -- ADDED
   * add_biome("bamboo", nil, "ethereal:bamboo_dirt", 1, "default:dirt", 3,
   * 	nil, nil, nil, nil, nil, 3, 71, 45, 75, ethereal.bamboo) */
  lua_pushvalue(L,(3 + lc_nextra));
  lua_pushliteral(L,"bamboo");
  lua_pushnil(L);
  lua_pushliteral(L,"ethereal:bamboo_dirt");
  lua_pushnumber(L,1);
  lua_pushliteral(L,"default:dirt");
  lua_pushnumber(L,3);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnumber(L,3);
  lua_pushnumber(L,71);
  lua_pushnumber(L,45);
  lua_pushnumber(L,75);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"bamboo");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,16,0);
  assert(lua_gettop(L) - lc_nextra == 3);
  
  /* add_biome("bamboo_ocean", nil, "default:sand", 1, "default:sand", 2,
   * 	nil, nil, nil, nil, nil, -192, 2, 45, 75, ethereal.bamboo) */
  lua_pushvalue(L,(3 + lc_nextra));
  lua_pushliteral(L,"bamboo_ocean");
  lua_pushnil(L);
  lua_pushliteral(L,"default:sand");
  lua_pushnumber(L,1);
  lua_pushliteral(L,"default:sand");
  lua_pushnumber(L,2);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnumber(L,-192);
  lua_pushnumber(L,2);
  lua_pushnumber(L,45);
  lua_pushnumber(L,75);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"bamboo");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,16,0);
  assert(lua_gettop(L) - lc_nextra == 3);
  
  /* add_biome("mesa", nil, "bakedclay:orange", 1, "bakedclay:orange", 15,
   * 	nil, nil, nil, nil, nil, 1, 71, 25, 28, ethereal.mesa) */
  lua_pushvalue(L,(3 + lc_nextra));
  lua_pushliteral(L,"mesa");
  lua_pushnil(L);
  lua_pushliteral(L,"bakedclay:orange");
  lua_pushnumber(L,1);
  lua_pushliteral(L,"bakedclay:orange");
  lua_pushnumber(L,15);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnumber(L,1);
  lua_pushnumber(L,71);
  lua_pushnumber(L,25);
  lua_pushnumber(L,28);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"mesa");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,16,0);
  assert(lua_gettop(L) - lc_nextra == 3);
  
  /* add_biome("mesa_ocean", nil, "default:sand", 1, "default:sand", 2,
   * 	nil, nil, nil, nil, nil, -192, 1, 25, 28, ethereal.mesa) */
  lua_pushvalue(L,(3 + lc_nextra));
  lua_pushliteral(L,"mesa_ocean");
  lua_pushnil(L);
  lua_pushliteral(L,"default:sand");
  lua_pushnumber(L,1);
  lua_pushliteral(L,"default:sand");
  lua_pushnumber(L,2);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnumber(L,-192);
  lua_pushnumber(L,1);
  lua_pushnumber(L,25);
  lua_pushnumber(L,28);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"mesa");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,16,0);
  assert(lua_gettop(L) - lc_nextra == 3);
  
  /* add_biome("alpine", nil, "default:dirt_with_snow", 1, "default:dirt", 2,
   * 	nil, nil, nil, nil, nil, 40, 140, 10, 40, ethereal.alpine) */
  lua_pushvalue(L,(3 + lc_nextra));
  lua_pushliteral(L,"alpine");
  lua_pushnil(L);
  lua_pushliteral(L,"default:dirt_with_snow");
  lua_pushnumber(L,1);
  lua_pushliteral(L,"default:dirt");
  lua_pushnumber(L,2);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnumber(L,40);
  lua_pushnumber(L,140);
  lua_pushnumber(L,10);
  lua_pushnumber(L,40);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"alpine");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,16,0);
  assert(lua_gettop(L) - lc_nextra == 3);
  
  /* add_biome("snowy", nil, "ethereal:cold_dirt", 1, "default:dirt", 2,
   * 	nil, nil, nil, nil, nil, 4, 40, 10, 40, ethereal.snowy) */
  lua_pushvalue(L,(3 + lc_nextra));
  lua_pushliteral(L,"snowy");
  lua_pushnil(L);
  lua_pushliteral(L,"ethereal:cold_dirt");
  lua_pushnumber(L,1);
  lua_pushliteral(L,"default:dirt");
  lua_pushnumber(L,2);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnumber(L,4);
  lua_pushnumber(L,40);
  lua_pushnumber(L,10);
  lua_pushnumber(L,40);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"snowy");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,16,0);
  assert(lua_gettop(L) - lc_nextra == 3);
  
  /* add_biome("frost", nil, "ethereal:crystal_dirt", 1, "default:dirt", 3,
   * 	nil, nil, nil, nil, nil, 1, 71, 10, 40, ethereal.frost) */
  lua_pushvalue(L,(3 + lc_nextra));
  lua_pushliteral(L,"frost");
  lua_pushnil(L);
  lua_pushliteral(L,"ethereal:crystal_dirt");
  lua_pushnumber(L,1);
  lua_pushliteral(L,"default:dirt");
  lua_pushnumber(L,3);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnumber(L,1);
  lua_pushnumber(L,71);
  lua_pushnumber(L,10);
  lua_pushnumber(L,40);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"frost");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,16,0);
  assert(lua_gettop(L) - lc_nextra == 3);
  
  /* add_biome("frost_ocean", nil, "default:sand", 1, "default:sand", 2,
   * 	nil, nil, nil, nil, nil, -192, 1, 10, 40, ethereal.frost) */
  lua_pushvalue(L,(3 + lc_nextra));
  lua_pushliteral(L,"frost_ocean");
  lua_pushnil(L);
  lua_pushliteral(L,"default:sand");
  lua_pushnumber(L,1);
  lua_pushliteral(L,"default:sand");
  lua_pushnumber(L,2);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnumber(L,-192);
  lua_pushnumber(L,1);
  lua_pushnumber(L,10);
  lua_pushnumber(L,40);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"frost");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,16,0);
  assert(lua_gettop(L) - lc_nextra == 3);
  
  /* add_biome("grassy", nil, "ethereal:green_dirt", 1, "default:dirt", 3,
   * 	nil, nil, nil, nil, nil, 3, 91, 13, 40, ethereal.grassy) */
  lua_pushvalue(L,(3 + lc_nextra));
  lua_pushliteral(L,"grassy");
  lua_pushnil(L);
  lua_pushliteral(L,"ethereal:green_dirt");
  lua_pushnumber(L,1);
  lua_pushliteral(L,"default:dirt");
  lua_pushnumber(L,3);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnumber(L,3);
  lua_pushnumber(L,91);
  lua_pushnumber(L,13);
  lua_pushnumber(L,40);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"grassy");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,16,0);
  assert(lua_gettop(L) - lc_nextra == 3);
  
  /* add_biome("grassy_ocean", nil, "defaut:sand", 2, "default:gravel", 1,
   * 	nil, nil, nil, nil, nil, -31000, 3, 13, 40, ethereal.grassy) */
  lua_pushvalue(L,(3 + lc_nextra));
  lua_pushliteral(L,"grassy_ocean");
  lua_pushnil(L);
  lua_pushliteral(L,"defaut:sand");
  lua_pushnumber(L,2);
  lua_pushliteral(L,"default:gravel");
  lua_pushnumber(L,1);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnumber(L,-31000);
  lua_pushnumber(L,3);
  lua_pushnumber(L,13);
  lua_pushnumber(L,40);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"grassy");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,16,0);
  assert(lua_gettop(L) - lc_nextra == 3);
  
  /* add_biome("caves", nil, "default:desert_stone", 3, "air", 8,
   * 	nil, nil, nil, nil, nil, 4, 41, 15, 25, ethereal.caves) */
  lua_pushvalue(L,(3 + lc_nextra));
  lua_pushliteral(L,"caves");
  lua_pushnil(L);
  lua_pushliteral(L,"default:desert_stone");
  lua_pushnumber(L,3);
  lua_pushliteral(L,"air");
  lua_pushnumber(L,8);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnumber(L,4);
  lua_pushnumber(L,41);
  lua_pushnumber(L,15);
  lua_pushnumber(L,25);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"caves");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,16,0);
  assert(lua_gettop(L) - lc_nextra == 3);
  
  /* add_biome("grayness", nil, "ethereal:gray_dirt", 1, "default:dirt", 3,
   * 	nil, nil, nil, nil, nil, 2, 41, 15, 30, ethereal.grayness) */
  lua_pushvalue(L,(3 + lc_nextra));
  lua_pushliteral(L,"grayness");
  lua_pushnil(L);
  lua_pushliteral(L,"ethereal:gray_dirt");
  lua_pushnumber(L,1);
  lua_pushliteral(L,"default:dirt");
  lua_pushnumber(L,3);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnumber(L,2);
  lua_pushnumber(L,41);
  lua_pushnumber(L,15);
  lua_pushnumber(L,30);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"grayness");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,16,0);
  assert(lua_gettop(L) - lc_nextra == 3);
  
  /* add_biome("grayness_ocean", nil, "default:sand", 1, "default:sand", 2,
   * 	nil, nil, nil, nil, nil, -192, 1, 15, 30, ethereal.grayness) */
  lua_pushvalue(L,(3 + lc_nextra));
  lua_pushliteral(L,"grayness_ocean");
  lua_pushnil(L);
  lua_pushliteral(L,"default:sand");
  lua_pushnumber(L,1);
  lua_pushliteral(L,"default:sand");
  lua_pushnumber(L,2);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnumber(L,-192);
  lua_pushnumber(L,1);
  lua_pushnumber(L,15);
  lua_pushnumber(L,30);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"grayness");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,16,0);
  assert(lua_gettop(L) - lc_nextra == 3);
  
  /* add_biome("grassytwo", nil, "ethereal:green_dirt", 1, "default:dirt", 3,
   * 	nil, nil, nil, nil, nil, 1, 91, 15, 40, ethereal.grassytwo) */
  lua_pushvalue(L,(3 + lc_nextra));
  lua_pushliteral(L,"grassytwo");
  lua_pushnil(L);
  lua_pushliteral(L,"ethereal:green_dirt");
  lua_pushnumber(L,1);
  lua_pushliteral(L,"default:dirt");
  lua_pushnumber(L,3);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnumber(L,1);
  lua_pushnumber(L,91);
  lua_pushnumber(L,15);
  lua_pushnumber(L,40);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"grassytwo");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,16,0);
  assert(lua_gettop(L) - lc_nextra == 3);
  
  /* add_biome("grassytwo_ocean", nil, "default:sand", 1, "default:sand", 2,
   * 	nil, nil, nil, nil, nil, -192, 1, 15, 40, ethereal.grassytwo) */
  lua_pushvalue(L,(3 + lc_nextra));
  lua_pushliteral(L,"grassytwo_ocean");
  lua_pushnil(L);
  lua_pushliteral(L,"default:sand");
  lua_pushnumber(L,1);
  lua_pushliteral(L,"default:sand");
  lua_pushnumber(L,2);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnumber(L,-192);
  lua_pushnumber(L,1);
  lua_pushnumber(L,15);
  lua_pushnumber(L,40);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"grassytwo");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,16,0);
  assert(lua_gettop(L) - lc_nextra == 3);
  
  /* add_biome("prairie", nil, "ethereal:prairie_dirt", 1, "default:dirt", 3,
   * 	nil, nil, nil, nil, nil, 3, 26, 20, 40, ethereal.prairie) */
  lua_pushvalue(L,(3 + lc_nextra));
  lua_pushliteral(L,"prairie");
  lua_pushnil(L);
  lua_pushliteral(L,"ethereal:prairie_dirt");
  lua_pushnumber(L,1);
  lua_pushliteral(L,"default:dirt");
  lua_pushnumber(L,3);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnumber(L,3);
  lua_pushnumber(L,26);
  lua_pushnumber(L,20);
  lua_pushnumber(L,40);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"prairie");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,16,0);
  assert(lua_gettop(L) - lc_nextra == 3);
  
  /* add_biome("prairie_ocean", nil, "default:sand", 1, "default:sand", 2,
   * 	nil, nil, nil, nil, nil, -192, 1, 20, 40, ethereal.prairie) */
  lua_pushvalue(L,(3 + lc_nextra));
  lua_pushliteral(L,"prairie_ocean");
  lua_pushnil(L);
  lua_pushliteral(L,"default:sand");
  lua_pushnumber(L,1);
  lua_pushliteral(L,"default:sand");
  lua_pushnumber(L,2);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnumber(L,-192);
  lua_pushnumber(L,1);
  lua_pushnumber(L,20);
  lua_pushnumber(L,40);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"prairie");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,16,0);
  assert(lua_gettop(L) - lc_nextra == 3);
  
  /* add_biome("jumble", nil, "ethereal:green_dirt", 1, "default:dirt", 3,
   * 	nil, nil, nil, nil, nil, 1, 71, 25, 50, ethereal.jumble) */
  lua_pushvalue(L,(3 + lc_nextra));
  lua_pushliteral(L,"jumble");
  lua_pushnil(L);
  lua_pushliteral(L,"ethereal:green_dirt");
  lua_pushnumber(L,1);
  lua_pushliteral(L,"default:dirt");
  lua_pushnumber(L,3);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnumber(L,1);
  lua_pushnumber(L,71);
  lua_pushnumber(L,25);
  lua_pushnumber(L,50);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"jumble");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,16,0);
  assert(lua_gettop(L) - lc_nextra == 3);
  
  /* add_biome("jumble_ocean", nil, "default:sand", 1, "default:sand", 2,
   * 	nil, nil, nil, nil, nil, -192, 1, 25, 50, ethereal.jumble) */
  lua_pushvalue(L,(3 + lc_nextra));
  lua_pushliteral(L,"jumble_ocean");
  lua_pushnil(L);
  lua_pushliteral(L,"default:sand");
  lua_pushnumber(L,1);
  lua_pushliteral(L,"default:sand");
  lua_pushnumber(L,2);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnumber(L,-192);
  lua_pushnumber(L,1);
  lua_pushnumber(L,25);
  lua_pushnumber(L,50);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"jumble");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,16,0);
  assert(lua_gettop(L) - lc_nextra == 3);
  
  /* add_biome("junglee", nil, "ethereal:jungle_dirt", 1, "default:dirt", 3,
   * 	nil, nil, nil, nil, nil, 1, 71, 30, 60, ethereal.junglee) */
  lua_pushvalue(L,(3 + lc_nextra));
  lua_pushliteral(L,"junglee");
  lua_pushnil(L);
  lua_pushliteral(L,"ethereal:jungle_dirt");
  lua_pushnumber(L,1);
  lua_pushliteral(L,"default:dirt");
  lua_pushnumber(L,3);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnumber(L,1);
  lua_pushnumber(L,71);
  lua_pushnumber(L,30);
  lua_pushnumber(L,60);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"junglee");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,16,0);
  assert(lua_gettop(L) - lc_nextra == 3);
  
  /* add_biome("junglee_ocean", nil, "default:sand", 1, "default:sand", 2,
   * 	nil, nil, nil, nil, nil, -192, 1, 30, 60, ethereal.junglee) */
  lua_pushvalue(L,(3 + lc_nextra));
  lua_pushliteral(L,"junglee_ocean");
  lua_pushnil(L);
  lua_pushliteral(L,"default:sand");
  lua_pushnumber(L,1);
  lua_pushliteral(L,"default:sand");
  lua_pushnumber(L,2);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnumber(L,-192);
  lua_pushnumber(L,1);
  lua_pushnumber(L,30);
  lua_pushnumber(L,60);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"junglee");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,16,0);
  assert(lua_gettop(L) - lc_nextra == 3);
  
  /* add_biome("grove", nil, "ethereal:grove_dirt", 1, "default:dirt", 3,
   * 	nil, nil, nil, nil, nil, 3, 23, 45, 35, ethereal.grove) */
  lua_pushvalue(L,(3 + lc_nextra));
  lua_pushliteral(L,"grove");
  lua_pushnil(L);
  lua_pushliteral(L,"ethereal:grove_dirt");
  lua_pushnumber(L,1);
  lua_pushliteral(L,"default:dirt");
  lua_pushnumber(L,3);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnumber(L,3);
  lua_pushnumber(L,23);
  lua_pushnumber(L,45);
  lua_pushnumber(L,35);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"grove");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,16,0);
  assert(lua_gettop(L) - lc_nextra == 3);
  
  /* add_biome("grove_ocean", nil, "default:sand", 1, "default:sand", 2,
   * 	nil, nil, nil, nil, nil, -192, 2, 45, 35, ethereal.grove) */
  lua_pushvalue(L,(3 + lc_nextra));
  lua_pushliteral(L,"grove_ocean");
  lua_pushnil(L);
  lua_pushliteral(L,"default:sand");
  lua_pushnumber(L,1);
  lua_pushliteral(L,"default:sand");
  lua_pushnumber(L,2);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnumber(L,-192);
  lua_pushnumber(L,2);
  lua_pushnumber(L,45);
  lua_pushnumber(L,35);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"grove");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,16,0);
  assert(lua_gettop(L) - lc_nextra == 3);
  
  /* add_biome("mushroom", nil, "ethereal:mushroom_dirt", 1, "default:dirt", 3,
   * 	nil, nil, nil, nil, nil, 3, 50, 45, 55, ethereal.mushroom) */
  lua_pushvalue(L,(3 + lc_nextra));
  lua_pushliteral(L,"mushroom");
  lua_pushnil(L);
  lua_pushliteral(L,"ethereal:mushroom_dirt");
  lua_pushnumber(L,1);
  lua_pushliteral(L,"default:dirt");
  lua_pushnumber(L,3);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnumber(L,3);
  lua_pushnumber(L,50);
  lua_pushnumber(L,45);
  lua_pushnumber(L,55);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"mushroom");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,16,0);
  assert(lua_gettop(L) - lc_nextra == 3);
  
  /* add_biome("mushroom_ocean", nil, "default:sand", 1, "default:sand", 2,
   * 	nil, nil, nil, nil, nil, -192, 2, 45, 55, ethereal.mushroom) */
  lua_pushvalue(L,(3 + lc_nextra));
  lua_pushliteral(L,"mushroom_ocean");
  lua_pushnil(L);
  lua_pushliteral(L,"default:sand");
  lua_pushnumber(L,1);
  lua_pushliteral(L,"default:sand");
  lua_pushnumber(L,2);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnumber(L,-192);
  lua_pushnumber(L,2);
  lua_pushnumber(L,45);
  lua_pushnumber(L,55);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"mushroom");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,16,0);
  assert(lua_gettop(L) - lc_nextra == 3);
  
  /* add_biome("sandstone", nil, "default:sandstone", 1, "default:sandstone", 1,
   * 	"default:sandstone", nil, nil, nil, nil, 3, 23, 50, 20, ethereal.sandstone) */
  lua_pushvalue(L,(3 + lc_nextra));
  lua_pushliteral(L,"sandstone");
  lua_pushnil(L);
  lua_pushliteral(L,"default:sandstone");
  lua_pushnumber(L,1);
  lua_pushliteral(L,"default:sandstone");
  lua_pushnumber(L,1);
  lua_pushliteral(L,"default:sandstone");
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnumber(L,3);
  lua_pushnumber(L,23);
  lua_pushnumber(L,50);
  lua_pushnumber(L,20);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"sandstone");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,16,0);
  assert(lua_gettop(L) - lc_nextra == 3);
  
  /* add_biome("sandstone_ocean", nil, "default:sand", 1, "default:sand", 2,
   * 	nil, nil, nil, nil, nil, -192, 2, 50, 20, ethereal.sandstone) */
  lua_pushvalue(L,(3 + lc_nextra));
  lua_pushliteral(L,"sandstone_ocean");
  lua_pushnil(L);
  lua_pushliteral(L,"default:sand");
  lua_pushnumber(L,1);
  lua_pushliteral(L,"default:sand");
  lua_pushnumber(L,2);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnumber(L,-192);
  lua_pushnumber(L,2);
  lua_pushnumber(L,50);
  lua_pushnumber(L,20);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"sandstone");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,16,0);
  assert(lua_gettop(L) - lc_nextra == 3);
  
  /* add_biome("quicksand", nil, "ethereal:quicksand2", 3, "default:gravel", 1,
   * 	nil, nil, nil, nil, nil, 1, 1, 50, 38, ethereal.quicksand) */
  lua_pushvalue(L,(3 + lc_nextra));
  lua_pushliteral(L,"quicksand");
  lua_pushnil(L);
  lua_pushliteral(L,"ethereal:quicksand2");
  lua_pushnumber(L,3);
  lua_pushliteral(L,"default:gravel");
  lua_pushnumber(L,1);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnumber(L,1);
  lua_pushnumber(L,1);
  lua_pushnumber(L,50);
  lua_pushnumber(L,38);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"quicksand");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,16,0);
  assert(lua_gettop(L) - lc_nextra == 3);
  
  /* add_biome("plains", nil, "ethereal:dry_dirt", 1, "default:dirt", 3,
   * 	nil, nil, nil, nil, nil, 3, 25, 65, 25, ethereal.plains) */
  lua_pushvalue(L,(3 + lc_nextra));
  lua_pushliteral(L,"plains");
  lua_pushnil(L);
  lua_pushliteral(L,"ethereal:dry_dirt");
  lua_pushnumber(L,1);
  lua_pushliteral(L,"default:dirt");
  lua_pushnumber(L,3);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnumber(L,3);
  lua_pushnumber(L,25);
  lua_pushnumber(L,65);
  lua_pushnumber(L,25);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"plains");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,16,0);
  assert(lua_gettop(L) - lc_nextra == 3);
  
  /* add_biome("plains_ocean", nil, "default:sand", 1, "default:sand", 2,
   * 	nil, nil, nil, nil, nil, -192, 2, 55, 25, ethereal.plains) */
  lua_pushvalue(L,(3 + lc_nextra));
  lua_pushliteral(L,"plains_ocean");
  lua_pushnil(L);
  lua_pushliteral(L,"default:sand");
  lua_pushnumber(L,1);
  lua_pushliteral(L,"default:sand");
  lua_pushnumber(L,2);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnumber(L,-192);
  lua_pushnumber(L,2);
  lua_pushnumber(L,55);
  lua_pushnumber(L,25);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"plains");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,16,0);
  assert(lua_gettop(L) - lc_nextra == 3);
  
  /* add_biome("savannah", nil, "default:dirt_with_dry_grass", 1, "default:dirt", 3,
   * 	nil, nil, nil, nil, nil, 3, 50, 55, 25, ethereal.savannah) */
  lua_pushvalue(L,(3 + lc_nextra));
  lua_pushliteral(L,"savannah");
  lua_pushnil(L);
  lua_pushliteral(L,"default:dirt_with_dry_grass");
  lua_pushnumber(L,1);
  lua_pushliteral(L,"default:dirt");
  lua_pushnumber(L,3);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnumber(L,3);
  lua_pushnumber(L,50);
  lua_pushnumber(L,55);
  lua_pushnumber(L,25);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"savannah");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,16,0);
  assert(lua_gettop(L) - lc_nextra == 3);
  
  /* add_biome("savannah_ocean", nil, "default:sand", 1, "default:sand", 2,
   * 	nil, nil, nil, nil, nil, -192, 1, 55, 25, ethereal.savannah) */
  lua_pushvalue(L,(3 + lc_nextra));
  lua_pushliteral(L,"savannah_ocean");
  lua_pushnil(L);
  lua_pushliteral(L,"default:sand");
  lua_pushnumber(L,1);
  lua_pushliteral(L,"default:sand");
  lua_pushnumber(L,2);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnumber(L,-192);
  lua_pushnumber(L,1);
  lua_pushnumber(L,55);
  lua_pushnumber(L,25);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"savannah");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,16,0);
  assert(lua_gettop(L) - lc_nextra == 3);
  
  /* add_biome("fiery", nil, "ethereal:fiery_dirt", 1, "default:dirt", 3,
   * 	nil, nil, nil, nil, nil, 5, 20, 75, 10, ethereal.fiery) */
  lua_pushvalue(L,(3 + lc_nextra));
  lua_pushliteral(L,"fiery");
  lua_pushnil(L);
  lua_pushliteral(L,"ethereal:fiery_dirt");
  lua_pushnumber(L,1);
  lua_pushliteral(L,"default:dirt");
  lua_pushnumber(L,3);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnumber(L,5);
  lua_pushnumber(L,20);
  lua_pushnumber(L,75);
  lua_pushnumber(L,10);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"fiery");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,16,0);
  assert(lua_gettop(L) - lc_nextra == 3);
  
  /* add_biome("fiery_ocean", nil, "default:sand", 1, "default:sand", 2,
   * 	nil, nil, nil, nil, nil, -192, 4, 75, 10, ethereal.fiery) */
  lua_pushvalue(L,(3 + lc_nextra));
  lua_pushliteral(L,"fiery_ocean");
  lua_pushnil(L);
  lua_pushliteral(L,"default:sand");
  lua_pushnumber(L,1);
  lua_pushliteral(L,"default:sand");
  lua_pushnumber(L,2);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnumber(L,-192);
  lua_pushnumber(L,4);
  lua_pushnumber(L,75);
  lua_pushnumber(L,10);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"fiery");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,16,0);
  assert(lua_gettop(L) - lc_nextra == 3);
  
  /* add_biome("sandclay", nil, "default:sand", 3, "default:clay", 2,
   * 	nil, nil, nil, nil, nil, 1, 11, 65, 2, ethereal.sandclay) */
  lua_pushvalue(L,(3 + lc_nextra));
  lua_pushliteral(L,"sandclay");
  lua_pushnil(L);
  lua_pushliteral(L,"default:sand");
  lua_pushnumber(L,3);
  lua_pushliteral(L,"default:clay");
  lua_pushnumber(L,2);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnumber(L,1);
  lua_pushnumber(L,11);
  lua_pushnumber(L,65);
  lua_pushnumber(L,2);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"sandclay");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,16,0);
  assert(lua_gettop(L) - lc_nextra == 3);
  
  /* --= schematic decorations
   * local add_schem = function(a, b, c, d, e, f, g)
   * 
   * 	if g ~= 1 then return end
   * 
   * 	minetest.register_decoration({
   * 		deco_type = "schematic",
   * 		place_on = a,
   * 		sidelen = 80,
   * 		fill_ratio = b,
   * 		biomes = c,
   * 		y_min = d,
   * 		y_max = e,
   * 		schematic = f,
   * 		flags = "place_center_x, place_center_z",
   * 	})
   * end */
  lua_pushcfunction(L,lcf1_add_schem);
  assert(lua_gettop(L) - lc_nextra == 4);
  
  /* -- redwood tree
   * add_schem({"bakedclay:orange"}, 0.0025, {"mesa"}, 1, 100, path .. "redwood.mts", ethereal.mesa) */
  lua_pushvalue(L,(4 + lc_nextra));
  lua_createtable(L,1,0);
  lua_pushliteral(L,"bakedclay:orange");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,0.0025);
  lua_createtable(L,1,0);
  lua_pushliteral(L,"mesa");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,1);
  lua_pushnumber(L,100);
  lua_pushvalue(L,(1 + lc_nextra));
  lua_pushliteral(L,"redwood.mts");
  lua_concat(L,2);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"mesa");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,7,0);
  assert(lua_gettop(L) - lc_nextra == 4);
  

  /* -- banana tree
   * add_schem({"ethereal:grove_dirt"}, 0.015, {"grove"}, 1, 100, ethereal.bananatree, ethereal.grove) */
  lua_pushvalue(L,(4 + lc_nextra));
  lua_createtable(L,1,0);
  lua_pushliteral(L,"ethereal:grove_dirt");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,0.015);
  lua_createtable(L,1,0);
  lua_pushliteral(L,"grove");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,1);
  lua_pushnumber(L,100);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"bananatree");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"grove");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,7,0);
  assert(lua_gettop(L) - lc_nextra == 4);
  
  /* -- healing tree
   * add_schem({"default:dirt_with_snow"}, 0.01, {"alpine"}, 120, 140, path .. "yellowtree.mts", ethereal.alpine) */
  lua_pushvalue(L,(4 + lc_nextra));
  lua_createtable(L,1,0);
  lua_pushliteral(L,"default:dirt_with_snow");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,0.01);
  lua_createtable(L,1,0);
  lua_pushliteral(L,"alpine");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,120);
  lua_pushnumber(L,140);
  lua_pushvalue(L,(1 + lc_nextra));
  lua_pushliteral(L,"yellowtree.mts");
  lua_concat(L,2);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"alpine");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,7,0);
  assert(lua_gettop(L) - lc_nextra == 4);
  
  /* -- crystal frost tree
   * add_schem({"ethereal:crystal_dirt"}, 0.01, {"frost"}, 1, 100, path .. "frosttrees.mts", ethereal.frost) */
  lua_pushvalue(L,(4 + lc_nextra));
  lua_createtable(L,1,0);
  lua_pushliteral(L,"ethereal:crystal_dirt");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,0.01);
  lua_createtable(L,1,0);
  lua_pushliteral(L,"frost");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,1);
  lua_pushnumber(L,100);
  lua_pushvalue(L,(1 + lc_nextra));
  lua_pushliteral(L,"frosttrees.mts");
  lua_concat(L,2);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"frost");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,7,0);
  assert(lua_gettop(L) - lc_nextra == 4);
  
  /* -- giant mushroom
   * add_schem({"ethereal:mushroom_dirt"}, 0.02, {"mushroom"}, 1, 100, path .. "mushroomone.mts", ethereal.mushroom) */
  lua_pushvalue(L,(4 + lc_nextra));
  lua_createtable(L,1,0);
  lua_pushliteral(L,"ethereal:mushroom_dirt");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,0.02);
  lua_createtable(L,1,0);
  lua_pushliteral(L,"mushroom");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,1);
  lua_pushnumber(L,100);
  lua_pushvalue(L,(1 + lc_nextra));
  lua_pushliteral(L,"mushroomone.mts");
  lua_concat(L,2);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"mushroom");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,7,0);
  assert(lua_gettop(L) - lc_nextra == 4);
  
  /* -- small lava crater
   * add_schem({"ethereal:fiery_dirt"}, 0.01, {"fiery"}, 1, 100, path .. "volcanom.mts", ethereal.fiery) */
  lua_pushvalue(L,(4 + lc_nextra));
  lua_createtable(L,1,0);
  lua_pushliteral(L,"ethereal:fiery_dirt");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,0.01);
  lua_createtable(L,1,0);
  lua_pushliteral(L,"fiery");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,1);
  lua_pushnumber(L,100);
  lua_pushvalue(L,(1 + lc_nextra));
  lua_pushliteral(L,"volcanom.mts");
  lua_concat(L,2);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"fiery");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,7,0);
  assert(lua_gettop(L) - lc_nextra == 4);
  
  /* -- large lava crater
   * add_schem({"ethereal:fiery_dirt"}, 0.01, {"fiery"}, 1, 100, path .. "volcanol.mts", ethereal.fiery) */
  lua_pushvalue(L,(4 + lc_nextra));
  lua_createtable(L,1,0);
  lua_pushliteral(L,"ethereal:fiery_dirt");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,0.01);
  lua_createtable(L,1,0);
  lua_pushliteral(L,"fiery");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,1);
  lua_pushnumber(L,100);
  lua_pushvalue(L,(1 + lc_nextra));
  lua_pushliteral(L,"volcanol.mts");
  lua_concat(L,2);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"fiery");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,7,0);
  assert(lua_gettop(L) - lc_nextra == 4);
  
  /* -- default jungle tree
   * add_schem({"ethereal:jungle_dirt"}, 0.08, {"junglee"}, 1, 100, dpath .. "jungle_tree.mts", ethereal.junglee) */
  lua_pushvalue(L,(4 + lc_nextra));
  lua_createtable(L,1,0);
  lua_pushliteral(L,"ethereal:jungle_dirt");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,0.08);
  lua_createtable(L,1,0);
  lua_pushliteral(L,"junglee");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,1);
  lua_pushnumber(L,100);
  lua_pushvalue(L,(2 + lc_nextra));
  lua_pushliteral(L,"jungle_tree.mts");
  lua_concat(L,2);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"junglee");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,7,0);
  assert(lua_gettop(L) - lc_nextra == 4);
  
  /* -- willow tree
   * add_schem({"ethereal:gray_dirt"}, 0.02, {"grayness"}, 1, 100, path .. "willow.mts", ethereal.grayness) */
  lua_pushvalue(L,(4 + lc_nextra));
  lua_createtable(L,1,0);
  lua_pushliteral(L,"ethereal:gray_dirt");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,0.02);
  lua_createtable(L,1,0);
  lua_pushliteral(L,"grayness");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,1);
  lua_pushnumber(L,100);
  lua_pushvalue(L,(1 + lc_nextra));
  lua_pushliteral(L,"willow.mts");
  lua_concat(L,2);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"grayness");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,7,0);
  assert(lua_gettop(L) - lc_nextra == 4);
  
  /* -- pine tree (default for lower elevation and ethereal for higher)
   * add_schem({"ethereal:cold_dirt"}, 0.025, {"snowy"}, 10, 40, dpath .. "pine_tree.mts", ethereal.snowy) */
  lua_pushvalue(L,(4 + lc_nextra));
  lua_createtable(L,1,0);
  lua_pushliteral(L,"ethereal:cold_dirt");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,0.025);
  lua_createtable(L,1,0);
  lua_pushliteral(L,"snowy");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,10);
  lua_pushnumber(L,40);
  lua_pushvalue(L,(2 + lc_nextra));
  lua_pushliteral(L,"pine_tree.mts");
  lua_concat(L,2);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"snowy");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,7,0);
  assert(lua_gettop(L) - lc_nextra == 4);
  
  /* add_schem({"default:dirt_with_snow"}, 0.025, {"alpine"}, 40, 140, path .. "pinetree.mts", ethereal.alpine) */
  lua_pushvalue(L,(4 + lc_nextra));
  lua_createtable(L,1,0);
  lua_pushliteral(L,"default:dirt_with_snow");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,0.025);
  lua_createtable(L,1,0);
  lua_pushliteral(L,"alpine");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,40);
  lua_pushnumber(L,140);
  lua_pushvalue(L,(1 + lc_nextra));
  lua_pushliteral(L,"pinetree.mts");
  lua_concat(L,2);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"alpine");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,7,0);
  assert(lua_gettop(L) - lc_nextra == 4);
  
  /* -- default apple tree
   * add_schem({"ethereal:green_dirt"}, 0.02, {"jumble"}, 1, 100, dpath .. "apple_tree.mts", ethereal.grassy) */
  lua_pushvalue(L,(4 + lc_nextra));
  lua_createtable(L,1,0);
  lua_pushliteral(L,"ethereal:green_dirt");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,0.02);
  lua_createtable(L,1,0);
  lua_pushliteral(L,"jumble");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,1);
  lua_pushnumber(L,100);
  lua_pushvalue(L,(2 + lc_nextra));
  lua_pushliteral(L,"apple_tree.mts");
  lua_concat(L,2);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"grassy");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,7,0);
  assert(lua_gettop(L) - lc_nextra == 4);
  
  /* add_schem({"ethereal:green_dirt"}, 0.03, {"grassy"}, 1, 100, dpath .. "apple_tree.mts", ethereal.grassy) */
  lua_pushvalue(L,(4 + lc_nextra));
  lua_createtable(L,1,0);
  lua_pushliteral(L,"ethereal:green_dirt");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,0.03);
  lua_createtable(L,1,0);
  lua_pushliteral(L,"grassy");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,1);
  lua_pushnumber(L,100);
  lua_pushvalue(L,(2 + lc_nextra));
  lua_pushliteral(L,"apple_tree.mts");
  lua_concat(L,2);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"grassy");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,7,0);
  assert(lua_gettop(L) - lc_nextra == 4);
  
  /* -- big old tree
   * add_schem({"ethereal:green_dirt"}, 0.001, {"jumble"}, 1, 100, path .. "bigtree.mts", ethereal.jumble) */
  lua_pushvalue(L,(4 + lc_nextra));
  lua_createtable(L,1,0);
  lua_pushliteral(L,"ethereal:green_dirt");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,0.001);
  lua_createtable(L,1,0);
  lua_pushliteral(L,"jumble");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,1);
  lua_pushnumber(L,100);
  lua_pushvalue(L,(1 + lc_nextra));
  lua_pushliteral(L,"bigtree.mts");
  lua_concat(L,2);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"jumble");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,7,0);
  assert(lua_gettop(L) - lc_nextra == 4);
  
  /* -- aspen tree
   * add_schem({"ethereal:green_dirt"}, 0.02, {"grassytwo"}, 1, 50, dpath .. "aspen_tree.mts", ethereal.jumble) */
  lua_pushvalue(L,(4 + lc_nextra));
  lua_createtable(L,1,0);
  lua_pushliteral(L,"ethereal:green_dirt");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,0.02);
  lua_createtable(L,1,0);
  lua_pushliteral(L,"grassytwo");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,1);
  lua_pushnumber(L,50);
  lua_pushvalue(L,(2 + lc_nextra));
  lua_pushliteral(L,"aspen_tree.mts");
  lua_concat(L,2);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"jumble");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,7,0);
  assert(lua_gettop(L) - lc_nextra == 4);
  
  /* -- birch tree
   * add_schem({"ethereal:green_dirt"}, 0.02, {"grassytwo"}, 50, 100, ethereal.birchtree, ethereal.grassytwo) */
  lua_pushvalue(L,(4 + lc_nextra));
  lua_createtable(L,1,0);
  lua_pushliteral(L,"ethereal:green_dirt");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,0.02);
  lua_createtable(L,1,0);
  lua_pushliteral(L,"grassytwo");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,50);
  lua_pushnumber(L,100);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"birchtree");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"grassytwo");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,7,0);
  assert(lua_gettop(L) - lc_nextra == 4);
  
  /* -- orange tree
   * add_schem({"ethereal:prairie_dirt"}, 0.01, {"prairie"}, 1, 100, ethereal.orangetree, ethereal.prairie) */
  lua_pushvalue(L,(4 + lc_nextra));
  lua_createtable(L,1,0);
  lua_pushliteral(L,"ethereal:prairie_dirt");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,0.01);
  lua_createtable(L,1,0);
  lua_pushliteral(L,"prairie");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,1);
  lua_pushnumber(L,100);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"orangetree");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"prairie");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,7,0);
  assert(lua_gettop(L) - lc_nextra == 4);
  
  /* -- default acacia tree
   * add_schem({"default:dirt_with_dry_grass"}, 0.004, {"savannah"}, 1, 100, dpath .. "acacia_tree.mts", ethereal.savannah) */
  lua_pushvalue(L,(4 + lc_nextra));
  lua_createtable(L,1,0);
  lua_pushliteral(L,"default:dirt_with_dry_grass");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,0.004);
  lua_createtable(L,1,0);
  lua_pushliteral(L,"savannah");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,1);
  lua_pushnumber(L,100);
  lua_pushvalue(L,(2 + lc_nextra));
  lua_pushliteral(L,"acacia_tree.mts");
  lua_concat(L,2);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"savannah");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,7,0);
  assert(lua_gettop(L) - lc_nextra == 4);
  
  /* -- large cactus (by Paramat)
   * if ethereal.desert == 1 then */
  enum { lc7 = 4 };
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"desert");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_pushnumber(L,1);
  const int lc8 = lua_equal(L,-2,-1);
  lua_pop(L,2);
  lua_pushboolean(L,lc8);
  const int lc9 = lua_toboolean(L,-1);
  lua_pop(L,1);
  if (lc9) {
    
    /* minetest.register_decoration({
     * 	deco_type = "schematic",
     * 	place_on = {"default:desert_sand"},
     * 	sidelen = 80,
     * 	noise_params = {
     * 		offset = -0.0005,
     * 		scale = 0.0015,
     * 		spread = {x = 200, y = 200, z = 200},
     * 		seed = 230,
     * 		octaves = 3,
     * 		persist = 0.6
     * 	},
     * 	biomes = {"desert"},
     * 	y_min = 5,
     * 	y_max = 31000,
     * 	schematic = dpath.."large_cactus.mts",
     * 	flags = "place_center_x", --, place_center_z",
     * 	rotation = "random",
     * }) */
    lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
    lua_pushliteral(L,"register_decoration");
    lua_gettable(L,-2);
    lua_remove(L,-2);
    lua_createtable(L,0,10);
    lua_pushliteral(L,"deco_type");
    lua_pushliteral(L,"schematic");
    lua_rawset(L,-3);
    lua_pushliteral(L,"place_on");
    lua_createtable(L,1,0);
    lua_pushliteral(L,"default:desert_sand");
    lua_rawseti(L,-2,1);
    lua_rawset(L,-3);
    lua_pushliteral(L,"sidelen");
    lua_pushnumber(L,80);
    lua_rawset(L,-3);
    lua_pushliteral(L,"noise_params");
    lua_createtable(L,0,6);
    lua_pushliteral(L,"offset");
    lua_pushnumber(L,-0.0005);
    lua_rawset(L,-3);
    lua_pushliteral(L,"scale");
    lua_pushnumber(L,0.0015);
    lua_rawset(L,-3);
    lua_pushliteral(L,"spread");
    lua_createtable(L,0,3);
    lua_pushliteral(L,"x");
    lua_pushnumber(L,200);
    lua_rawset(L,-3);
    lua_pushliteral(L,"y");
    lua_pushnumber(L,200);
    lua_rawset(L,-3);
    lua_pushliteral(L,"z");
    lua_pushnumber(L,200);
    lua_rawset(L,-3);
    lua_rawset(L,-3);
    lua_pushliteral(L,"seed");
    lua_pushnumber(L,230);
    lua_rawset(L,-3);
    lua_pushliteral(L,"octaves");
    lua_pushnumber(L,3);
    lua_rawset(L,-3);
    lua_pushliteral(L,"persist");
    lua_pushnumber(L,0.6);
    lua_rawset(L,-3);
    lua_rawset(L,-3);
    lua_pushliteral(L,"biomes");
    lua_createtable(L,1,0);
    lua_pushliteral(L,"desert");
    lua_rawseti(L,-2,1);
    lua_rawset(L,-3);
    lua_pushliteral(L,"y_min");
    lua_pushnumber(L,5);
    lua_rawset(L,-3);
    lua_pushliteral(L,"y_max");
    lua_pushnumber(L,31000);
    lua_rawset(L,-3);
    lua_pushliteral(L,"schematic");
    lua_pushvalue(L,(2 + lc_nextra));
    lua_pushliteral(L,"large_cactus.mts");
    lua_concat(L,2);
    lua_rawset(L,-3);
    lua_pushliteral(L,"flags");
    lua_pushliteral(L,"place_center_x");
    lua_rawset(L,-3);
    lua_pushliteral(L,"rotation");
    lua_pushliteral(L,"random");
    lua_rawset(L,-3);
    lua_call(L,1,0);
    assert(lua_gettop(L) - lc_nextra == 4);
  }
  lua_settop(L,(lc7 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 4);
  
  /* -- palm tree
   * add_schem({"default:sand"}, 0.0025, {"desert_ocean"}, 1, 1, path .. "palmtree.mts", ethereal.desert) */
  lua_pushvalue(L,(4 + lc_nextra));
  lua_createtable(L,1,0);
  lua_pushliteral(L,"default:sand");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,0.0025);
  lua_createtable(L,1,0);
  lua_pushliteral(L,"desert_ocean");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,1);
  lua_pushnumber(L,1);
  lua_pushvalue(L,(1 + lc_nextra));
  lua_pushliteral(L,"palmtree.mts");
  lua_concat(L,2);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"desert");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,7,0);
  assert(lua_gettop(L) - lc_nextra == 4);
  
  /* add_schem({"default:sand"}, 0.0025, {"plains_ocean"}, 1, 1, path .. "palmtree.mts", ethereal.plains) */
  lua_pushvalue(L,(4 + lc_nextra));
  lua_createtable(L,1,0);
  lua_pushliteral(L,"default:sand");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,0.0025);
  lua_createtable(L,1,0);
  lua_pushliteral(L,"plains_ocean");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,1);
  lua_pushnumber(L,1);
  lua_pushvalue(L,(1 + lc_nextra));
  lua_pushliteral(L,"palmtree.mts");
  lua_concat(L,2);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"plains");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,7,0);
  assert(lua_gettop(L) - lc_nextra == 4);
  
  /* add_schem({"default:sand"}, 0.0025, {"sandclay"}, 1, 1, path .. "palmtree.mts", ethereal.sandclay) */
  lua_pushvalue(L,(4 + lc_nextra));
  lua_createtable(L,1,0);
  lua_pushliteral(L,"default:sand");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,0.0025);
  lua_createtable(L,1,0);
  lua_pushliteral(L,"sandclay");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,1);
  lua_pushnumber(L,1);
  lua_pushvalue(L,(1 + lc_nextra));
  lua_pushliteral(L,"palmtree.mts");
  lua_concat(L,2);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"sandclay");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,7,0);
  assert(lua_gettop(L) - lc_nextra == 4);
  
  /* add_schem({"default:sand"}, 0.0025, {"sandstone_ocean"}, 1, 1, path .. "palmtree.mts", ethereal.sandstone) */
  lua_pushvalue(L,(4 + lc_nextra));
  lua_createtable(L,1,0);
  lua_pushliteral(L,"default:sand");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,0.0025);
  lua_createtable(L,1,0);
  lua_pushliteral(L,"sandstone_ocean");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,1);
  lua_pushnumber(L,1);
  lua_pushvalue(L,(1 + lc_nextra));
  lua_pushliteral(L,"palmtree.mts");
  lua_concat(L,2);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"sandstone");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,7,0);
  assert(lua_gettop(L) - lc_nextra == 4);
  
  /* add_schem({"default:sand"}, 0.0025, {"mesa_ocean"}, 1, 1, path .. "palmtree.mts", ethereal.mesa) */
  lua_pushvalue(L,(4 + lc_nextra));
  lua_createtable(L,1,0);
  lua_pushliteral(L,"default:sand");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,0.0025);
  lua_createtable(L,1,0);
  lua_pushliteral(L,"mesa_ocean");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,1);
  lua_pushnumber(L,1);
  lua_pushvalue(L,(1 + lc_nextra));
  lua_pushliteral(L,"palmtree.mts");
  lua_concat(L,2);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"mesa");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,7,0);
  assert(lua_gettop(L) - lc_nextra == 4);
  
  /* add_schem({"default:sand"}, 0.0025, {"grove_ocean"}, 1, 1, path .. "palmtree.mts", ethereal.grove) */
  lua_pushvalue(L,(4 + lc_nextra));
  lua_createtable(L,1,0);
  lua_pushliteral(L,"default:sand");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,0.0025);
  lua_createtable(L,1,0);
  lua_pushliteral(L,"grove_ocean");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,1);
  lua_pushnumber(L,1);
  lua_pushvalue(L,(1 + lc_nextra));
  lua_pushliteral(L,"palmtree.mts");
  lua_concat(L,2);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"grove");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,7,0);
  assert(lua_gettop(L) - lc_nextra == 4);
  
  /* add_schem({"default:sand"}, 0.0025, {"grassy_ocean"}, 1, 1, path .. "palmtree.mts", ethereal.grassy) */
  lua_pushvalue(L,(4 + lc_nextra));
  lua_createtable(L,1,0);
  lua_pushliteral(L,"default:sand");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,0.0025);
  lua_createtable(L,1,0);
  lua_pushliteral(L,"grassy_ocean");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,1);
  lua_pushnumber(L,1);
  lua_pushvalue(L,(1 + lc_nextra));
  lua_pushliteral(L,"palmtree.mts");
  lua_concat(L,2);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"grassy");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,7,0);
  assert(lua_gettop(L) - lc_nextra == 4);
  
  /* -- bamboo tree
   * add_schem({"ethereal:bamboo_dirt"}, 0.025, {"bamboo"}, 1, 100, ethereal.bambootree, ethereal.bamboo) */
  lua_pushvalue(L,(4 + lc_nextra));
  lua_createtable(L,1,0);
  lua_pushliteral(L,"ethereal:bamboo_dirt");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,0.025);
  lua_createtable(L,1,0);
  lua_pushliteral(L,"bamboo");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,1);
  lua_pushnumber(L,100);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"bambootree");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"bamboo");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,7,0);
  assert(lua_gettop(L) - lc_nextra == 4);
  
  /* -- bush
   * add_schem({"ethereal:bamboo_dirt"}, 0.08, {"bamboo"}, 1, 100, ethereal.bush, ethereal.bamboo) */
  lua_pushvalue(L,(4 + lc_nextra));
  lua_createtable(L,1,0);
  lua_pushliteral(L,"ethereal:bamboo_dirt");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,0.08);
  lua_createtable(L,1,0);
  lua_pushliteral(L,"bamboo");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,1);
  lua_pushnumber(L,100);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"bush");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"bamboo");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,7,0);
  assert(lua_gettop(L) - lc_nextra == 4);
  
  /* --= simple decorations
   * local add_node = function(a, b, c, d, e, f, g, h, i, j)
   * 
   * 	if j ~= 1 then return end
   * 
   * 	minetest.register_decoration({
   * 		deco_type = "simple",
   * 		place_on = a,
   * 		sidelen = 80,
   * 		fill_ratio = b,
   * 		biomes = c,
   * 		y_min = d,
   * 		y_max = e,
   * 		decoration = f,
   * 		height_max = g,
   * 		spawn_by = h,
   * 		num_spawn_by = i,
   * 	})
   * end */
  lua_pushcfunction(L,lcf1_add_node);
  assert(lua_gettop(L) - lc_nextra == 5);
  
  /* -- scorched tree
   * add_node({"ethereal:dry_dirt"}, 0.006, {"plains"}, 1, 100, {"ethereal:scorched_tree"}, 6, nil, nil, ethereal.plains) */
  lua_pushvalue(L,(5 + lc_nextra));
  lua_createtable(L,1,0);
  lua_pushliteral(L,"ethereal:dry_dirt");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,0.006);
  lua_createtable(L,1,0);
  lua_pushliteral(L,"plains");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,1);
  lua_pushnumber(L,100);
  lua_createtable(L,1,0);
  lua_pushliteral(L,"ethereal:scorched_tree");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,6);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"plains");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,10,0);
  assert(lua_gettop(L) - lc_nextra == 5);
  
  /* -- dry shrub
   * add_node({"ethereal:dry_dirt"}, 0.015, {"plains"}, 1, 100, {"default:dry_shrub"}, nil, nil, nil, ethereal.plains) */
  lua_pushvalue(L,(5 + lc_nextra));
  lua_createtable(L,1,0);
  lua_pushliteral(L,"ethereal:dry_dirt");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,0.015);
  lua_createtable(L,1,0);
  lua_pushliteral(L,"plains");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,1);
  lua_pushnumber(L,100);
  lua_createtable(L,1,0);
  lua_pushliteral(L,"default:dry_shrub");
  lua_rawseti(L,-2,1);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"plains");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,10,0);
  assert(lua_gettop(L) - lc_nextra == 5);
  
  /* add_node({"default:sand"}, 0.015, {"grassy_ocean"}, 1, 100, {"default:dry_shrub"}, nil, nil, nil, ethereal.grassy) */
  lua_pushvalue(L,(5 + lc_nextra));
  lua_createtable(L,1,0);
  lua_pushliteral(L,"default:sand");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,0.015);
  lua_createtable(L,1,0);
  lua_pushliteral(L,"grassy_ocean");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,1);
  lua_pushnumber(L,100);
  lua_createtable(L,1,0);
  lua_pushliteral(L,"default:dry_shrub");
  lua_rawseti(L,-2,1);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"grassy");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,10,0);
  assert(lua_gettop(L) - lc_nextra == 5);
  
  /* add_node({"default:desert_sand"}, 0.015, {"desert"}, 1, 100, {"default:dry_shrub"}, nil, nil, nil, ethereal.desert) */
  lua_pushvalue(L,(5 + lc_nextra));
  lua_createtable(L,1,0);
  lua_pushliteral(L,"default:desert_sand");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,0.015);
  lua_createtable(L,1,0);
  lua_pushliteral(L,"desert");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,1);
  lua_pushnumber(L,100);
  lua_createtable(L,1,0);
  lua_pushliteral(L,"default:dry_shrub");
  lua_rawseti(L,-2,1);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"desert");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,10,0);
  assert(lua_gettop(L) - lc_nextra == 5);
  
  /* add_node({"default:sandstone"}, 0.015, {"sandstone"}, 1, 100, {"default:dry_shrub"}, nil, nil, nil, ethereal.sandstone) */
  lua_pushvalue(L,(5 + lc_nextra));
  lua_createtable(L,1,0);
  lua_pushliteral(L,"default:sandstone");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,0.015);
  lua_createtable(L,1,0);
  lua_pushliteral(L,"sandstone");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,1);
  lua_pushnumber(L,100);
  lua_createtable(L,1,0);
  lua_pushliteral(L,"default:dry_shrub");
  lua_rawseti(L,-2,1);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"sandstone");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,10,0);
  assert(lua_gettop(L) - lc_nextra == 5);
  
  /* add_node({"bakedclay:red", "bakedclay:orange"}, 0.015, {"mesa"}, 1, 100, {"default:dry_shrub"}, nil, nil, nil, ethereal.mesa) */
  lua_pushvalue(L,(5 + lc_nextra));
  lua_createtable(L,2,0);
  lua_pushliteral(L,"bakedclay:red");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"bakedclay:orange");
  lua_rawseti(L,-2,2);
  lua_pushnumber(L,0.015);
  lua_createtable(L,1,0);
  lua_pushliteral(L,"mesa");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,1);
  lua_pushnumber(L,100);
  lua_createtable(L,1,0);
  lua_pushliteral(L,"default:dry_shrub");
  lua_rawseti(L,-2,1);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"mesa");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,10,0);
  assert(lua_gettop(L) - lc_nextra == 5);
  
  /* -- dry grass
   * add_node({"default:dirt_with_dry_grass"}, 0.25, {"savannah"}, 1, 100, {"default:dry_grass_2",
   * 	"default:dry_grass_3", "default:dry_grass_4", "default:dry_grass_5"}, nil, nil, nil, ethereal.savannah) */
  lua_pushvalue(L,(5 + lc_nextra));
  lua_createtable(L,1,0);
  lua_pushliteral(L,"default:dirt_with_dry_grass");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,0.25);
  lua_createtable(L,1,0);
  lua_pushliteral(L,"savannah");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,1);
  lua_pushnumber(L,100);
  lua_createtable(L,4,0);
  lua_pushliteral(L,"default:dry_grass_2");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"default:dry_grass_3");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"default:dry_grass_4");
  lua_rawseti(L,-2,3);
  lua_pushliteral(L,"default:dry_grass_5");
  lua_rawseti(L,-2,4);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"savannah");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,10,0);
  assert(lua_gettop(L) - lc_nextra == 5);
  
  /* -- flowers & strawberry
   * add_node({"ethereal:green_dirt"}, 0.025, {"grassy"}, 1, 100, {"flowers:dandelion_white",
   * 	"flowers:dandelion_yellow", "flowers:geranium", "flowers:rose", "flowers:tulip",
   * 	"flowers:viola", "ethereal:strawberry_7"}, nil, nil, nil, ethereal.grassy) */
  lua_pushvalue(L,(5 + lc_nextra));
  lua_createtable(L,1,0);
  lua_pushliteral(L,"ethereal:green_dirt");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,0.025);
  lua_createtable(L,1,0);
  lua_pushliteral(L,"grassy");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,1);
  lua_pushnumber(L,100);
  lua_createtable(L,7,0);
  lua_pushliteral(L,"flowers:dandelion_white");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"flowers:dandelion_yellow");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"flowers:geranium");
  lua_rawseti(L,-2,3);
  lua_pushliteral(L,"flowers:rose");
  lua_rawseti(L,-2,4);
  lua_pushliteral(L,"flowers:tulip");
  lua_rawseti(L,-2,5);
  lua_pushliteral(L,"flowers:viola");
  lua_rawseti(L,-2,6);
  lua_pushliteral(L,"ethereal:strawberry_7");
  lua_rawseti(L,-2,7);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"grassy");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,10,0);
  assert(lua_gettop(L) - lc_nextra == 5);
  
  /* add_node({"ethereal:green_dirt"}, 0.025, {"grassytwo"}, 1, 100, {"flowers:dandelion_white",
   * 	"flowers:dandelion_yellow", "flowers:geranium", "flowers:rose", "flowers:tulip",
   * 	"flowers:viola", "ethereal:strawberry_7"}, nil, nil, nil, ethereal.grassytwo) */
  lua_pushvalue(L,(5 + lc_nextra));
  lua_createtable(L,1,0);
  lua_pushliteral(L,"ethereal:green_dirt");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,0.025);
  lua_createtable(L,1,0);
  lua_pushliteral(L,"grassytwo");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,1);
  lua_pushnumber(L,100);
  lua_createtable(L,7,0);
  lua_pushliteral(L,"flowers:dandelion_white");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"flowers:dandelion_yellow");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"flowers:geranium");
  lua_rawseti(L,-2,3);
  lua_pushliteral(L,"flowers:rose");
  lua_rawseti(L,-2,4);
  lua_pushliteral(L,"flowers:tulip");
  lua_rawseti(L,-2,5);
  lua_pushliteral(L,"flowers:viola");
  lua_rawseti(L,-2,6);
  lua_pushliteral(L,"ethereal:strawberry_7");
  lua_rawseti(L,-2,7);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"grassytwo");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,10,0);
  assert(lua_gettop(L) - lc_nextra == 5);
  
  /* -- prairie flowers & strawberry
   * add_node({"ethereal:prairie_dirt"}, 0.035, {"prairie"}, 1, 100, {"flowers:dandelion_white",
   * 	"flowers:dandelion_yellow", "flowers:geranium", "flowers:rose", "flowers:tulip",
   * 	"flowers:viola", "ethereal:strawberry_7"}, nil, nil, nil, ethereal.prairie) */
  lua_pushvalue(L,(5 + lc_nextra));
  lua_createtable(L,1,0);
  lua_pushliteral(L,"ethereal:prairie_dirt");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,0.035);
  lua_createtable(L,1,0);
  lua_pushliteral(L,"prairie");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,1);
  lua_pushnumber(L,100);
  lua_createtable(L,7,0);
  lua_pushliteral(L,"flowers:dandelion_white");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"flowers:dandelion_yellow");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"flowers:geranium");
  lua_rawseti(L,-2,3);
  lua_pushliteral(L,"flowers:rose");
  lua_rawseti(L,-2,4);
  lua_pushliteral(L,"flowers:tulip");
  lua_rawseti(L,-2,5);
  lua_pushliteral(L,"flowers:viola");
  lua_rawseti(L,-2,6);
  lua_pushliteral(L,"ethereal:strawberry_7");
  lua_rawseti(L,-2,7);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"prairie");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,10,0);
  assert(lua_gettop(L) - lc_nextra == 5);
  
  /* -- crystal spike & crystal grass
   * add_node({"ethereal:crystal_dirt"}, 0.02, {"frost"}, 1, 100, {"ethereal:crystal_spike",
   * 	"ethereal:crystalgrass"}, nil, nil, nil, ethereal.frost) */
  lua_pushvalue(L,(5 + lc_nextra));
  lua_createtable(L,1,0);
  lua_pushliteral(L,"ethereal:crystal_dirt");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,0.02);
  lua_createtable(L,1,0);
  lua_pushliteral(L,"frost");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,1);
  lua_pushnumber(L,100);
  lua_createtable(L,2,0);
  lua_pushliteral(L,"ethereal:crystal_spike");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"ethereal:crystalgrass");
  lua_rawseti(L,-2,2);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"frost");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,10,0);
  assert(lua_gettop(L) - lc_nextra == 5);
  
  /* -- red shrub
   * add_node({"ethereal:fiery_dirt"}, 0.10, {"fiery"}, 1, 100, {"ethereal:dry_shrub"}, nil, nil, nil, ethereal.fiery) */
  lua_pushvalue(L,(5 + lc_nextra));
  lua_createtable(L,1,0);
  lua_pushliteral(L,"ethereal:fiery_dirt");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,0.1);
  lua_createtable(L,1,0);
  lua_pushliteral(L,"fiery");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,1);
  lua_pushnumber(L,100);
  lua_createtable(L,1,0);
  lua_pushliteral(L,"ethereal:dry_shrub");
  lua_rawseti(L,-2,1);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"fiery");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,10,0);
  assert(lua_gettop(L) - lc_nextra == 5);
  
  /* -- fire flower
   * --add_node({"ethereal:fiery_dirt"}, 0.02, {"fiery"}, 1, 100, {"ethereal:fire_flower"}, nil, nil, nil, ethereal.fiery)
   * -- snowy grass
   * add_node({"ethereal:gray_dirt"}, 0.05, {"grayness"}, 1, 100, {"ethereal:snowygrass"}, nil, nil, nil, ethereal.grayness) */
  lua_pushvalue(L,(5 + lc_nextra));
  lua_createtable(L,1,0);
  lua_pushliteral(L,"ethereal:gray_dirt");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,0.05);
  lua_createtable(L,1,0);
  lua_pushliteral(L,"grayness");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,1);
  lua_pushnumber(L,100);
  lua_createtable(L,1,0);
  lua_pushliteral(L,"ethereal:snowygrass");
  lua_rawseti(L,-2,1);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"grayness");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,10,0);
  assert(lua_gettop(L) - lc_nextra == 5);
  
  /* add_node({"ethereal:cold_dirt"}, 0.05, {"snowy"}, 1, 100, {"ethereal:snowygrass"}, nil, nil, nil, ethereal.snowy) */
  lua_pushvalue(L,(5 + lc_nextra));
  lua_createtable(L,1,0);
  lua_pushliteral(L,"ethereal:cold_dirt");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,0.05);
  lua_createtable(L,1,0);
  lua_pushliteral(L,"snowy");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,1);
  lua_pushnumber(L,100);
  lua_createtable(L,1,0);
  lua_pushliteral(L,"ethereal:snowygrass");
  lua_rawseti(L,-2,1);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"snowy");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,10,0);
  assert(lua_gettop(L) - lc_nextra == 5);
  
  /* -- cactus
   * add_node({"default:sandstone"}, 0.0025, {"sandstone"}, 1, 100, {"default:cactus"}, 3, nil, nil, ethereal.sandstone) */
  lua_pushvalue(L,(5 + lc_nextra));
  lua_createtable(L,1,0);
  lua_pushliteral(L,"default:sandstone");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,0.0025);
  lua_createtable(L,1,0);
  lua_pushliteral(L,"sandstone");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,1);
  lua_pushnumber(L,100);
  lua_createtable(L,1,0);
  lua_pushliteral(L,"default:cactus");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,3);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"sandstone");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,10,0);
  assert(lua_gettop(L) - lc_nextra == 5);
  
  /* add_node({"default:desert_sand"}, 0.005, {"desert"}, 1, 100, {"default:cactus"}, 4, nil, nil, ethereal.desert) */
  lua_pushvalue(L,(5 + lc_nextra));
  lua_createtable(L,1,0);
  lua_pushliteral(L,"default:desert_sand");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,0.005);
  lua_createtable(L,1,0);
  lua_pushliteral(L,"desert");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,1);
  lua_pushnumber(L,100);
  lua_createtable(L,1,0);
  lua_pushliteral(L,"default:cactus");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,4);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"desert");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,10,0);
  assert(lua_gettop(L) - lc_nextra == 5);
  
  /* -- wild red mushroom
   * add_node({"ethereal:mushroom_dirt"}, 0.01, {"mushroom"}, 1, 100, {"flowers:mushroom_fertile_red"}, nil, nil, nil, ethereal.mushroom) */
  lua_pushvalue(L,(5 + lc_nextra));
  lua_createtable(L,1,0);
  lua_pushliteral(L,"ethereal:mushroom_dirt");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,0.01);
  lua_createtable(L,1,0);
  lua_pushliteral(L,"mushroom");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,1);
  lua_pushnumber(L,100);
  lua_createtable(L,1,0);
  lua_pushliteral(L,"flowers:mushroom_fertile_red");
  lua_rawseti(L,-2,1);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"mushroom");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,10,0);
  assert(lua_gettop(L) - lc_nextra == 5);
  
  /* local list = {
   * 	{"junglee", "ethereal:jungle_dirt", ethereal.junglee},
   * 	{"grassy", "ethereal:green_dirt", ethereal.grassy},
   * 	{"grassytwo", "ethereal:green_dirt", ethereal.grassytwo},
   * 	{"prairie", "ethereal:prairie_dirt", ethereal.prairie},
   * 	{"mushroom", "ethereal:mushroom_dirt", ethereal.mushroom}
   * } */
  lua_createtable(L,5,0);
  lua_createtable(L,3,0);
  lua_pushliteral(L,"junglee");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"ethereal:jungle_dirt");
  lua_rawseti(L,-2,2);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"junglee");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_rawseti(L,-2,3);
  lua_rawseti(L,-2,1);
  lua_createtable(L,3,0);
  lua_pushliteral(L,"grassy");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"ethereal:green_dirt");
  lua_rawseti(L,-2,2);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"grassy");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_rawseti(L,-2,3);
  lua_rawseti(L,-2,2);
  lua_createtable(L,3,0);
  lua_pushliteral(L,"grassytwo");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"ethereal:green_dirt");
  lua_rawseti(L,-2,2);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"grassytwo");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_rawseti(L,-2,3);
  lua_rawseti(L,-2,3);
  lua_createtable(L,3,0);
  lua_pushliteral(L,"prairie");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"ethereal:prairie_dirt");
  lua_rawseti(L,-2,2);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"prairie");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_rawseti(L,-2,3);
  lua_rawseti(L,-2,4);
  lua_createtable(L,3,0);
  lua_pushliteral(L,"mushroom");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"ethereal:mushroom_dirt");
  lua_rawseti(L,-2,2);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"mushroom");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_rawseti(L,-2,3);
  lua_rawseti(L,-2,5);
  assert(lua_gettop(L) - lc_nextra == 6);
  
  /* -- wild red and brown mushrooms
   * for _, row in pairs(list) do
   * internal: local f, s, var = explist */
  enum { lc13 = 6 };
  lua_getfield(L,LUA_ENVIRONINDEX,"pairs");
  lua_pushvalue(L,(6 + lc_nextra));
  lua_call(L,1,3);
  while (1) {
    
    /* internal: local var_1, ..., var_n = f(s, var)
     *           if var_1 == nil then break end
     *           var = var_1 */
    lua_pushvalue(L,-3);
    lua_pushvalue(L,-3);
    lua_pushvalue(L,-3);
    lua_call(L,2,2);
    if (lua_isnil(L,-2)) {
      break;
    }
    lua_pushvalue(L,-2);
    lua_replace(L,-4);
    
    /* internal: local _ with idx 10
     * internal: local row with idx 11 */
    
    
    /* if row[3] == 1 then */
    enum { lc14 = 11 };
    lua_pushnumber(L,3);
    lua_gettable(L,(11 + lc_nextra));
    lua_pushnumber(L,1);
    const int lc15 = lua_equal(L,-2,-1);
    lua_pop(L,2);
    lua_pushboolean(L,lc15);
    const int lc16 = lua_toboolean(L,-1);
    lua_pop(L,1);
    if (lc16) {
      
      /* minetest.register_decoration({
       * 	deco_type = "simple",
       * 	place_on = {row[2]},
       * 	sidelen = 16,
       * 	noise_params = {
       * 		offset = 0,
       * 		scale = 0.009,
       * 		spread = {x = 200, y = 200, z = 200},
       * 		seed = 2,
       * 		octaves = 3,
       * 		persist = 0.66
       * 	},
       * 	biomes = {row[1]},
       * 	y_min = 1,
       * 	y_max = 120,
       * 	decoration = {"flowers:mushroom_brown", "flowers:mushroom_red"},
       * }) */
      lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
      lua_pushliteral(L,"register_decoration");
      lua_gettable(L,-2);
      lua_remove(L,-2);
      lua_createtable(L,0,8);
      lua_pushliteral(L,"deco_type");
      lua_pushliteral(L,"simple");
      lua_rawset(L,-3);
      lua_pushliteral(L,"place_on");
      lua_createtable(L,1,0);
      lua_pushnumber(L,2);
      lua_gettable(L,(11 + lc_nextra));
      lua_rawseti(L,-2,1);
      lua_rawset(L,-3);
      lua_pushliteral(L,"sidelen");
      lua_pushnumber(L,16);
      lua_rawset(L,-3);
      lua_pushliteral(L,"noise_params");
      lua_createtable(L,0,6);
      lua_pushliteral(L,"offset");
      lua_pushnumber(L,0);
      lua_rawset(L,-3);
      lua_pushliteral(L,"scale");
      lua_pushnumber(L,0.009);
      lua_rawset(L,-3);
      lua_pushliteral(L,"spread");
      lua_createtable(L,0,3);
      lua_pushliteral(L,"x");
      lua_pushnumber(L,200);
      lua_rawset(L,-3);
      lua_pushliteral(L,"y");
      lua_pushnumber(L,200);
      lua_rawset(L,-3);
      lua_pushliteral(L,"z");
      lua_pushnumber(L,200);
      lua_rawset(L,-3);
      lua_rawset(L,-3);
      lua_pushliteral(L,"seed");
      lua_pushnumber(L,2);
      lua_rawset(L,-3);
      lua_pushliteral(L,"octaves");
      lua_pushnumber(L,3);
      lua_rawset(L,-3);
      lua_pushliteral(L,"persist");
      lua_pushnumber(L,0.66);
      lua_rawset(L,-3);
      lua_rawset(L,-3);
      lua_pushliteral(L,"biomes");
      lua_createtable(L,1,0);
      lua_pushnumber(L,1);
      lua_gettable(L,(11 + lc_nextra));
      lua_rawseti(L,-2,1);
      lua_rawset(L,-3);
      lua_pushliteral(L,"y_min");
      lua_pushnumber(L,1);
      lua_rawset(L,-3);
      lua_pushliteral(L,"y_max");
      lua_pushnumber(L,120);
      lua_rawset(L,-3);
      lua_pushliteral(L,"decoration");
      lua_createtable(L,2,0);
      lua_pushliteral(L,"flowers:mushroom_brown");
      lua_rawseti(L,-2,1);
      lua_pushliteral(L,"flowers:mushroom_red");
      lua_rawseti(L,-2,2);
      lua_rawset(L,-3);
      lua_call(L,1,0);
      assert(lua_gettop(L) - lc_nextra == 11);
    }
    lua_settop(L,(lc14 + lc_nextra));
    assert(lua_gettop(L) - lc_nextra == 11);
    
    /* internal: stack cleanup on scope exit */
    lua_pop(L,2);
  }
  lua_settop(L,(lc13 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 6);
  
  /* -- jungle grass
   * add_node({"ethereal:jungle_dirt"}, 0.10, {"junglee"}, 1, 100, {"default:junglegrass"}, nil, nil, nil, ethereal.junglee) */
  lua_pushvalue(L,(5 + lc_nextra));
  lua_createtable(L,1,0);
  lua_pushliteral(L,"ethereal:jungle_dirt");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,0.1);
  lua_createtable(L,1,0);
  lua_pushliteral(L,"junglee");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,1);
  lua_pushnumber(L,100);
  lua_createtable(L,1,0);
  lua_pushliteral(L,"default:junglegrass");
  lua_rawseti(L,-2,1);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"junglee");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,10,0);
  assert(lua_gettop(L) - lc_nextra == 6);
  
  /* add_node({"ethereal:green_dirt"}, 0.15, {"jumble"}, 1, 100, {"default:junglegrass"}, nil, nil, nil, ethereal.jumble) */
  lua_pushvalue(L,(5 + lc_nextra));
  lua_createtable(L,1,0);
  lua_pushliteral(L,"ethereal:green_dirt");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,0.15);
  lua_createtable(L,1,0);
  lua_pushliteral(L,"jumble");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,1);
  lua_pushnumber(L,100);
  lua_createtable(L,1,0);
  lua_pushliteral(L,"default:junglegrass");
  lua_rawseti(L,-2,1);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"jumble");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,10,0);
  assert(lua_gettop(L) - lc_nextra == 6);
  
  /* -- grass
   * add_node({"ethereal:green_dirt"}, 0.35, {"grassy"}, 1, 100, {"default:grass_2", "default:grass_3",
   * 	"default:grass_4", "default:grass_5"}, nil, nil, nil, ethereal.grassy) */
  lua_pushvalue(L,(5 + lc_nextra));
  lua_createtable(L,1,0);
  lua_pushliteral(L,"ethereal:green_dirt");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,0.35);
  lua_createtable(L,1,0);
  lua_pushliteral(L,"grassy");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,1);
  lua_pushnumber(L,100);
  lua_createtable(L,4,0);
  lua_pushliteral(L,"default:grass_2");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"default:grass_3");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"default:grass_4");
  lua_rawseti(L,-2,3);
  lua_pushliteral(L,"default:grass_5");
  lua_rawseti(L,-2,4);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"grassy");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,10,0);
  assert(lua_gettop(L) - lc_nextra == 6);
  
  /* add_node({"ethereal:green_dirt"}, 0.35, {"grassytwo"}, 1, 100, {"default:grass_2", "default:grass_3",
   * 	"default:grass_4", "default:grass_5"}, nil, nil, nil, ethereal.grassytwo) */
  lua_pushvalue(L,(5 + lc_nextra));
  lua_createtable(L,1,0);
  lua_pushliteral(L,"ethereal:green_dirt");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,0.35);
  lua_createtable(L,1,0);
  lua_pushliteral(L,"grassytwo");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,1);
  lua_pushnumber(L,100);
  lua_createtable(L,4,0);
  lua_pushliteral(L,"default:grass_2");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"default:grass_3");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"default:grass_4");
  lua_rawseti(L,-2,3);
  lua_pushliteral(L,"default:grass_5");
  lua_rawseti(L,-2,4);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"grassytwo");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,10,0);
  assert(lua_gettop(L) - lc_nextra == 6);
  
  /* add_node({"ethereal:green_dirt"}, 0.35, {"jumble"}, 1, 100, {"default:grass_2", "default:grass_3",
   * 	"default:grass_4", "default:grass_5"}, nil, nil, nil, ethereal.jumble) */
  lua_pushvalue(L,(5 + lc_nextra));
  lua_createtable(L,1,0);
  lua_pushliteral(L,"ethereal:green_dirt");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,0.35);
  lua_createtable(L,1,0);
  lua_pushliteral(L,"jumble");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,1);
  lua_pushnumber(L,100);
  lua_createtable(L,4,0);
  lua_pushliteral(L,"default:grass_2");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"default:grass_3");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"default:grass_4");
  lua_rawseti(L,-2,3);
  lua_pushliteral(L,"default:grass_5");
  lua_rawseti(L,-2,4);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"jumble");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,10,0);
  assert(lua_gettop(L) - lc_nextra == 6);
  
  /* add_node({"ethereal:jungle_dirt"}, 0.35, {"junglee"}, 1, 100, {"default:grass_2", "default:grass_3",
   * 	"default:grass_4", "default:grass_5"}, nil, nil, nil, ethereal.junglee) */
  lua_pushvalue(L,(5 + lc_nextra));
  lua_createtable(L,1,0);
  lua_pushliteral(L,"ethereal:jungle_dirt");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,0.35);
  lua_createtable(L,1,0);
  lua_pushliteral(L,"junglee");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,1);
  lua_pushnumber(L,100);
  lua_createtable(L,4,0);
  lua_pushliteral(L,"default:grass_2");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"default:grass_3");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"default:grass_4");
  lua_rawseti(L,-2,3);
  lua_pushliteral(L,"default:grass_5");
  lua_rawseti(L,-2,4);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"junglee");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,10,0);
  assert(lua_gettop(L) - lc_nextra == 6);
  
  /* add_node({"ethereal:prairie_dirt"}, 0.35, {"prairie"}, 1, 100, {"default:grass_2", "default:grass_3",
   * 	"default:grass_4", "default:grass_5"}, nil, nil, nil, ethereal.prairie) */
  lua_pushvalue(L,(5 + lc_nextra));
  lua_createtable(L,1,0);
  lua_pushliteral(L,"ethereal:prairie_dirt");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,0.35);
  lua_createtable(L,1,0);
  lua_pushliteral(L,"prairie");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,1);
  lua_pushnumber(L,100);
  lua_createtable(L,4,0);
  lua_pushliteral(L,"default:grass_2");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"default:grass_3");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"default:grass_4");
  lua_rawseti(L,-2,3);
  lua_pushliteral(L,"default:grass_5");
  lua_rawseti(L,-2,4);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"prairie");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,10,0);
  assert(lua_gettop(L) - lc_nextra == 6);
  
  /* add_node({"ethereal:grove_dirt"}, 0.35, {"grove"}, 1, 100, {"default:grass_2", "default:grass_3",
   * 	"default:grass_4", "default:grass_5"}, nil, nil, nil, ethereal.grove) */
  lua_pushvalue(L,(5 + lc_nextra));
  lua_createtable(L,1,0);
  lua_pushliteral(L,"ethereal:grove_dirt");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,0.35);
  lua_createtable(L,1,0);
  lua_pushliteral(L,"grove");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,1);
  lua_pushnumber(L,100);
  lua_createtable(L,4,0);
  lua_pushliteral(L,"default:grass_2");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"default:grass_3");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"default:grass_4");
  lua_rawseti(L,-2,3);
  lua_pushliteral(L,"default:grass_5");
  lua_rawseti(L,-2,4);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"grove");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,10,0);
  assert(lua_gettop(L) - lc_nextra == 6);
  
  /* add_node({"ethereal:bamboo_dirt"}, 0.35, {"bamboo"}, 1, 100, {"default:grass_2", "default:grass_3",
   * 	"default:grass_4", "default:grass_5"}, nil, nil, nil, ethereal.bamboo) */
  lua_pushvalue(L,(5 + lc_nextra));
  lua_createtable(L,1,0);
  lua_pushliteral(L,"ethereal:bamboo_dirt");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,0.35);
  lua_createtable(L,1,0);
  lua_pushliteral(L,"bamboo");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,1);
  lua_pushnumber(L,100);
  lua_createtable(L,4,0);
  lua_pushliteral(L,"default:grass_2");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"default:grass_3");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"default:grass_4");
  lua_rawseti(L,-2,3);
  lua_pushliteral(L,"default:grass_5");
  lua_rawseti(L,-2,4);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"bamboo");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,10,0);
  assert(lua_gettop(L) - lc_nextra == 6);
  
  /* add_node({"ethereal:green_dirt"}, 0.25, {"clearing"}, 1, 100, {"default:grass_2", "default:grass_3",
   * 	"default:grass_4"}, nil, nil, nil, 1) */
  lua_pushvalue(L,(5 + lc_nextra));
  lua_createtable(L,1,0);
  lua_pushliteral(L,"ethereal:green_dirt");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,0.25);
  lua_createtable(L,1,0);
  lua_pushliteral(L,"clearing");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,1);
  lua_pushnumber(L,100);
  lua_createtable(L,3,0);
  lua_pushliteral(L,"default:grass_2");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"default:grass_3");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"default:grass_4");
  lua_rawseti(L,-2,3);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnumber(L,1);
  lua_call(L,10,0);
  assert(lua_gettop(L) - lc_nextra == 6);
  
  /* -- grass on sand
   * add_node({"default:sand"}, 0.25, {"sandclay"}, 3, 3, {"default:grass_2", "default:grass_3"}, nil, nil, nil, ethereal.sandclay) */
  lua_pushvalue(L,(5 + lc_nextra));
  lua_createtable(L,1,0);
  lua_pushliteral(L,"default:sand");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,0.25);
  lua_createtable(L,1,0);
  lua_pushliteral(L,"sandclay");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,3);
  lua_pushnumber(L,3);
  lua_createtable(L,2,0);
  lua_pushliteral(L,"default:grass_2");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"default:grass_3");
  lua_rawseti(L,-2,2);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"sandclay");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,10,0);
  assert(lua_gettop(L) - lc_nextra == 6);
  
  /* -- ferns
   * add_node({"ethereal:grove_dirt"}, 0.2, {"grove"}, 1, 100, {"ethereal:fern"}, nil, nil, nil, ethereal.grove) */
  lua_pushvalue(L,(5 + lc_nextra));
  lua_createtable(L,1,0);
  lua_pushliteral(L,"ethereal:grove_dirt");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,0.2);
  lua_createtable(L,1,0);
  lua_pushliteral(L,"grove");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,1);
  lua_pushnumber(L,100);
  lua_createtable(L,1,0);
  lua_pushliteral(L,"ethereal:fern");
  lua_rawseti(L,-2,1);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"grove");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,10,0);
  assert(lua_gettop(L) - lc_nextra == 6);
  
  /* -- snow
   * add_node({"ethereal:cold_dirt"}, 0.8, {"snowy"}, 4, 40, {"default:snow"}, nil, nil, nil, ethereal.snowy) */
  lua_pushvalue(L,(5 + lc_nextra));
  lua_createtable(L,1,0);
  lua_pushliteral(L,"ethereal:cold_dirt");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,0.8);
  lua_createtable(L,1,0);
  lua_pushliteral(L,"snowy");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,4);
  lua_pushnumber(L,40);
  lua_createtable(L,1,0);
  lua_pushliteral(L,"default:snow");
  lua_rawseti(L,-2,1);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"snowy");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,10,0);
  assert(lua_gettop(L) - lc_nextra == 6);
  
  /* add_node({"default:dirt_with_snow"}, 0.8, {"alpine"}, 40, 140, {"default:snow"}, nil, nil, nil, ethereal.alpine) */
  lua_pushvalue(L,(5 + lc_nextra));
  lua_createtable(L,1,0);
  lua_pushliteral(L,"default:dirt_with_snow");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,0.8);
  lua_createtable(L,1,0);
  lua_pushliteral(L,"alpine");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,40);
  lua_pushnumber(L,140);
  lua_createtable(L,1,0);
  lua_pushliteral(L,"default:snow");
  lua_rawseti(L,-2,1);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"alpine");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,10,0);
  assert(lua_gettop(L) - lc_nextra == 6);
  
  /* -- wild onion
   * add_node({"ethereal:green_dirt"}, 0.25, {"grassy"}, 1, 100, {"ethereal:onion_4"}, nil, nil, nil, ethereal.grassy) */
  lua_pushvalue(L,(5 + lc_nextra));
  lua_createtable(L,1,0);
  lua_pushliteral(L,"ethereal:green_dirt");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,0.25);
  lua_createtable(L,1,0);
  lua_pushliteral(L,"grassy");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,1);
  lua_pushnumber(L,100);
  lua_createtable(L,1,0);
  lua_pushliteral(L,"ethereal:onion_4");
  lua_rawseti(L,-2,1);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"grassy");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,10,0);
  assert(lua_gettop(L) - lc_nextra == 6);
  
  /* add_node({"ethereal:green_dirt"}, 0.25, {"grassytwo"}, 1, 100, {"ethereal:onion_4"}, nil, nil, nil, ethereal.grassytwo) */
  lua_pushvalue(L,(5 + lc_nextra));
  lua_createtable(L,1,0);
  lua_pushliteral(L,"ethereal:green_dirt");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,0.25);
  lua_createtable(L,1,0);
  lua_pushliteral(L,"grassytwo");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,1);
  lua_pushnumber(L,100);
  lua_createtable(L,1,0);
  lua_pushliteral(L,"ethereal:onion_4");
  lua_rawseti(L,-2,1);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"grassytwo");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,10,0);
  assert(lua_gettop(L) - lc_nextra == 6);
  
  /* add_node({"ethereal:green_dirt"}, 0.25, {"jumble"}, 1, 100, {"ethereal:onion_4"}, nil, nil, nil, ethereal.jumble) */
  lua_pushvalue(L,(5 + lc_nextra));
  lua_createtable(L,1,0);
  lua_pushliteral(L,"ethereal:green_dirt");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,0.25);
  lua_createtable(L,1,0);
  lua_pushliteral(L,"jumble");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,1);
  lua_pushnumber(L,100);
  lua_createtable(L,1,0);
  lua_pushliteral(L,"ethereal:onion_4");
  lua_rawseti(L,-2,1);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"jumble");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,10,0);
  assert(lua_gettop(L) - lc_nextra == 6);
  
  /* add_node({"ethereal:prairie_dirt"}, 0.25, {"prairie"}, 1, 100, {"ethereal:onion_4"}, nil, nil, nil, ethereal.prairie) */
  lua_pushvalue(L,(5 + lc_nextra));
  lua_createtable(L,1,0);
  lua_pushliteral(L,"ethereal:prairie_dirt");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,0.25);
  lua_createtable(L,1,0);
  lua_pushliteral(L,"prairie");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,1);
  lua_pushnumber(L,100);
  lua_createtable(L,1,0);
  lua_pushliteral(L,"ethereal:onion_4");
  lua_rawseti(L,-2,1);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_pushnil(L);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"prairie");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,10,0);
  assert(lua_gettop(L) - lc_nextra == 6);
  
  /* -- papyrus
   * add_node({"ethereal:green_dirt"}, 0.1, {"grassy"}, 1, 1, {"default:papyrus"}, 4, "default:water_source", 1, ethereal.grassy) */
  lua_pushvalue(L,(5 + lc_nextra));
  lua_createtable(L,1,0);
  lua_pushliteral(L,"ethereal:green_dirt");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,0.1);
  lua_createtable(L,1,0);
  lua_pushliteral(L,"grassy");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,1);
  lua_pushnumber(L,1);
  lua_createtable(L,1,0);
  lua_pushliteral(L,"default:papyrus");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,4);
  lua_pushliteral(L,"default:water_source");
  lua_pushnumber(L,1);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"grassy");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,10,0);
  assert(lua_gettop(L) - lc_nextra == 6);
  
  /* add_node({"ethereal:jungle_dirt"}, 0.1, {"junglee"}, 1, 1, {"default:papyrus"}, 4, "default:water_source", 1, ethereal.junglee) */
  lua_pushvalue(L,(5 + lc_nextra));
  lua_createtable(L,1,0);
  lua_pushliteral(L,"ethereal:jungle_dirt");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,0.1);
  lua_createtable(L,1,0);
  lua_pushliteral(L,"junglee");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,1);
  lua_pushnumber(L,1);
  lua_createtable(L,1,0);
  lua_pushliteral(L,"default:papyrus");
  lua_rawseti(L,-2,1);
  lua_pushnumber(L,4);
  lua_pushliteral(L,"default:water_source");
  lua_pushnumber(L,1);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"junglee");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,10,0);
  assert(lua_gettop(L) - lc_nextra == 6);
  
  /* --= Farming Redo plants
   * if farming and farming.mod and farming.mod == "redo" then */
  enum { lc17 = 6 };
  lua_getfield(L,LUA_ENVIRONINDEX,"farming");
  if (lua_toboolean(L,-1)) {
    lua_pop(L,1);
    lua_getfield(L,LUA_ENVIRONINDEX,"farming");
    lua_pushliteral(L,"mod");
    lua_gettable(L,-2);
    lua_remove(L,-2);
  }
  if (lua_toboolean(L,-1)) {
    lua_pop(L,1);
    lua_getfield(L,LUA_ENVIRONINDEX,"farming");
    lua_pushliteral(L,"mod");
    lua_gettable(L,-2);
    lua_remove(L,-2);
    lua_pushliteral(L,"redo");
    const int lc18 = lua_equal(L,-2,-1);
    lua_pop(L,2);
    lua_pushboolean(L,lc18);
  }
  const int lc19 = lua_toboolean(L,-1);
  lua_pop(L,1);
  if (lc19) {
    
    /* print ("[MOD] Ethereal - Farming Redo detected and in use") */
    lua_getfield(L,LUA_ENVIRONINDEX,"print");
    lua_pushliteral(L,"[MOD] Ethereal - Farming Redo detected and in use");
    lua_call(L,1,0);
    assert(lua_gettop(L) - lc_nextra == 6);
    
    /* -- potato
     * add_node({"ethereal:jungle_dirt"}, 0.035, {"junglee"}, 1, 100, {"farming:potato_3"}, nil, nil, nil, ethereal.junglee) */
    lua_pushvalue(L,(5 + lc_nextra));
    lua_createtable(L,1,0);
    lua_pushliteral(L,"ethereal:jungle_dirt");
    lua_rawseti(L,-2,1);
    lua_pushnumber(L,0.035);
    lua_createtable(L,1,0);
    lua_pushliteral(L,"junglee");
    lua_rawseti(L,-2,1);
    lua_pushnumber(L,1);
    lua_pushnumber(L,100);
    lua_createtable(L,1,0);
    lua_pushliteral(L,"farming:potato_3");
    lua_rawseti(L,-2,1);
    lua_pushnil(L);
    lua_pushnil(L);
    lua_pushnil(L);
    lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
    lua_pushliteral(L,"junglee");
    lua_gettable(L,-2);
    lua_remove(L,-2);
    lua_call(L,10,0);
    assert(lua_gettop(L) - lc_nextra == 6);
    
    /* -- carrot, cucumber, potato, tomato, corn, coffee, raspberry, rhubarb
     * add_node({"ethereal:green_dirt"}, 0.05, {"grassytwo"}, 1, 100, {"farming:carrot_7", "farming:cucumber_4",
     * 	"farming:potato_3", "farming:tomato_7", "farming:corn_8", "farming:coffee_5",
     * 	"farming:raspberry_4", "farming:rhubarb_3", "farming:blueberry_4"}, nil, nil, nil, ethereal.grassytwo) */
    lua_pushvalue(L,(5 + lc_nextra));
    lua_createtable(L,1,0);
    lua_pushliteral(L,"ethereal:green_dirt");
    lua_rawseti(L,-2,1);
    lua_pushnumber(L,0.05);
    lua_createtable(L,1,0);
    lua_pushliteral(L,"grassytwo");
    lua_rawseti(L,-2,1);
    lua_pushnumber(L,1);
    lua_pushnumber(L,100);
    lua_createtable(L,9,0);
    lua_pushliteral(L,"farming:carrot_7");
    lua_rawseti(L,-2,1);
    lua_pushliteral(L,"farming:cucumber_4");
    lua_rawseti(L,-2,2);
    lua_pushliteral(L,"farming:potato_3");
    lua_rawseti(L,-2,3);
    lua_pushliteral(L,"farming:tomato_7");
    lua_rawseti(L,-2,4);
    lua_pushliteral(L,"farming:corn_8");
    lua_rawseti(L,-2,5);
    lua_pushliteral(L,"farming:coffee_5");
    lua_rawseti(L,-2,6);
    lua_pushliteral(L,"farming:raspberry_4");
    lua_rawseti(L,-2,7);
    lua_pushliteral(L,"farming:rhubarb_3");
    lua_rawseti(L,-2,8);
    lua_pushliteral(L,"farming:blueberry_4");
    lua_rawseti(L,-2,9);
    lua_pushnil(L);
    lua_pushnil(L);
    lua_pushnil(L);
    lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
    lua_pushliteral(L,"grassytwo");
    lua_gettable(L,-2);
    lua_remove(L,-2);
    lua_call(L,10,0);
    assert(lua_gettop(L) - lc_nextra == 6);
    
    /* add_node({"ethereal:green_dirt"}, 0.05, {"grassy"}, 1, 100, {"farming:carrot_7", "farming:cucumber_4",
     * 	"farming:potato_3", "farming:tomato_7", "farming:corn_8", "farming:coffee_5",
     * 	"farming:raspberry_4", "farming:rhubarb_3", "farming:blueberry_4"}, nil, nil, nil, ethereal.grassy) */
    lua_pushvalue(L,(5 + lc_nextra));
    lua_createtable(L,1,0);
    lua_pushliteral(L,"ethereal:green_dirt");
    lua_rawseti(L,-2,1);
    lua_pushnumber(L,0.05);
    lua_createtable(L,1,0);
    lua_pushliteral(L,"grassy");
    lua_rawseti(L,-2,1);
    lua_pushnumber(L,1);
    lua_pushnumber(L,100);
    lua_createtable(L,9,0);
    lua_pushliteral(L,"farming:carrot_7");
    lua_rawseti(L,-2,1);
    lua_pushliteral(L,"farming:cucumber_4");
    lua_rawseti(L,-2,2);
    lua_pushliteral(L,"farming:potato_3");
    lua_rawseti(L,-2,3);
    lua_pushliteral(L,"farming:tomato_7");
    lua_rawseti(L,-2,4);
    lua_pushliteral(L,"farming:corn_8");
    lua_rawseti(L,-2,5);
    lua_pushliteral(L,"farming:coffee_5");
    lua_rawseti(L,-2,6);
    lua_pushliteral(L,"farming:raspberry_4");
    lua_rawseti(L,-2,7);
    lua_pushliteral(L,"farming:rhubarb_3");
    lua_rawseti(L,-2,8);
    lua_pushliteral(L,"farming:blueberry_4");
    lua_rawseti(L,-2,9);
    lua_pushnil(L);
    lua_pushnil(L);
    lua_pushnil(L);
    lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
    lua_pushliteral(L,"grassy");
    lua_gettable(L,-2);
    lua_remove(L,-2);
    lua_call(L,10,0);
    assert(lua_gettop(L) - lc_nextra == 6);
    
    /* add_node({"ethereal:green_dirt"}, 0.05, {"jumble"}, 1, 100, {"farming:carrot_7", "farming:cucumber_4",
     * 	"farming:potato_3", "farming:tomato_7", "farming:corn_8", "farming:coffee_5",
     * 	"farming:raspberry_4", "farming:rhubarb_3", "farming:blueberry_4"}, nil, nil, nil, ethereal.jumble) */
    lua_pushvalue(L,(5 + lc_nextra));
    lua_createtable(L,1,0);
    lua_pushliteral(L,"ethereal:green_dirt");
    lua_rawseti(L,-2,1);
    lua_pushnumber(L,0.05);
    lua_createtable(L,1,0);
    lua_pushliteral(L,"jumble");
    lua_rawseti(L,-2,1);
    lua_pushnumber(L,1);
    lua_pushnumber(L,100);
    lua_createtable(L,9,0);
    lua_pushliteral(L,"farming:carrot_7");
    lua_rawseti(L,-2,1);
    lua_pushliteral(L,"farming:cucumber_4");
    lua_rawseti(L,-2,2);
    lua_pushliteral(L,"farming:potato_3");
    lua_rawseti(L,-2,3);
    lua_pushliteral(L,"farming:tomato_7");
    lua_rawseti(L,-2,4);
    lua_pushliteral(L,"farming:corn_8");
    lua_rawseti(L,-2,5);
    lua_pushliteral(L,"farming:coffee_5");
    lua_rawseti(L,-2,6);
    lua_pushliteral(L,"farming:raspberry_4");
    lua_rawseti(L,-2,7);
    lua_pushliteral(L,"farming:rhubarb_3");
    lua_rawseti(L,-2,8);
    lua_pushliteral(L,"farming:blueberry_4");
    lua_rawseti(L,-2,9);
    lua_pushnil(L);
    lua_pushnil(L);
    lua_pushnil(L);
    lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
    lua_pushliteral(L,"jumble");
    lua_gettable(L,-2);
    lua_remove(L,-2);
    lua_call(L,10,0);
    assert(lua_gettop(L) - lc_nextra == 6);
    
    /* add_node({"ethereal:prairie_dirt"}, 0.05, {"prairie"}, 1, 100, {"farming:carrot_7", "farming:cucumber_4",
     * 	"farming:potato_3", "farming:tomato_7", "farming:corn_8", "farming:coffee_5",
     * 	"farming:raspberry_4", "farming:rhubarb_3", "farming:blueberry_4"}, nil, nil, nil, ethereal.prairie) */
    lua_pushvalue(L,(5 + lc_nextra));
    lua_createtable(L,1,0);
    lua_pushliteral(L,"ethereal:prairie_dirt");
    lua_rawseti(L,-2,1);
    lua_pushnumber(L,0.05);
    lua_createtable(L,1,0);
    lua_pushliteral(L,"prairie");
    lua_rawseti(L,-2,1);
    lua_pushnumber(L,1);
    lua_pushnumber(L,100);
    lua_createtable(L,9,0);
    lua_pushliteral(L,"farming:carrot_7");
    lua_rawseti(L,-2,1);
    lua_pushliteral(L,"farming:cucumber_4");
    lua_rawseti(L,-2,2);
    lua_pushliteral(L,"farming:potato_3");
    lua_rawseti(L,-2,3);
    lua_pushliteral(L,"farming:tomato_7");
    lua_rawseti(L,-2,4);
    lua_pushliteral(L,"farming:corn_8");
    lua_rawseti(L,-2,5);
    lua_pushliteral(L,"farming:coffee_5");
    lua_rawseti(L,-2,6);
    lua_pushliteral(L,"farming:raspberry_4");
    lua_rawseti(L,-2,7);
    lua_pushliteral(L,"farming:rhubarb_3");
    lua_rawseti(L,-2,8);
    lua_pushliteral(L,"farming:blueberry_4");
    lua_rawseti(L,-2,9);
    lua_pushnil(L);
    lua_pushnil(L);
    lua_pushnil(L);
    lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
    lua_pushliteral(L,"prairie");
    lua_gettable(L,-2);
    lua_remove(L,-2);
    lua_call(L,10,0);
    assert(lua_gettop(L) - lc_nextra == 6);
    
    /* -- melon and pumpkin
     * add_node({"ethereal:jungle_dirt"}, 0.015, {"junglee"}, 1, 1, {"farming:melon_8", "farming:pumpkin_8"}, nil, "default:water_source", 1, ethereal.junglee) */
    lua_pushvalue(L,(5 + lc_nextra));
    lua_createtable(L,1,0);
    lua_pushliteral(L,"ethereal:jungle_dirt");
    lua_rawseti(L,-2,1);
    lua_pushnumber(L,0.015);
    lua_createtable(L,1,0);
    lua_pushliteral(L,"junglee");
    lua_rawseti(L,-2,1);
    lua_pushnumber(L,1);
    lua_pushnumber(L,1);
    lua_createtable(L,2,0);
    lua_pushliteral(L,"farming:melon_8");
    lua_rawseti(L,-2,1);
    lua_pushliteral(L,"farming:pumpkin_8");
    lua_rawseti(L,-2,2);
    lua_pushnil(L);
    lua_pushliteral(L,"default:water_source");
    lua_pushnumber(L,1);
    lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
    lua_pushliteral(L,"junglee");
    lua_gettable(L,-2);
    lua_remove(L,-2);
    lua_call(L,10,0);
    assert(lua_gettop(L) - lc_nextra == 6);
    
    /* add_node({"ethereal:green_dirt"}, 0.015, {"grassy"}, 1, 1, {"farming:melon_8", "farming:pumpkin_8"}, nil, "default:water_source", 1, ethereal.grassy) */
    lua_pushvalue(L,(5 + lc_nextra));
    lua_createtable(L,1,0);
    lua_pushliteral(L,"ethereal:green_dirt");
    lua_rawseti(L,-2,1);
    lua_pushnumber(L,0.015);
    lua_createtable(L,1,0);
    lua_pushliteral(L,"grassy");
    lua_rawseti(L,-2,1);
    lua_pushnumber(L,1);
    lua_pushnumber(L,1);
    lua_createtable(L,2,0);
    lua_pushliteral(L,"farming:melon_8");
    lua_rawseti(L,-2,1);
    lua_pushliteral(L,"farming:pumpkin_8");
    lua_rawseti(L,-2,2);
    lua_pushnil(L);
    lua_pushliteral(L,"default:water_source");
    lua_pushnumber(L,1);
    lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
    lua_pushliteral(L,"grassy");
    lua_gettable(L,-2);
    lua_remove(L,-2);
    lua_call(L,10,0);
    assert(lua_gettop(L) - lc_nextra == 6);
    
    /* add_node({"ethereal:green_dirt"}, 0.015, {"grassytwo"}, 1, 1, {"farming:melon_8", "farming:pumpkin_8"}, nil, "default:water_source", 1, ethereal.grassytwo) */
    lua_pushvalue(L,(5 + lc_nextra));
    lua_createtable(L,1,0);
    lua_pushliteral(L,"ethereal:green_dirt");
    lua_rawseti(L,-2,1);
    lua_pushnumber(L,0.015);
    lua_createtable(L,1,0);
    lua_pushliteral(L,"grassytwo");
    lua_rawseti(L,-2,1);
    lua_pushnumber(L,1);
    lua_pushnumber(L,1);
    lua_createtable(L,2,0);
    lua_pushliteral(L,"farming:melon_8");
    lua_rawseti(L,-2,1);
    lua_pushliteral(L,"farming:pumpkin_8");
    lua_rawseti(L,-2,2);
    lua_pushnil(L);
    lua_pushliteral(L,"default:water_source");
    lua_pushnumber(L,1);
    lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
    lua_pushliteral(L,"grassytwo");
    lua_gettable(L,-2);
    lua_remove(L,-2);
    lua_call(L,10,0);
    assert(lua_gettop(L) - lc_nextra == 6);
    
    /* add_node({"ethereal:green_dirt"}, 0.015, {"jumble"}, 1, 1, {"farming:melon_8", "farming:pumpkin_8"}, nil, "default:water_source", 1, ethereal.jumble) */
    lua_pushvalue(L,(5 + lc_nextra));
    lua_createtable(L,1,0);
    lua_pushliteral(L,"ethereal:green_dirt");
    lua_rawseti(L,-2,1);
    lua_pushnumber(L,0.015);
    lua_createtable(L,1,0);
    lua_pushliteral(L,"jumble");
    lua_rawseti(L,-2,1);
    lua_pushnumber(L,1);
    lua_pushnumber(L,1);
    lua_createtable(L,2,0);
    lua_pushliteral(L,"farming:melon_8");
    lua_rawseti(L,-2,1);
    lua_pushliteral(L,"farming:pumpkin_8");
    lua_rawseti(L,-2,2);
    lua_pushnil(L);
    lua_pushliteral(L,"default:water_source");
    lua_pushnumber(L,1);
    lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
    lua_pushliteral(L,"jumble");
    lua_gettable(L,-2);
    lua_remove(L,-2);
    lua_call(L,10,0);
    assert(lua_gettop(L) - lc_nextra == 6);
    
    /* -- green beans
     * add_node({"ethereal:green_dirt"}, 0.035, {"grassytwo"}, 1, 100, {"farming:beanbush"}, nil, nil, nil, ethereal.grassytwo) */
    lua_pushvalue(L,(5 + lc_nextra));
    lua_createtable(L,1,0);
    lua_pushliteral(L,"ethereal:green_dirt");
    lua_rawseti(L,-2,1);
    lua_pushnumber(L,0.035);
    lua_createtable(L,1,0);
    lua_pushliteral(L,"grassytwo");
    lua_rawseti(L,-2,1);
    lua_pushnumber(L,1);
    lua_pushnumber(L,100);
    lua_createtable(L,1,0);
    lua_pushliteral(L,"farming:beanbush");
    lua_rawseti(L,-2,1);
    lua_pushnil(L);
    lua_pushnil(L);
    lua_pushnil(L);
    lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
    lua_pushliteral(L,"grassytwo");
    lua_gettable(L,-2);
    lua_remove(L,-2);
    lua_call(L,10,0);
    assert(lua_gettop(L) - lc_nextra == 6);
    
    /* -- grape bushel
     * add_node({"ethereal:green_dirt"}, 0.025, {"grassytwo"}, 1, 100, {"farming:grapebush"}, nil, nil, nil, ethereal.grassytwo) */
    lua_pushvalue(L,(5 + lc_nextra));
    lua_createtable(L,1,0);
    lua_pushliteral(L,"ethereal:green_dirt");
    lua_rawseti(L,-2,1);
    lua_pushnumber(L,0.025);
    lua_createtable(L,1,0);
    lua_pushliteral(L,"grassytwo");
    lua_rawseti(L,-2,1);
    lua_pushnumber(L,1);
    lua_pushnumber(L,100);
    lua_createtable(L,1,0);
    lua_pushliteral(L,"farming:grapebush");
    lua_rawseti(L,-2,1);
    lua_pushnil(L);
    lua_pushnil(L);
    lua_pushnil(L);
    lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
    lua_pushliteral(L,"grassytwo");
    lua_gettable(L,-2);
    lua_remove(L,-2);
    lua_call(L,10,0);
    assert(lua_gettop(L) - lc_nextra == 6);
    
    /* add_node({"ethereal:green_dirt"}, 0.025, {"grassy"}, 1, 100, {"farming:grapebush"}, nil, nil, nil, ethereal.grassy) */
    lua_pushvalue(L,(5 + lc_nextra));
    lua_createtable(L,1,0);
    lua_pushliteral(L,"ethereal:green_dirt");
    lua_rawseti(L,-2,1);
    lua_pushnumber(L,0.025);
    lua_createtable(L,1,0);
    lua_pushliteral(L,"grassy");
    lua_rawseti(L,-2,1);
    lua_pushnumber(L,1);
    lua_pushnumber(L,100);
    lua_createtable(L,1,0);
    lua_pushliteral(L,"farming:grapebush");
    lua_rawseti(L,-2,1);
    lua_pushnil(L);
    lua_pushnil(L);
    lua_pushnil(L);
    lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
    lua_pushliteral(L,"grassy");
    lua_gettable(L,-2);
    lua_remove(L,-2);
    lua_call(L,10,0);
    assert(lua_gettop(L) - lc_nextra == 6);
    
    /* add_node({"ethereal:prairie_dirt"}, 0.025, {"prairie"}, 1, 100, {"farming:grapebush"}, nil, nil, nil, ethereal.prairie) */
    lua_pushvalue(L,(5 + lc_nextra));
    lua_createtable(L,1,0);
    lua_pushliteral(L,"ethereal:prairie_dirt");
    lua_rawseti(L,-2,1);
    lua_pushnumber(L,0.025);
    lua_createtable(L,1,0);
    lua_pushliteral(L,"prairie");
    lua_rawseti(L,-2,1);
    lua_pushnumber(L,1);
    lua_pushnumber(L,100);
    lua_createtable(L,1,0);
    lua_pushliteral(L,"farming:grapebush");
    lua_rawseti(L,-2,1);
    lua_pushnil(L);
    lua_pushnil(L);
    lua_pushnil(L);
    lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
    lua_pushliteral(L,"prairie");
    lua_gettable(L,-2);
    lua_remove(L,-2);
    lua_call(L,10,0);
    assert(lua_gettop(L) - lc_nextra == 6);
  }
  lua_settop(L,(lc17 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 6);
  
  /* -- place waterlily in beach areas
   * local list = {
   * 	{"desert_ocean", ethereal.desert},
   * 	{"plains_ocean", ethereal.plains},
   * 	{"sandclay", ethereal.sandclay},
   * 	{"sandstone_ocean", ethereal.sandstone},
   * 	{"mesa_ocean", ethereal.mesa},
   * 	{"grove_ocean", ethereal.grove},
   * 	{"grassy_ocean", ethereal.grassy},
   * } */
  lua_createtable(L,7,0);
  lua_createtable(L,2,0);
  lua_pushliteral(L,"desert_ocean");
  lua_rawseti(L,-2,1);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"desert");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_rawseti(L,-2,2);
  lua_rawseti(L,-2,1);
  lua_createtable(L,2,0);
  lua_pushliteral(L,"plains_ocean");
  lua_rawseti(L,-2,1);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"plains");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_rawseti(L,-2,2);
  lua_rawseti(L,-2,2);
  lua_createtable(L,2,0);
  lua_pushliteral(L,"sandclay");
  lua_rawseti(L,-2,1);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"sandclay");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_rawseti(L,-2,2);
  lua_rawseti(L,-2,3);
  lua_createtable(L,2,0);
  lua_pushliteral(L,"sandstone_ocean");
  lua_rawseti(L,-2,1);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"sandstone");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_rawseti(L,-2,2);
  lua_rawseti(L,-2,4);
  lua_createtable(L,2,0);
  lua_pushliteral(L,"mesa_ocean");
  lua_rawseti(L,-2,1);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"mesa");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_rawseti(L,-2,2);
  lua_rawseti(L,-2,5);
  lua_createtable(L,2,0);
  lua_pushliteral(L,"grove_ocean");
  lua_rawseti(L,-2,1);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"grove");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_rawseti(L,-2,2);
  lua_rawseti(L,-2,6);
  lua_createtable(L,2,0);
  lua_pushliteral(L,"grassy_ocean");
  lua_rawseti(L,-2,1);
  lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
  lua_pushliteral(L,"grassy");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_rawseti(L,-2,2);
  lua_rawseti(L,-2,7);
  assert(lua_gettop(L) - lc_nextra == 7);
  
  /* for _, row in pairs(list) do
   * internal: local f, s, var = explist */
  enum { lc20 = 7 };
  lua_getfield(L,LUA_ENVIRONINDEX,"pairs");
  lua_pushvalue(L,(7 + lc_nextra));
  lua_call(L,1,3);
  while (1) {
    
    /* internal: local var_1, ..., var_n = f(s, var)
     *           if var_1 == nil then break end
     *           var = var_1 */
    lua_pushvalue(L,-3);
    lua_pushvalue(L,-3);
    lua_pushvalue(L,-3);
    lua_call(L,2,2);
    if (lua_isnil(L,-2)) {
      break;
    }
    lua_pushvalue(L,-2);
    lua_replace(L,-4);
    
    /* internal: local _ with idx 11
     * internal: local row with idx 12 */
    
    
    /* if row[2] == 1 then */
    enum { lc21 = 12 };
    lua_pushnumber(L,2);
    lua_gettable(L,(12 + lc_nextra));
    lua_pushnumber(L,1);
    const int lc22 = lua_equal(L,-2,-1);
    lua_pop(L,2);
    lua_pushboolean(L,lc22);
    const int lc23 = lua_toboolean(L,-1);
    lua_pop(L,1);
    if (lc23) {
      
      /* minetest.register_decoration({
       * 		deco_type = "schematic",
       * 		place_on = {"default:sand"},
       * 		sidelen = 16,
       * 		noise_params = {
       * 			offset = -0.12,
       * 			scale = 0.3,
       * 			spread = {x = 200, y = 200, z = 200},
       * 			seed = 33,
       * 			octaves = 3,
       * 			persist = 0.7
       * 		},
       * 		biomes = {row[1]},
       * 		y_min = 0,
       * 		y_max = 0,
       * 		schematic = ethereal.waterlily,
       * 		rotation = "random",
       * 	}) */
      lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
      lua_pushliteral(L,"register_decoration");
      lua_gettable(L,-2);
      lua_remove(L,-2);
      lua_createtable(L,0,9);
      lua_pushliteral(L,"deco_type");
      lua_pushliteral(L,"schematic");
      lua_rawset(L,-3);
      lua_pushliteral(L,"place_on");
      lua_createtable(L,1,0);
      lua_pushliteral(L,"default:sand");
      lua_rawseti(L,-2,1);
      lua_rawset(L,-3);
      lua_pushliteral(L,"sidelen");
      lua_pushnumber(L,16);
      lua_rawset(L,-3);
      lua_pushliteral(L,"noise_params");
      lua_createtable(L,0,6);
      lua_pushliteral(L,"offset");
      lua_pushnumber(L,-0.12);
      lua_rawset(L,-3);
      lua_pushliteral(L,"scale");
      lua_pushnumber(L,0.3);
      lua_rawset(L,-3);
      lua_pushliteral(L,"spread");
      lua_createtable(L,0,3);
      lua_pushliteral(L,"x");
      lua_pushnumber(L,200);
      lua_rawset(L,-3);
      lua_pushliteral(L,"y");
      lua_pushnumber(L,200);
      lua_rawset(L,-3);
      lua_pushliteral(L,"z");
      lua_pushnumber(L,200);
      lua_rawset(L,-3);
      lua_rawset(L,-3);
      lua_pushliteral(L,"seed");
      lua_pushnumber(L,33);
      lua_rawset(L,-3);
      lua_pushliteral(L,"octaves");
      lua_pushnumber(L,3);
      lua_rawset(L,-3);
      lua_pushliteral(L,"persist");
      lua_pushnumber(L,0.7);
      lua_rawset(L,-3);
      lua_rawset(L,-3);
      lua_pushliteral(L,"biomes");
      lua_createtable(L,1,0);
      lua_pushnumber(L,1);
      lua_gettable(L,(12 + lc_nextra));
      lua_rawseti(L,-2,1);
      lua_rawset(L,-3);
      lua_pushliteral(L,"y_min");
      lua_pushnumber(L,0);
      lua_rawset(L,-3);
      lua_pushliteral(L,"y_max");
      lua_pushnumber(L,0);
      lua_rawset(L,-3);
      lua_pushliteral(L,"schematic");
      lua_getfield(L,LUA_ENVIRONINDEX,"ethereal");
      lua_pushliteral(L,"waterlily");
      lua_gettable(L,-2);
      lua_remove(L,-2);
      lua_rawset(L,-3);
      lua_pushliteral(L,"rotation");
      lua_pushliteral(L,"random");
      lua_rawset(L,-3);
      lua_call(L,1,0);
      assert(lua_gettop(L) - lc_nextra == 12);
    }
    lua_settop(L,(lc21 + lc_nextra));
    assert(lua_gettop(L) - lc_nextra == 12);
    
    /* internal: stack cleanup on scope exit */
    lua_pop(L,2);
  }
  lua_settop(L,(lc20 + lc_nextra));
  assert(lua_gettop(L) - lc_nextra == 7);
  
  /* -- Generate Illumishroom in caves next to coal
   * minetest.register_on_generated(function(minp, maxp)
   * 
   * 	if minp.y > -30 or maxp.y < -3000 then
   * 		return
   * 	end
   * 
   * 	local bpos
   * 	local coal = minetest.find_nodes_in_area_under_air(minp, maxp, "default:stone_with_coal")
   * 
   * 	for n = 1, #coal do
   * 
   * 		bpos = {x = coal[n].x, y = coal[n].y + 1, z = coal[n].z }
   * 
   * 		if math.random(1, 2) == 1 then
   * 
   * 			if bpos.y > -3000 and bpos.y < -2000 then
   * 				minetest.swap_node(bpos, {name = "ethereal:illumishroom3"})
   * 
   * 			elseif bpos.y > -2000 and bpos.y < -1000 then
   * 				minetest.swap_node(bpos, {name = "ethereal:illumishroom2"})
   * 
   * 			elseif bpos.y > -1000 and bpos.y < -30 then
   * 				minetest.swap_node(bpos, {name = "ethereal:illumishroom"})
   * 			end
   * 		end
   * 	end
   * end) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_on_generated");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_pushcfunction(L,lcf48);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 7);
  return 0;
}


/* from lua.c */
static int traceback (lua_State *L) {
  if (!lua_isstring(L, 1))  /* 'message' not a string? */
    return 1;  /* keep it intact */
  lua_getfield(L, LUA_GLOBALSINDEX, "debug");
  if (!lua_istable(L, -1)) {
    lua_pop(L, 1);
    return 1;
  }
  lua_getfield(L, -1, "traceback");
  if (!lua_isfunction(L, -1)) {
    lua_pop(L, 2);
    return 1;
  }
  lua_pushvalue(L, 1);  /* pass error message */
  lua_pushinteger(L, 2);  /* skip this function and traceback */
  lua_call(L, 2, 1);  /* call debug.traceback */
  return 1;
}


static void lc_l_message (const char *pname, const char *msg) {
  if (pname) fprintf(stderr, "%s: ", pname);
  fprintf(stderr, "%s\n", msg);
  fflush(stderr);
}

static int lc_report (lua_State *L, int status) {
  if (status && !lua_isnil(L, -1)) {
    const char *msg = lua_tostring(L, -1);
    if (msg == NULL) msg = "(error object is not a string)";
    /*FIX-IMROVE:progname*/
    lc_l_message("lua", msg);
    lua_pop(L, 1);
  }
  return status;
}

static int lc_docall (lua_State *L, int narg, int clear) {
  int status;
  int base = lua_gettop(L) - narg;  /* function index */
  lua_pushcfunction(L, traceback);  /* push traceback function */
  lua_insert(L, base);  /* put it under chunk and args */
  /*FIX? signal(SIGINT, laction); */
  status = lua_pcall(L, narg, (clear ? 0 : LUA_MULTRET), base);
  /*FIX? signal(SIGINT, SIG_DFL); */
  lua_remove(L, base);  /* remove traceback function */
  /* force a complete garbage collection in case of errors */
  if (status != 0) lua_gc(L, LUA_GCCOLLECT, 0);
  return status;
}

static int lc_dofile (lua_State *L, const char *name) {
  int status = luaL_loadfile(L, name) || lc_docall(L, 0, 1);
  return lc_report(L, status);
}

static int lc_dostring (lua_State *L, const char *s, const char *name) {
  int status = luaL_loadbuffer(L, s, strlen(s), name) || lc_docall(L, 0, 1);
  return lc_report(L, status);
}

static int lc_handle_luainit (lua_State *L) {
  const char *init = getenv(LUA_INIT);
  if (init == NULL) return 0;  /* status OK */
  else if (init[0] == '@')
    return lc_dofile(L, init+1);
  else
    return lc_dostring(L, init, "=" LUA_INIT);
}


typedef struct {
  int c;
  const char ** v;
} lc_args_t;


/* create global arg table */
static void lc_createarg(lua_State * L, const lc_args_t * const args) {
  int i;
  lua_newtable(L);
  for (i=0; i < args->c; i++) {
    lua_pushstring(L, args->v[i]);
    lua_rawseti(L, -2, i);
  }
  lua_setglobal(L, "arg");
}


int lc_pmain_mod_ethereal_mapgen(lua_State * L) {
  luaL_openlibs(L);

  lua_pushcfunction(L, traceback);

  const int status1 = lc_handle_luainit(L);
  if (status1 != 0) return 0;

  /* note: IMPROVE: closure not always needed here */
  lua_newtable(L); /* closure table */
  lua_pushcclosure(L, lcf_main, 1);

  int status2 = lua_pcall(L, 0, 0, -2);
  if (status2 != 0) {
    const char * msg = lua_tostring(L,-1);
    if (msg == NULL) msg = "(error object is not a string)";
    fputs(msg, stderr);
  }
  return 0;
}


