/* WARNING: This file was automatically generated by lua2c. */

#ifdef __cplusplus
extern "C" {
#endif
#include <lua.h>
#include <lauxlib.h>
#include <lualib.h>
#ifdef __cplusplus
}
#endif
#include <stdio.h>
#include <stdlib.h>


#include <string.h>


#include <assert.h>

#include "cpp_mods/cpp_mods_init.h"

/* name: (main)
 * function(...) */
static int lcf_main (lua_State * L) {
  enum { lc_nformalargs = 0 };
  #ifndef NDEBUG
  const int lc_nactualargs = lua_gettop(L);
  #endif
  #ifndef NDEBUG
  const int lc_nextra = (lc_nactualargs - lc_nformalargs);
  #endif
  
  /* print (" ---- Dark Age is Loading! ---- ") */
  lua_getfield(L,LUA_ENVIRONINDEX,"print");
  lua_pushliteral(L," ---- Dark Age is Loading! ---- ");
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* -- Commend this lines if you don't like some of this features
   * dofile(minetest.get_modpath("darkage").."/mapgen.lua") */
  lc_pmain_mod_darkage_mapgen(L);
  /*
  lua_getfield(L,LUA_ENVIRONINDEX,"dofile");
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"get_modpath");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_pushliteral(L,"darkage");
  lua_call(L,1,1);
  lua_pushliteral(L,"/mapgen.lua");
  lua_concat(L,2);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 0);*/
  
  /* dofile(minetest.get_modpath("darkage").."/building.lua") */
  lc_pmain_mod_darkage_building(L);
  /*
  lua_getfield(L,LUA_ENVIRONINDEX,"dofile");
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"get_modpath");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_pushliteral(L,"darkage");
  lua_call(L,1,1);
  lua_pushliteral(L,"/building.lua");
  lua_concat(L,2);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 0);*/
  
  /* dofile(minetest.get_modpath("darkage").."/furniture.lua") */
  lc_pmain_mod_darkage_furniture(L);
  /*lua_getfield(L,LUA_ENVIRONINDEX,"dofile");
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"get_modpath");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_pushliteral(L,"darkage");
  lua_call(L,1,1);
  lua_pushliteral(L,"/furniture.lua");
  lua_concat(L,2);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 0);*/
  
  /* dofile(minetest.get_modpath("darkage").."/stairs.lua") */
  lc_pmain_mod_darkage_stairs(L);
  /*lua_getfield(L,LUA_ENVIRONINDEX,"dofile");
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"get_modpath");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_pushliteral(L,"darkage");
  lua_call(L,1,1);
  lua_pushliteral(L,"/stairs.lua");
  lua_concat(L,2);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 0);*/
  
  /* ----------
   * -- Items
   * ----------
   * minetest.register_node("darkage:adobe", {
   * 	description = "Adobe",
   * 	tiles = {"darkage_adobe.png"},
   * 	is_ground_content = true,
   * 	groups = {crumbly=3},
   * 	sounds = default.node_sound_sand_defaults(),
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_node");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_pushliteral(L,"darkage:adobe");
  lua_createtable(L,0,5);
  lua_pushliteral(L,"description");
  lua_pushliteral(L,"Adobe");
  lua_rawset(L,-3);
  lua_pushliteral(L,"tiles");
  lua_createtable(L,1,0);
  lua_pushliteral(L,"darkage_adobe.png");
  lua_rawseti(L,-2,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"is_ground_content");
  lua_pushboolean(L,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"groups");
  lua_createtable(L,0,1);
  lua_pushliteral(L,"crumbly");
  lua_pushnumber(L,3);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"sounds");
  lua_getfield(L,LUA_ENVIRONINDEX,"default");
  lua_pushliteral(L,"node_sound_sand_defaults");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,0,1);
  lua_rawset(L,-3);
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_node("darkage:basalt", {
   *   description = "Basalt",
   * 	tiles = {"darkage_basalt.png"},
   * 	is_ground_content = true,
   *   drop = 'darkage:basalt_cobble',
   * 	groups = {cracky=3},
   * 	sounds = default.node_sound_stone_defaults()
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_node");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_pushliteral(L,"darkage:basalt");
  lua_createtable(L,0,6);
  lua_pushliteral(L,"description");
  lua_pushliteral(L,"Basalt");
  lua_rawset(L,-3);
  lua_pushliteral(L,"tiles");
  lua_createtable(L,1,0);
  lua_pushliteral(L,"darkage_basalt.png");
  lua_rawseti(L,-2,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"is_ground_content");
  lua_pushboolean(L,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"drop");
  lua_pushliteral(L,"darkage:basalt_cobble");
  lua_rawset(L,-3);
  lua_pushliteral(L,"groups");
  lua_createtable(L,0,1);
  lua_pushliteral(L,"cracky");
  lua_pushnumber(L,3);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"sounds");
  lua_getfield(L,LUA_ENVIRONINDEX,"default");
  lua_pushliteral(L,"node_sound_stone_defaults");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,0,1);
  lua_rawset(L,-3);
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_node("darkage:basalt_cobble", {
   *   description = "Basalt Cobble",
   * 	tiles = {"darkage_basalt_cobble.png"},
   * 	is_ground_content = true,
   * 	groups = {cracky=3},
   * 	sounds = default.node_sound_stone_defaults()
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_node");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_pushliteral(L,"darkage:basalt_cobble");
  lua_createtable(L,0,5);
  lua_pushliteral(L,"description");
  lua_pushliteral(L,"Basalt Cobble");
  lua_rawset(L,-3);
  lua_pushliteral(L,"tiles");
  lua_createtable(L,1,0);
  lua_pushliteral(L,"darkage_basalt_cobble.png");
  lua_rawseti(L,-2,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"is_ground_content");
  lua_pushboolean(L,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"groups");
  lua_createtable(L,0,1);
  lua_pushliteral(L,"cracky");
  lua_pushnumber(L,3);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"sounds");
  lua_getfield(L,LUA_ENVIRONINDEX,"default");
  lua_pushliteral(L,"node_sound_stone_defaults");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,0,1);
  lua_rawset(L,-3);
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_node("darkage:chalk", {
   *   description = "Chalk",
   * 	tiles = {"darkage_chalk.png"},
   * 	is_ground_content = true,
   *   drop = 'darkage:chalk_powder 2',
   * 	groups = {crumbly=2,cracky=2},
   * 	sounds = default.node_sound_stone_defaults()
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_node");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_pushliteral(L,"darkage:chalk");
  lua_createtable(L,0,6);
  lua_pushliteral(L,"description");
  lua_pushliteral(L,"Chalk");
  lua_rawset(L,-3);
  lua_pushliteral(L,"tiles");
  lua_createtable(L,1,0);
  lua_pushliteral(L,"darkage_chalk.png");
  lua_rawseti(L,-2,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"is_ground_content");
  lua_pushboolean(L,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"drop");
  lua_pushliteral(L,"darkage:chalk_powder 2");
  lua_rawset(L,-3);
  lua_pushliteral(L,"groups");
  lua_createtable(L,0,2);
  lua_pushliteral(L,"crumbly");
  lua_pushnumber(L,2);
  lua_rawset(L,-3);
  lua_pushliteral(L,"cracky");
  lua_pushnumber(L,2);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"sounds");
  lua_getfield(L,LUA_ENVIRONINDEX,"default");
  lua_pushliteral(L,"node_sound_stone_defaults");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,0,1);
  lua_rawset(L,-3);
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_node("darkage:cobble_with_plaster", {
   * 	description = "Cobblestone With Plaster",
   * 	tiles = {"darkage_cobble_with_plaster_D.png", "darkage_cobble_with_plaster_B.png", "darkage_cobble_with_plaster_C.png",
   * 		"darkage_cobble_with_plaster_A.png", "default_cobble.png", "darkage_chalk.png"},
   * 	is_ground_content = true,
   *   paramtype2 = "facedir",
   *   drop = 'default:cobble',
   * 	groups = {cracky=3},
   * 	sounds = default.node_sound_stone_defaults(),
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_node");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_pushliteral(L,"darkage:cobble_with_plaster");
  lua_createtable(L,0,7);
  lua_pushliteral(L,"description");
  lua_pushliteral(L,"Cobblestone With Plaster");
  lua_rawset(L,-3);
  lua_pushliteral(L,"tiles");
  lua_createtable(L,6,0);
  lua_pushliteral(L,"darkage_cobble_with_plaster_D.png");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"darkage_cobble_with_plaster_B.png");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"darkage_cobble_with_plaster_C.png");
  lua_rawseti(L,-2,3);
  lua_pushliteral(L,"darkage_cobble_with_plaster_A.png");
  lua_rawseti(L,-2,4);
  lua_pushliteral(L,"default_cobble.png");
  lua_rawseti(L,-2,5);
  lua_pushliteral(L,"darkage_chalk.png");
  lua_rawseti(L,-2,6);
  lua_rawset(L,-3);
  lua_pushliteral(L,"is_ground_content");
  lua_pushboolean(L,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"paramtype2");
  lua_pushliteral(L,"facedir");
  lua_rawset(L,-3);
  lua_pushliteral(L,"drop");
  lua_pushliteral(L,"default:cobble");
  lua_rawset(L,-3);
  lua_pushliteral(L,"groups");
  lua_createtable(L,0,1);
  lua_pushliteral(L,"cracky");
  lua_pushnumber(L,3);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"sounds");
  lua_getfield(L,LUA_ENVIRONINDEX,"default");
  lua_pushliteral(L,"node_sound_stone_defaults");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,0,1);
  lua_rawset(L,-3);
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_node("darkage:desert_stone_cobble", {
   * 	description = "Desert Stone Cobble",
   * 	tiles = {"darkage_desert_stone_cobble.png"},
   * 	is_ground_content = true,
   * 	groups = {cracky=3},
   * 	sounds = default.node_sound_stone_defaults()
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_node");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_pushliteral(L,"darkage:desert_stone_cobble");
  lua_createtable(L,0,5);
  lua_pushliteral(L,"description");
  lua_pushliteral(L,"Desert Stone Cobble");
  lua_rawset(L,-3);
  lua_pushliteral(L,"tiles");
  lua_createtable(L,1,0);
  lua_pushliteral(L,"darkage_desert_stone_cobble.png");
  lua_rawseti(L,-2,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"is_ground_content");
  lua_pushboolean(L,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"groups");
  lua_createtable(L,0,1);
  lua_pushliteral(L,"cracky");
  lua_pushnumber(L,3);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"sounds");
  lua_getfield(L,LUA_ENVIRONINDEX,"default");
  lua_pushliteral(L,"node_sound_stone_defaults");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,0,1);
  lua_rawset(L,-3);
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_node("darkage:desert_stone_with_iron", {
   * 	description = "Desert Iron Ore",
   * 	tiles = {"default_desert_stone.png^darkage_mineral_iron.png"},
   * 	is_ground_content = true,
   * 	groups = {cracky=3},
   * 	drop = 'default:iron_lump',
   * 	sounds = default.node_sound_stone_defaults(),
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_node");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_pushliteral(L,"darkage:desert_stone_with_iron");
  lua_createtable(L,0,6);
  lua_pushliteral(L,"description");
  lua_pushliteral(L,"Desert Iron Ore");
  lua_rawset(L,-3);
  lua_pushliteral(L,"tiles");
  lua_createtable(L,1,0);
  lua_pushliteral(L,"default_desert_stone.png^darkage_mineral_iron.png");
  lua_rawseti(L,-2,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"is_ground_content");
  lua_pushboolean(L,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"groups");
  lua_createtable(L,0,1);
  lua_pushliteral(L,"cracky");
  lua_pushnumber(L,3);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"drop");
  lua_pushliteral(L,"default:iron_lump");
  lua_rawset(L,-3);
  lua_pushliteral(L,"sounds");
  lua_getfield(L,LUA_ENVIRONINDEX,"default");
  lua_pushliteral(L,"node_sound_stone_defaults");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,0,1);
  lua_rawset(L,-3);
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_node("darkage:darkdirt", {
   * 	description = "Dark Dirt",
   * 	tiles = {"darkage_darkdirt.png"},
   * 	is_ground_content = true,
   * 	groups = {crumbly=2},
   * 	sounds = default.node_sound_dirt_defaults(),
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_node");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_pushliteral(L,"darkage:darkdirt");
  lua_createtable(L,0,5);
  lua_pushliteral(L,"description");
  lua_pushliteral(L,"Dark Dirt");
  lua_rawset(L,-3);
  lua_pushliteral(L,"tiles");
  lua_createtable(L,1,0);
  lua_pushliteral(L,"darkage_darkdirt.png");
  lua_rawseti(L,-2,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"is_ground_content");
  lua_pushboolean(L,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"groups");
  lua_createtable(L,0,1);
  lua_pushliteral(L,"crumbly");
  lua_pushnumber(L,2);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"sounds");
  lua_getfield(L,LUA_ENVIRONINDEX,"default");
  lua_pushliteral(L,"node_sound_dirt_defaults");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,0,1);
  lua_rawset(L,-3);
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_node("darkage:dry_leaves", {
   * 	description = "Dry Leaves",
   * 	tiles = {"darkage_dry_leaves.png"},
   * 	is_ground_content = true,
   *   paramtype = "light",
   * 	groups = {snappy=3, flammable=2},
   * 	sounds = default.node_sound_leaves_defaults()
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_node");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_pushliteral(L,"darkage:dry_leaves");
  lua_createtable(L,0,6);
  lua_pushliteral(L,"description");
  lua_pushliteral(L,"Dry Leaves");
  lua_rawset(L,-3);
  lua_pushliteral(L,"tiles");
  lua_createtable(L,1,0);
  lua_pushliteral(L,"darkage_dry_leaves.png");
  lua_rawseti(L,-2,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"is_ground_content");
  lua_pushboolean(L,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"paramtype");
  lua_pushliteral(L,"light");
  lua_rawset(L,-3);
  lua_pushliteral(L,"groups");
  lua_createtable(L,0,2);
  lua_pushliteral(L,"snappy");
  lua_pushnumber(L,3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"flammable");
  lua_pushnumber(L,2);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"sounds");
  lua_getfield(L,LUA_ENVIRONINDEX,"default");
  lua_pushliteral(L,"node_sound_leaves_defaults");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,0,1);
  lua_rawset(L,-3);
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_node("darkage:gneiss", {
   *   description = "Gneiss",
   * 	tiles = {"darkage_gneiss.png"},
   * 	is_ground_content = true,
   * 	groups = {cracky=3},
   * 	drop = {
   * 		max_items = 1,
   * 		items = {
   * 			{
   * 				-- player will get cobbles with 1/3 chance
   * 				items = {'darkage:gneiss_cobble'},
   * 				rarity = 3,
   * 			},
   * 			{
   * 				items = {'darkage:gneiss'},
   * 			}
   * 		}
   * 	},
   * 	sounds = default.node_sound_stone_defaults()
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_node");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_pushliteral(L,"darkage:gneiss");
  lua_createtable(L,0,6);
  lua_pushliteral(L,"description");
  lua_pushliteral(L,"Gneiss");
  lua_rawset(L,-3);
  lua_pushliteral(L,"tiles");
  lua_createtable(L,1,0);
  lua_pushliteral(L,"darkage_gneiss.png");
  lua_rawseti(L,-2,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"is_ground_content");
  lua_pushboolean(L,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"groups");
  lua_createtable(L,0,1);
  lua_pushliteral(L,"cracky");
  lua_pushnumber(L,3);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"drop");
  lua_createtable(L,0,2);
  lua_pushliteral(L,"max_items");
  lua_pushnumber(L,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"items");
  lua_createtable(L,2,0);
  lua_createtable(L,0,2);
  lua_pushliteral(L,"items");
  lua_createtable(L,1,0);
  lua_pushliteral(L,"darkage:gneiss_cobble");
  lua_rawseti(L,-2,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"rarity");
  lua_pushnumber(L,3);
  lua_rawset(L,-3);
  lua_rawseti(L,-2,1);
  lua_createtable(L,0,1);
  lua_pushliteral(L,"items");
  lua_createtable(L,1,0);
  lua_pushliteral(L,"darkage:gneiss");
  lua_rawseti(L,-2,1);
  lua_rawset(L,-3);
  lua_rawseti(L,-2,2);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"sounds");
  lua_getfield(L,LUA_ENVIRONINDEX,"default");
  lua_pushliteral(L,"node_sound_stone_defaults");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,0,1);
  lua_rawset(L,-3);
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_node("darkage:gneiss_cobble", {
   *   description = "Gneiss Cobble",
   * 	tiles = {"darkage_gneiss_cobble.png"},
   * 	is_ground_content = true,
   * 	groups = {cracky=3},
   * 	sounds = default.node_sound_stone_defaults()
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_node");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_pushliteral(L,"darkage:gneiss_cobble");
  lua_createtable(L,0,5);
  lua_pushliteral(L,"description");
  lua_pushliteral(L,"Gneiss Cobble");
  lua_rawset(L,-3);
  lua_pushliteral(L,"tiles");
  lua_createtable(L,1,0);
  lua_pushliteral(L,"darkage_gneiss_cobble.png");
  lua_rawseti(L,-2,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"is_ground_content");
  lua_pushboolean(L,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"groups");
  lua_createtable(L,0,1);
  lua_pushliteral(L,"cracky");
  lua_pushnumber(L,3);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"sounds");
  lua_getfield(L,LUA_ENVIRONINDEX,"default");
  lua_pushliteral(L,"node_sound_stone_defaults");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,0,1);
  lua_rawset(L,-3);
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_node("darkage:marble", {
   *   description = "Marble",
   * 	tiles = {"darkage_marble.png"},
   * 	is_ground_content = true,
   * 	groups = {cracky=3},
   * 	sounds = default.node_sound_stone_defaults()
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_node");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_pushliteral(L,"darkage:marble");
  lua_createtable(L,0,5);
  lua_pushliteral(L,"description");
  lua_pushliteral(L,"Marble");
  lua_rawset(L,-3);
  lua_pushliteral(L,"tiles");
  lua_createtable(L,1,0);
  lua_pushliteral(L,"darkage_marble.png");
  lua_rawseti(L,-2,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"is_ground_content");
  lua_pushboolean(L,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"groups");
  lua_createtable(L,0,1);
  lua_pushliteral(L,"cracky");
  lua_pushnumber(L,3);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"sounds");
  lua_getfield(L,LUA_ENVIRONINDEX,"default");
  lua_pushliteral(L,"node_sound_stone_defaults");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,0,1);
  lua_rawset(L,-3);
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_node("darkage:mud", {
   *   description = "Mud",
   * 	tiles = {"darkage_mud_up.png","darkage_mud.png"},
   * 	is_ground_content = true,
   * 	groups = {crumbly=3},
   *   drop = 'darkage:mud_lump 4',
   * 	sounds = default.node_sound_dirt_defaults({
   * 		footstep = "",
   * 	}),
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_node");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_pushliteral(L,"darkage:mud");
  lua_createtable(L,0,6);
  lua_pushliteral(L,"description");
  lua_pushliteral(L,"Mud");
  lua_rawset(L,-3);
  lua_pushliteral(L,"tiles");
  lua_createtable(L,2,0);
  lua_pushliteral(L,"darkage_mud_up.png");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"darkage_mud.png");
  lua_rawseti(L,-2,2);
  lua_rawset(L,-3);
  lua_pushliteral(L,"is_ground_content");
  lua_pushboolean(L,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"groups");
  lua_createtable(L,0,1);
  lua_pushliteral(L,"crumbly");
  lua_pushnumber(L,3);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"drop");
  lua_pushliteral(L,"darkage:mud_lump 4");
  lua_rawset(L,-3);
  lua_pushliteral(L,"sounds");
  lua_getfield(L,LUA_ENVIRONINDEX,"default");
  lua_pushliteral(L,"node_sound_dirt_defaults");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,1);
  lua_pushliteral(L,"footstep");
  lua_pushliteral(L,"");
  lua_rawset(L,-3);
  lua_call(L,1,1);
  lua_rawset(L,-3);
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_node("darkage:ors", {
   *   description = "Old Red Sandstone",
   * 	tiles = {"darkage_ors.png"},
   * 	is_ground_content = true,
   *   drop = 'darkage:ors_cobble',
   * 	groups = {crumbly=2,cracky=2},
   * 	sounds = default.node_sound_stone_defaults()
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_node");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_pushliteral(L,"darkage:ors");
  lua_createtable(L,0,6);
  lua_pushliteral(L,"description");
  lua_pushliteral(L,"Old Red Sandstone");
  lua_rawset(L,-3);
  lua_pushliteral(L,"tiles");
  lua_createtable(L,1,0);
  lua_pushliteral(L,"darkage_ors.png");
  lua_rawseti(L,-2,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"is_ground_content");
  lua_pushboolean(L,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"drop");
  lua_pushliteral(L,"darkage:ors_cobble");
  lua_rawset(L,-3);
  lua_pushliteral(L,"groups");
  lua_createtable(L,0,2);
  lua_pushliteral(L,"crumbly");
  lua_pushnumber(L,2);
  lua_rawset(L,-3);
  lua_pushliteral(L,"cracky");
  lua_pushnumber(L,2);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"sounds");
  lua_getfield(L,LUA_ENVIRONINDEX,"default");
  lua_pushliteral(L,"node_sound_stone_defaults");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,0,1);
  lua_rawset(L,-3);
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_node("darkage:ors_cobble", {
   *   description = "Old Red Sandstone Cobble",
   * 	tiles = {"darkage_ors_cobble.png"},
   * 	is_ground_content = true,
   * 	groups = {crumbly=2,cracky=2},
   * 	sounds = default.node_sound_stone_defaults()
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_node");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_pushliteral(L,"darkage:ors_cobble");
  lua_createtable(L,0,5);
  lua_pushliteral(L,"description");
  lua_pushliteral(L,"Old Red Sandstone Cobble");
  lua_rawset(L,-3);
  lua_pushliteral(L,"tiles");
  lua_createtable(L,1,0);
  lua_pushliteral(L,"darkage_ors_cobble.png");
  lua_rawseti(L,-2,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"is_ground_content");
  lua_pushboolean(L,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"groups");
  lua_createtable(L,0,2);
  lua_pushliteral(L,"crumbly");
  lua_pushnumber(L,2);
  lua_rawset(L,-3);
  lua_pushliteral(L,"cracky");
  lua_pushnumber(L,2);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"sounds");
  lua_getfield(L,LUA_ENVIRONINDEX,"default");
  lua_pushliteral(L,"node_sound_stone_defaults");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,0,1);
  lua_rawset(L,-3);
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_node("darkage:sandstone_cobble", {
   *   description = "Sandstone Cobble",
   * 	tiles = {"darkage_sandstone_cobble.png"},
   * 	is_ground_content = true,
   * 	groups = {crumbly=2,cracky=2},
   * 	sounds = default.node_sound_stone_defaults()
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_node");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_pushliteral(L,"darkage:sandstone_cobble");
  lua_createtable(L,0,5);
  lua_pushliteral(L,"description");
  lua_pushliteral(L,"Sandstone Cobble");
  lua_rawset(L,-3);
  lua_pushliteral(L,"tiles");
  lua_createtable(L,1,0);
  lua_pushliteral(L,"darkage_sandstone_cobble.png");
  lua_rawseti(L,-2,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"is_ground_content");
  lua_pushboolean(L,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"groups");
  lua_createtable(L,0,2);
  lua_pushliteral(L,"crumbly");
  lua_pushnumber(L,2);
  lua_rawset(L,-3);
  lua_pushliteral(L,"cracky");
  lua_pushnumber(L,2);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"sounds");
  lua_getfield(L,LUA_ENVIRONINDEX,"default");
  lua_pushliteral(L,"node_sound_stone_defaults");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,0,1);
  lua_rawset(L,-3);
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_node("darkage:serpentine", {
   *   description = "Serpentine",
   * 	tiles = {"darkage_serpentine.png"},
   * 	is_ground_content = true,
   * 	groups = {cracky=3},
   * 	sounds = default.node_sound_stone_defaults()
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_node");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_pushliteral(L,"darkage:serpentine");
  lua_createtable(L,0,5);
  lua_pushliteral(L,"description");
  lua_pushliteral(L,"Serpentine");
  lua_rawset(L,-3);
  lua_pushliteral(L,"tiles");
  lua_createtable(L,1,0);
  lua_pushliteral(L,"darkage_serpentine.png");
  lua_rawseti(L,-2,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"is_ground_content");
  lua_pushboolean(L,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"groups");
  lua_createtable(L,0,1);
  lua_pushliteral(L,"cracky");
  lua_pushnumber(L,3);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"sounds");
  lua_getfield(L,LUA_ENVIRONINDEX,"default");
  lua_pushliteral(L,"node_sound_stone_defaults");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,0,1);
  lua_rawset(L,-3);
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_node("darkage:shale", {
   *   description = "Shale",
   * 	tiles = {"darkage_shale.png","darkage_shale.png","darkage_shale_side.png"},
   * 	is_ground_content = true,
   * 	groups = {crumbly=2,cracky=2},
   * 	sounds = default.node_sound_stone_defaults()
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_node");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_pushliteral(L,"darkage:shale");
  lua_createtable(L,0,5);
  lua_pushliteral(L,"description");
  lua_pushliteral(L,"Shale");
  lua_rawset(L,-3);
  lua_pushliteral(L,"tiles");
  lua_createtable(L,3,0);
  lua_pushliteral(L,"darkage_shale.png");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"darkage_shale.png");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"darkage_shale_side.png");
  lua_rawseti(L,-2,3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"is_ground_content");
  lua_pushboolean(L,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"groups");
  lua_createtable(L,0,2);
  lua_pushliteral(L,"crumbly");
  lua_pushnumber(L,2);
  lua_rawset(L,-3);
  lua_pushliteral(L,"cracky");
  lua_pushnumber(L,2);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"sounds");
  lua_getfield(L,LUA_ENVIRONINDEX,"default");
  lua_pushliteral(L,"node_sound_stone_defaults");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,0,1);
  lua_rawset(L,-3);
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_node("darkage:schist", {
   *   description = "Schist",
   * 	tiles = {"darkage_schist.png"},
   * 	is_ground_content = true,
   * 	groups = {cracky=3},
   * 	sounds = default.node_sound_stone_defaults()
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_node");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_pushliteral(L,"darkage:schist");
  lua_createtable(L,0,5);
  lua_pushliteral(L,"description");
  lua_pushliteral(L,"Schist");
  lua_rawset(L,-3);
  lua_pushliteral(L,"tiles");
  lua_createtable(L,1,0);
  lua_pushliteral(L,"darkage_schist.png");
  lua_rawseti(L,-2,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"is_ground_content");
  lua_pushboolean(L,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"groups");
  lua_createtable(L,0,1);
  lua_pushliteral(L,"cracky");
  lua_pushnumber(L,3);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"sounds");
  lua_getfield(L,LUA_ENVIRONINDEX,"default");
  lua_pushliteral(L,"node_sound_stone_defaults");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,0,1);
  lua_rawset(L,-3);
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_node("darkage:silt", {
   *   description = "Silt",
   * 	tiles = {"darkage_silt.png"},
   * 	is_ground_content = true,
   * 	groups = {crumbly=3},
   *   drop = 'darkage:silt_lump 4',
   * 	sounds = default.node_sound_dirt_defaults({
   * 		footstep = "",
   * 	}),
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_node");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_pushliteral(L,"darkage:silt");
  lua_createtable(L,0,6);
  lua_pushliteral(L,"description");
  lua_pushliteral(L,"Silt");
  lua_rawset(L,-3);
  lua_pushliteral(L,"tiles");
  lua_createtable(L,1,0);
  lua_pushliteral(L,"darkage_silt.png");
  lua_rawseti(L,-2,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"is_ground_content");
  lua_pushboolean(L,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"groups");
  lua_createtable(L,0,1);
  lua_pushliteral(L,"crumbly");
  lua_pushnumber(L,3);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"drop");
  lua_pushliteral(L,"darkage:silt_lump 4");
  lua_rawset(L,-3);
  lua_pushliteral(L,"sounds");
  lua_getfield(L,LUA_ENVIRONINDEX,"default");
  lua_pushliteral(L,"node_sound_dirt_defaults");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,1);
  lua_pushliteral(L,"footstep");
  lua_pushliteral(L,"");
  lua_rawset(L,-3);
  lua_call(L,1,1);
  lua_rawset(L,-3);
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_node("darkage:slate", {
   *   description = "Slate",
   * 	tiles = {"darkage_slate.png","darkage_slate.png","darkage_slate_side.png"},
   * 	is_ground_content = true,
   *   drop = 'darkage:slate_cobble',
   * 	groups = {cracky=2},
   * 	sounds = default.node_sound_stone_defaults()
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_node");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_pushliteral(L,"darkage:slate");
  lua_createtable(L,0,6);
  lua_pushliteral(L,"description");
  lua_pushliteral(L,"Slate");
  lua_rawset(L,-3);
  lua_pushliteral(L,"tiles");
  lua_createtable(L,3,0);
  lua_pushliteral(L,"darkage_slate.png");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"darkage_slate.png");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"darkage_slate_side.png");
  lua_rawseti(L,-2,3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"is_ground_content");
  lua_pushboolean(L,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"drop");
  lua_pushliteral(L,"darkage:slate_cobble");
  lua_rawset(L,-3);
  lua_pushliteral(L,"groups");
  lua_createtable(L,0,1);
  lua_pushliteral(L,"cracky");
  lua_pushnumber(L,2);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"sounds");
  lua_getfield(L,LUA_ENVIRONINDEX,"default");
  lua_pushliteral(L,"node_sound_stone_defaults");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,0,1);
  lua_rawset(L,-3);
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_node("darkage:slate_cobble", {
   *   description = "Slate Cobble",
   * 	tiles = {"darkage_slate_cobble.png"},
   * 	is_ground_content = true,
   * 	groups = {cracky=2},
   * 	sounds = default.node_sound_stone_defaults()
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_node");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_pushliteral(L,"darkage:slate_cobble");
  lua_createtable(L,0,5);
  lua_pushliteral(L,"description");
  lua_pushliteral(L,"Slate Cobble");
  lua_rawset(L,-3);
  lua_pushliteral(L,"tiles");
  lua_createtable(L,1,0);
  lua_pushliteral(L,"darkage_slate_cobble.png");
  lua_rawseti(L,-2,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"is_ground_content");
  lua_pushboolean(L,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"groups");
  lua_createtable(L,0,1);
  lua_pushliteral(L,"cracky");
  lua_pushnumber(L,2);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"sounds");
  lua_getfield(L,LUA_ENVIRONINDEX,"default");
  lua_pushliteral(L,"node_sound_stone_defaults");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,0,1);
  lua_rawset(L,-3);
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_node("darkage:slate_tale", {
   *   description = "Slate Tale",
   * 	tiles = {"darkage_slate_tale.png"},
   * 	is_ground_content = true,
   * 	groups = {cracky=2},
   * 	sounds = default.node_sound_stone_defaults()
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_node");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_pushliteral(L,"darkage:slate_tale");
  lua_createtable(L,0,5);
  lua_pushliteral(L,"description");
  lua_pushliteral(L,"Slate Tale");
  lua_rawset(L,-3);
  lua_pushliteral(L,"tiles");
  lua_createtable(L,1,0);
  lua_pushliteral(L,"darkage_slate_tale.png");
  lua_rawseti(L,-2,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"is_ground_content");
  lua_pushboolean(L,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"groups");
  lua_createtable(L,0,1);
  lua_pushliteral(L,"cracky");
  lua_pushnumber(L,2);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"sounds");
  lua_getfield(L,LUA_ENVIRONINDEX,"default");
  lua_pushliteral(L,"node_sound_stone_defaults");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,0,1);
  lua_rawset(L,-3);
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_node("darkage:straw", {
   *   description = "Straw",
   * 	tiles = {"darkage_straw.png"},
   * 	is_ground_content = true,
   * 	groups = {snappy=3, flammable=2},
   * 	sounds = default.node_sound_leaves_defaults(),
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_node");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_pushliteral(L,"darkage:straw");
  lua_createtable(L,0,5);
  lua_pushliteral(L,"description");
  lua_pushliteral(L,"Straw");
  lua_rawset(L,-3);
  lua_pushliteral(L,"tiles");
  lua_createtable(L,1,0);
  lua_pushliteral(L,"darkage_straw.png");
  lua_rawseti(L,-2,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"is_ground_content");
  lua_pushboolean(L,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"groups");
  lua_createtable(L,0,2);
  lua_pushliteral(L,"snappy");
  lua_pushnumber(L,3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"flammable");
  lua_pushnumber(L,2);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"sounds");
  lua_getfield(L,LUA_ENVIRONINDEX,"default");
  lua_pushliteral(L,"node_sound_leaves_defaults");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,0,1);
  lua_rawset(L,-3);
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_node("darkage:stone_brick", {
   *   description = "Stone Brick",
   * 	tiles = {"darkage_stone_brick.png"},
   * 	is_ground_content = true,
   * 	groups = {cracky=3},
   * 	sounds = default.node_sound_stone_defaults()
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_node");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_pushliteral(L,"darkage:stone_brick");
  lua_createtable(L,0,5);
  lua_pushliteral(L,"description");
  lua_pushliteral(L,"Stone Brick");
  lua_rawset(L,-3);
  lua_pushliteral(L,"tiles");
  lua_createtable(L,1,0);
  lua_pushliteral(L,"darkage_stone_brick.png");
  lua_rawseti(L,-2,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"is_ground_content");
  lua_pushboolean(L,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"groups");
  lua_createtable(L,0,1);
  lua_pushliteral(L,"cracky");
  lua_pushnumber(L,3);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"sounds");
  lua_getfield(L,LUA_ENVIRONINDEX,"default");
  lua_pushliteral(L,"node_sound_stone_defaults");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,0,1);
  lua_rawset(L,-3);
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_node("darkage:straw_bale", {
   *   description = "Straw Bale",
   * 	tiles = {"darkage_straw_bale.png"},
   * 	is_ground_content = true,
   *   drop = 'darkage:straw 4',
   * 	groups = {snappy=2, flammable=2},
   * 	sounds = default.node_sound_leaves_defaults(),
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_node");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_pushliteral(L,"darkage:straw_bale");
  lua_createtable(L,0,6);
  lua_pushliteral(L,"description");
  lua_pushliteral(L,"Straw Bale");
  lua_rawset(L,-3);
  lua_pushliteral(L,"tiles");
  lua_createtable(L,1,0);
  lua_pushliteral(L,"darkage_straw_bale.png");
  lua_rawseti(L,-2,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"is_ground_content");
  lua_pushboolean(L,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"drop");
  lua_pushliteral(L,"darkage:straw 4");
  lua_rawset(L,-3);
  lua_pushliteral(L,"groups");
  lua_createtable(L,0,2);
  lua_pushliteral(L,"snappy");
  lua_pushnumber(L,2);
  lua_rawset(L,-3);
  lua_pushliteral(L,"flammable");
  lua_pushnumber(L,2);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"sounds");
  lua_getfield(L,LUA_ENVIRONINDEX,"default");
  lua_pushliteral(L,"node_sound_leaves_defaults");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,0,1);
  lua_rawset(L,-3);
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_node("darkage:marble", {
   *   description = "Marble",
   * 	tiles = {"darkage_marble.png"},
   * 	is_ground_content = true,
   * 	groups = {cracky=2},
   * 	sounds = default.node_sound_stone_defaults()
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_node");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_pushliteral(L,"darkage:marble");
  lua_createtable(L,0,5);
  lua_pushliteral(L,"description");
  lua_pushliteral(L,"Marble");
  lua_rawset(L,-3);
  lua_pushliteral(L,"tiles");
  lua_createtable(L,1,0);
  lua_pushliteral(L,"darkage_marble.png");
  lua_rawseti(L,-2,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"is_ground_content");
  lua_pushboolean(L,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"groups");
  lua_createtable(L,0,1);
  lua_pushliteral(L,"cracky");
  lua_pushnumber(L,2);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"sounds");
  lua_getfield(L,LUA_ENVIRONINDEX,"default");
  lua_pushliteral(L,"node_sound_stone_defaults");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,0,1);
  lua_rawset(L,-3);
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_node("darkage:marble_tile", {
   *   description = "Marble Tile",
   * 	tiles = {"darkage_marble_tile.png"},
   * 	is_ground_content = true,
   * 	groups = {cracky=2},
   * 	sounds = default.node_sound_stone_defaults()
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_node");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_pushliteral(L,"darkage:marble_tile");
  lua_createtable(L,0,5);
  lua_pushliteral(L,"description");
  lua_pushliteral(L,"Marble Tile");
  lua_rawset(L,-3);
  lua_pushliteral(L,"tiles");
  lua_createtable(L,1,0);
  lua_pushliteral(L,"darkage_marble_tile.png");
  lua_rawseti(L,-2,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"is_ground_content");
  lua_pushboolean(L,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"groups");
  lua_createtable(L,0,1);
  lua_pushliteral(L,"cracky");
  lua_pushnumber(L,2);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"sounds");
  lua_getfield(L,LUA_ENVIRONINDEX,"default");
  lua_pushliteral(L,"node_sound_stone_defaults");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_call(L,0,1);
  lua_rawset(L,-3);
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* ---------------
   * -- Overrides
   * ---------------
   * minetest.registered_nodes["default:desert_stone"].drop= {
   * 		max_items = 1,
   * 		items = {
   * 			{
   * 				-- player will get cobbles with 1/3 chance
   * 				items = {'darkage:desert_stone_cobble'},
   * 				rarity = 2,
   * 			},
   * 			{
   * 				items = {'default:desert_stone'},
   * 			}
   * 		}
   * } */
  lua_createtable(L,0,2);
  lua_pushliteral(L,"max_items");
  lua_pushnumber(L,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"items");
  lua_createtable(L,2,0);
  lua_createtable(L,0,2);
  lua_pushliteral(L,"items");
  lua_createtable(L,1,0);
  lua_pushliteral(L,"darkage:desert_stone_cobble");
  lua_rawseti(L,-2,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"rarity");
  lua_pushnumber(L,2);
  lua_rawset(L,-3);
  lua_rawseti(L,-2,1);
  lua_createtable(L,0,1);
  lua_pushliteral(L,"items");
  lua_createtable(L,1,0);
  lua_pushliteral(L,"default:desert_stone");
  lua_rawseti(L,-2,1);
  lua_rawset(L,-3);
  lua_rawseti(L,-2,2);
  lua_rawset(L,-3);
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"registered_nodes");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_pushliteral(L,"default:desert_stone");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_insert(L,-2);
  lua_pushliteral(L,"drop");
  lua_insert(L,-2);
  lua_settable(L,-3);
  lua_pop(L,1);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* ---------------
   * -- Crafts Items
   * ---------------
   * minetest.register_craftitem("darkage:chalk_powder", {
   * 	description = "Chalk Powder",
   * 	inventory_image = "darkage_chalk_powder.png",
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_craftitem");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_pushliteral(L,"darkage:chalk_powder");
  lua_createtable(L,0,2);
  lua_pushliteral(L,"description");
  lua_pushliteral(L,"Chalk Powder");
  lua_rawset(L,-3);
  lua_pushliteral(L,"inventory_image");
  lua_pushliteral(L,"darkage_chalk_powder.png");
  lua_rawset(L,-3);
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_craftitem("darkage:mud_lump", {
   * 	description = "Mud Lump",
   * 	inventory_image = "darkage_mud_lump.png",
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_craftitem");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_pushliteral(L,"darkage:mud_lump");
  lua_createtable(L,0,2);
  lua_pushliteral(L,"description");
  lua_pushliteral(L,"Mud Lump");
  lua_rawset(L,-3);
  lua_pushliteral(L,"inventory_image");
  lua_pushliteral(L,"darkage_mud_lump.png");
  lua_rawset(L,-3);
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_craftitem("darkage:silt_lump", {
   * 	description = "Silt Lump",
   * 	inventory_image = "darkage_silt_lump.png",
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_craftitem");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_pushliteral(L,"darkage:silt_lump");
  lua_createtable(L,0,2);
  lua_pushliteral(L,"description");
  lua_pushliteral(L,"Silt Lump");
  lua_rawset(L,-3);
  lua_pushliteral(L,"inventory_image");
  lua_pushliteral(L,"darkage_silt_lump.png");
  lua_rawset(L,-3);
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* ----------
   * -- Crafts
   * ----------
   * --sand+clay+water+straw
   * minetest.register_craft({
   * 	output = 'darkage:adobe 4',
   * 	recipe = {
   * 	{'default:sand','default:sand'},
   * 		{'default:clay_lump','darkage:straw'},
   * 	}
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_craft");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,2);
  lua_pushliteral(L,"output");
  lua_pushliteral(L,"darkage:adobe 4");
  lua_rawset(L,-3);
  lua_pushliteral(L,"recipe");
  lua_createtable(L,2,0);
  lua_createtable(L,2,0);
  lua_pushliteral(L,"default:sand");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"default:sand");
  lua_rawseti(L,-2,2);
  lua_rawseti(L,-2,1);
  lua_createtable(L,2,0);
  lua_pushliteral(L,"default:clay_lump");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"darkage:straw");
  lua_rawseti(L,-2,2);
  lua_rawseti(L,-2,2);
  lua_rawset(L,-3);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_craft({
   * 	output = 'darkage:basalt_cobble 4',
   * 	recipe = {
   * 	{'default:cobble','default:cobble'},
   * 		{'default:coal_lump','default:coal_lump'},
   * 	}
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_craft");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,2);
  lua_pushliteral(L,"output");
  lua_pushliteral(L,"darkage:basalt_cobble 4");
  lua_rawset(L,-3);
  lua_pushliteral(L,"recipe");
  lua_createtable(L,2,0);
  lua_createtable(L,2,0);
  lua_pushliteral(L,"default:cobble");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"default:cobble");
  lua_rawseti(L,-2,2);
  lua_rawseti(L,-2,1);
  lua_createtable(L,2,0);
  lua_pushliteral(L,"default:coal_lump");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"default:coal_lump");
  lua_rawseti(L,-2,2);
  lua_rawseti(L,-2,2);
  lua_rawset(L,-3);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_craft({
   * 	output = 'darkage:cobble_with_plaster 2',
   * 	recipe = {
   * 	{'default:cobble','darkage:chalk_powder'},
   * 		{'default:cobble','darkage:chalk_powder'},
   * 	}
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_craft");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,2);
  lua_pushliteral(L,"output");
  lua_pushliteral(L,"darkage:cobble_with_plaster 2");
  lua_rawset(L,-3);
  lua_pushliteral(L,"recipe");
  lua_createtable(L,2,0);
  lua_createtable(L,2,0);
  lua_pushliteral(L,"default:cobble");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"darkage:chalk_powder");
  lua_rawseti(L,-2,2);
  lua_rawseti(L,-2,1);
  lua_createtable(L,2,0);
  lua_pushliteral(L,"default:cobble");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"darkage:chalk_powder");
  lua_rawseti(L,-2,2);
  lua_rawseti(L,-2,2);
  lua_rawset(L,-3);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_craft({
   * 	output = 'darkage:cobble_with_plaster 2',
   * 	recipe = {
   * 	{'darkage:chalk_powder','default:cobble'},
   * 		{'darkage:chalk_powder','default:cobble'},
   * 	}
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_craft");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,2);
  lua_pushliteral(L,"output");
  lua_pushliteral(L,"darkage:cobble_with_plaster 2");
  lua_rawset(L,-3);
  lua_pushliteral(L,"recipe");
  lua_createtable(L,2,0);
  lua_createtable(L,2,0);
  lua_pushliteral(L,"darkage:chalk_powder");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"default:cobble");
  lua_rawseti(L,-2,2);
  lua_rawseti(L,-2,1);
  lua_createtable(L,2,0);
  lua_pushliteral(L,"darkage:chalk_powder");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"default:cobble");
  lua_rawseti(L,-2,2);
  lua_rawseti(L,-2,2);
  lua_rawset(L,-3);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_craft({
   * 	output = 'darkage:darkdirt 4',
   * 	recipe = {
   * 	{'default:dirt','default:dirt'},
   * 		{'default:gravel','default:gravel'},
   * 	}
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_craft");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,2);
  lua_pushliteral(L,"output");
  lua_pushliteral(L,"darkage:darkdirt 4");
  lua_rawset(L,-3);
  lua_pushliteral(L,"recipe");
  lua_createtable(L,2,0);
  lua_createtable(L,2,0);
  lua_pushliteral(L,"default:dirt");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"default:dirt");
  lua_rawseti(L,-2,2);
  lua_rawseti(L,-2,1);
  lua_createtable(L,2,0);
  lua_pushliteral(L,"default:gravel");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"default:gravel");
  lua_rawseti(L,-2,2);
  lua_rawseti(L,-2,2);
  lua_rawset(L,-3);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_craft({
   * 	output = 'darkage:mud 3',
   * 	recipe = {
   * 	{'default:dirt','default:dirt'},
   * 		{'default:clay_lump','darkage:silt_lump'},
   * 	}
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_craft");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,2);
  lua_pushliteral(L,"output");
  lua_pushliteral(L,"darkage:mud 3");
  lua_rawset(L,-3);
  lua_pushliteral(L,"recipe");
  lua_createtable(L,2,0);
  lua_createtable(L,2,0);
  lua_pushliteral(L,"default:dirt");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"default:dirt");
  lua_rawseti(L,-2,2);
  lua_rawseti(L,-2,1);
  lua_createtable(L,2,0);
  lua_pushliteral(L,"default:clay_lump");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"darkage:silt_lump");
  lua_rawseti(L,-2,2);
  lua_rawseti(L,-2,2);
  lua_rawset(L,-3);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_craft({
   * 	output = 'darkage:mud',
   * 	recipe = {
   * 	{'darkage:mud_lump','darkage:mud_lump'},
   * 	{'darkage:mud_lump','darkage:mud_lump'},
   * 	}
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_craft");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,2);
  lua_pushliteral(L,"output");
  lua_pushliteral(L,"darkage:mud");
  lua_rawset(L,-3);
  lua_pushliteral(L,"recipe");
  lua_createtable(L,2,0);
  lua_createtable(L,2,0);
  lua_pushliteral(L,"darkage:mud_lump");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"darkage:mud_lump");
  lua_rawseti(L,-2,2);
  lua_rawseti(L,-2,1);
  lua_createtable(L,2,0);
  lua_pushliteral(L,"darkage:mud_lump");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"darkage:mud_lump");
  lua_rawseti(L,-2,2);
  lua_rawseti(L,-2,2);
  lua_rawset(L,-3);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_craft({
   * 	output = 'darkage:ors 4',
   * 	recipe = {
   * 	{'default:sandstone','default:sandstone'},
   * 		{'default:iron_lump','default:sandstone'},
   * 	}
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_craft");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,2);
  lua_pushliteral(L,"output");
  lua_pushliteral(L,"darkage:ors 4");
  lua_rawset(L,-3);
  lua_pushliteral(L,"recipe");
  lua_createtable(L,2,0);
  lua_createtable(L,2,0);
  lua_pushliteral(L,"default:sandstone");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"default:sandstone");
  lua_rawseti(L,-2,2);
  lua_rawseti(L,-2,1);
  lua_createtable(L,2,0);
  lua_pushliteral(L,"default:iron_lump");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"default:sandstone");
  lua_rawseti(L,-2,2);
  lua_rawseti(L,-2,2);
  lua_rawset(L,-3);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_craft({
   * 	output = 'darkage:ors_cobble 4',
   * 	recipe = {
   * 	{'darkage:sandstone_cobble','darkage:sandstone_cobble'},
   * 		{'default:iron_lump','darkage:sandstone_cobble'},
   * 	}
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_craft");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,2);
  lua_pushliteral(L,"output");
  lua_pushliteral(L,"darkage:ors_cobble 4");
  lua_rawset(L,-3);
  lua_pushliteral(L,"recipe");
  lua_createtable(L,2,0);
  lua_createtable(L,2,0);
  lua_pushliteral(L,"darkage:sandstone_cobble");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"darkage:sandstone_cobble");
  lua_rawseti(L,-2,2);
  lua_rawseti(L,-2,1);
  lua_createtable(L,2,0);
  lua_pushliteral(L,"default:iron_lump");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"darkage:sandstone_cobble");
  lua_rawseti(L,-2,2);
  lua_rawseti(L,-2,2);
  lua_rawset(L,-3);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_craft({
   * 	output = 'darkage:silt 3',
   * 	recipe = {
   * 	{'default:sand','default:sand'},
   * 		{'default:clay_lump','default:clay_lump'},
   * 	}
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_craft");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,2);
  lua_pushliteral(L,"output");
  lua_pushliteral(L,"darkage:silt 3");
  lua_rawset(L,-3);
  lua_pushliteral(L,"recipe");
  lua_createtable(L,2,0);
  lua_createtable(L,2,0);
  lua_pushliteral(L,"default:sand");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"default:sand");
  lua_rawseti(L,-2,2);
  lua_rawseti(L,-2,1);
  lua_createtable(L,2,0);
  lua_pushliteral(L,"default:clay_lump");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"default:clay_lump");
  lua_rawseti(L,-2,2);
  lua_rawseti(L,-2,2);
  lua_rawset(L,-3);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_craft({
   * 	output = 'darkage:silt',
   * 	recipe = {
   * 	{'darkage:silt_lump','darkage:silt_lump'},
   * 		{'darkage:silt_lump','darkage:silt_lump'},
   * 	}
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_craft");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,2);
  lua_pushliteral(L,"output");
  lua_pushliteral(L,"darkage:silt");
  lua_rawset(L,-3);
  lua_pushliteral(L,"recipe");
  lua_createtable(L,2,0);
  lua_createtable(L,2,0);
  lua_pushliteral(L,"darkage:silt_lump");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"darkage:silt_lump");
  lua_rawseti(L,-2,2);
  lua_rawseti(L,-2,1);
  lua_createtable(L,2,0);
  lua_pushliteral(L,"darkage:silt_lump");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"darkage:silt_lump");
  lua_rawseti(L,-2,2);
  lua_rawseti(L,-2,2);
  lua_rawset(L,-3);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_craft({
   * 	output = 'darkage:slate_tale 2',
   * 	recipe = {
   * 	{'darkage:slate_cobble','darkage:slate_cobble'},
   * 		{'darkage:slate_cobble','darkage:slate_cobble'},
   * 	}
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_craft");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,2);
  lua_pushliteral(L,"output");
  lua_pushliteral(L,"darkage:slate_tale 2");
  lua_rawset(L,-3);
  lua_pushliteral(L,"recipe");
  lua_createtable(L,2,0);
  lua_createtable(L,2,0);
  lua_pushliteral(L,"darkage:slate_cobble");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"darkage:slate_cobble");
  lua_rawseti(L,-2,2);
  lua_rawseti(L,-2,1);
  lua_createtable(L,2,0);
  lua_pushliteral(L,"darkage:slate_cobble");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"darkage:slate_cobble");
  lua_rawseti(L,-2,2);
  lua_rawseti(L,-2,2);
  lua_rawset(L,-3);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_craft({
   * 	output = 'darkage:stone_brick 3',
   * 	recipe = {
   * 	{'default:cobble','default:cobble'},
   * 		{'default:cobble','default:cobble'},
   * 	}
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_craft");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,2);
  lua_pushliteral(L,"output");
  lua_pushliteral(L,"darkage:stone_brick 3");
  lua_rawset(L,-3);
  lua_pushliteral(L,"recipe");
  lua_createtable(L,2,0);
  lua_createtable(L,2,0);
  lua_pushliteral(L,"default:cobble");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"default:cobble");
  lua_rawseti(L,-2,2);
  lua_rawseti(L,-2,1);
  lua_createtable(L,2,0);
  lua_pushliteral(L,"default:cobble");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"default:cobble");
  lua_rawseti(L,-2,2);
  lua_rawseti(L,-2,2);
  lua_rawset(L,-3);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_craft({
   * 	output = 'darkage:straw 2',
   * 	recipe = {
   * 	{'default:dry_shrub','default:dry_shrub'},
   * 		{'default:dry_shrub','default:dry_shrub'},
   * 	}
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_craft");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,2);
  lua_pushliteral(L,"output");
  lua_pushliteral(L,"darkage:straw 2");
  lua_rawset(L,-3);
  lua_pushliteral(L,"recipe");
  lua_createtable(L,2,0);
  lua_createtable(L,2,0);
  lua_pushliteral(L,"default:dry_shrub");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"default:dry_shrub");
  lua_rawseti(L,-2,2);
  lua_rawseti(L,-2,1);
  lua_createtable(L,2,0);
  lua_pushliteral(L,"default:dry_shrub");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"default:dry_shrub");
  lua_rawseti(L,-2,2);
  lua_rawseti(L,-2,2);
  lua_rawset(L,-3);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_craft({
   * 	output = 'darkage:straw 2',
   * 	recipe = {
   * 	{'darkage:dry_leaves','darkage:dry_leaves'},
   * 		{'darkage:dry_leaves','darkage:dry_leaves'},
   * 	}
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_craft");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,2);
  lua_pushliteral(L,"output");
  lua_pushliteral(L,"darkage:straw 2");
  lua_rawset(L,-3);
  lua_pushliteral(L,"recipe");
  lua_createtable(L,2,0);
  lua_createtable(L,2,0);
  lua_pushliteral(L,"darkage:dry_leaves");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"darkage:dry_leaves");
  lua_rawseti(L,-2,2);
  lua_rawseti(L,-2,1);
  lua_createtable(L,2,0);
  lua_pushliteral(L,"darkage:dry_leaves");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"darkage:dry_leaves");
  lua_rawseti(L,-2,2);
  lua_rawseti(L,-2,2);
  lua_rawset(L,-3);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_craft({
   * 	output = 'darkage:straw_bale',
   * 	recipe = {
   * 	{'darkage:straw','darkage:straw'},
   * 	{'darkage:straw','darkage:straw'},
   * 	}
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_craft");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,2);
  lua_pushliteral(L,"output");
  lua_pushliteral(L,"darkage:straw_bale");
  lua_rawset(L,-3);
  lua_pushliteral(L,"recipe");
  lua_createtable(L,2,0);
  lua_createtable(L,2,0);
  lua_pushliteral(L,"darkage:straw");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"darkage:straw");
  lua_rawseti(L,-2,2);
  lua_rawseti(L,-2,1);
  lua_createtable(L,2,0);
  lua_pushliteral(L,"darkage:straw");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"darkage:straw");
  lua_rawseti(L,-2,2);
  lua_rawseti(L,-2,2);
  lua_rawset(L,-3);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* -- Cookings
   * minetest.register_craft({
   * 	type = "cooking",
   * 	output = "darkage:basalt",
   * 	recipe = "darkage:basalt_cobble",
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_craft");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,3);
  lua_pushliteral(L,"type");
  lua_pushliteral(L,"cooking");
  lua_rawset(L,-3);
  lua_pushliteral(L,"output");
  lua_pushliteral(L,"darkage:basalt");
  lua_rawset(L,-3);
  lua_pushliteral(L,"recipe");
  lua_pushliteral(L,"darkage:basalt_cobble");
  lua_rawset(L,-3);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_craft({
   * 	type = "cooking",
   * 	output = "default:desert_stone",
   * 	recipe = "darkage:desert_stone_cobble",
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_craft");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,3);
  lua_pushliteral(L,"type");
  lua_pushliteral(L,"cooking");
  lua_rawset(L,-3);
  lua_pushliteral(L,"output");
  lua_pushliteral(L,"default:desert_stone");
  lua_rawset(L,-3);
  lua_pushliteral(L,"recipe");
  lua_pushliteral(L,"darkage:desert_stone_cobble");
  lua_rawset(L,-3);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_craft({
   * 	type = "cooking",
   * 	output = "darkage:dry_leaves",
   * 	recipe = "default:leaves",
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_craft");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,3);
  lua_pushliteral(L,"type");
  lua_pushliteral(L,"cooking");
  lua_rawset(L,-3);
  lua_pushliteral(L,"output");
  lua_pushliteral(L,"darkage:dry_leaves");
  lua_rawset(L,-3);
  lua_pushliteral(L,"recipe");
  lua_pushliteral(L,"default:leaves");
  lua_rawset(L,-3);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_craft({
   * 	type = "cooking",
   * 	output = "darkage:sandstone_cobble",
   * 	recipe = "default:sandstone",
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_craft");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,3);
  lua_pushliteral(L,"type");
  lua_pushliteral(L,"cooking");
  lua_rawset(L,-3);
  lua_pushliteral(L,"output");
  lua_pushliteral(L,"darkage:sandstone_cobble");
  lua_rawset(L,-3);
  lua_pushliteral(L,"recipe");
  lua_pushliteral(L,"default:sandstone");
  lua_rawset(L,-3);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_craft({
   * 	type = "cooking",
   * 	output = "darkage:gneiss",
   * 	recipe = "darkage:schist",
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_craft");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,3);
  lua_pushliteral(L,"type");
  lua_pushliteral(L,"cooking");
  lua_rawset(L,-3);
  lua_pushliteral(L,"output");
  lua_pushliteral(L,"darkage:gneiss");
  lua_rawset(L,-3);
  lua_pushliteral(L,"recipe");
  lua_pushliteral(L,"darkage:schist");
  lua_rawset(L,-3);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_craft({
   * 	type = "cooking",
   * 	output = "darkage:gneiss",
   * 	recipe = "darkage:gneiss_cobble",
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_craft");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,3);
  lua_pushliteral(L,"type");
  lua_pushliteral(L,"cooking");
  lua_rawset(L,-3);
  lua_pushliteral(L,"output");
  lua_pushliteral(L,"darkage:gneiss");
  lua_rawset(L,-3);
  lua_pushliteral(L,"recipe");
  lua_pushliteral(L,"darkage:gneiss_cobble");
  lua_rawset(L,-3);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_craft({
   * 	type = "cooking",
   * 	output = "darkage:ors",
   * 	recipe = "darkage:ors_cobble",
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_craft");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,3);
  lua_pushliteral(L,"type");
  lua_pushliteral(L,"cooking");
  lua_rawset(L,-3);
  lua_pushliteral(L,"output");
  lua_pushliteral(L,"darkage:ors");
  lua_rawset(L,-3);
  lua_pushliteral(L,"recipe");
  lua_pushliteral(L,"darkage:ors_cobble");
  lua_rawset(L,-3);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_craft({
   * 	type = "cooking",
   * 	output = "darkage:sandstone_cobble",
   * 	recipe = "default:sandstone",
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_craft");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,3);
  lua_pushliteral(L,"type");
  lua_pushliteral(L,"cooking");
  lua_rawset(L,-3);
  lua_pushliteral(L,"output");
  lua_pushliteral(L,"darkage:sandstone_cobble");
  lua_rawset(L,-3);
  lua_pushliteral(L,"recipe");
  lua_pushliteral(L,"default:sandstone");
  lua_rawset(L,-3);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_craft({
   * 	type = "cooking",
   * 	output = "darkage:schist",
   * 	recipe = "darkage:slate",
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_craft");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,3);
  lua_pushliteral(L,"type");
  lua_pushliteral(L,"cooking");
  lua_rawset(L,-3);
  lua_pushliteral(L,"output");
  lua_pushliteral(L,"darkage:schist");
  lua_rawset(L,-3);
  lua_pushliteral(L,"recipe");
  lua_pushliteral(L,"darkage:slate");
  lua_rawset(L,-3);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_craft({
   * 	type = "cooking",
   * 	output = "darkage:shale",
   * 	recipe = "darkage:mud",
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_craft");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,3);
  lua_pushliteral(L,"type");
  lua_pushliteral(L,"cooking");
  lua_rawset(L,-3);
  lua_pushliteral(L,"output");
  lua_pushliteral(L,"darkage:shale");
  lua_rawset(L,-3);
  lua_pushliteral(L,"recipe");
  lua_pushliteral(L,"darkage:mud");
  lua_rawset(L,-3);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_craft({
   * 	type = "cooking",
   * 	output = "darkage:slate",
   * 	recipe = "darkage:shale",
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_craft");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,3);
  lua_pushliteral(L,"type");
  lua_pushliteral(L,"cooking");
  lua_rawset(L,-3);
  lua_pushliteral(L,"output");
  lua_pushliteral(L,"darkage:slate");
  lua_rawset(L,-3);
  lua_pushliteral(L,"recipe");
  lua_pushliteral(L,"darkage:shale");
  lua_rawset(L,-3);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_craft({
   * 	type = "cooking",
   * 	output = "darkage:slate",
   * 	recipe = "darkage:slate_cobble",
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_craft");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,3);
  lua_pushliteral(L,"type");
  lua_pushliteral(L,"cooking");
  lua_rawset(L,-3);
  lua_pushliteral(L,"output");
  lua_pushliteral(L,"darkage:slate");
  lua_rawset(L,-3);
  lua_pushliteral(L,"recipe");
  lua_pushliteral(L,"darkage:slate_cobble");
  lua_rawset(L,-3);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* -- Desert
   * minetest.register_craft({
   * 	type = "cooking",
   * 	output = "darkage:ors_cobble",
   * 	recipe = "default:desert_stone",
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_craft");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,3);
  lua_pushliteral(L,"type");
  lua_pushliteral(L,"cooking");
  lua_rawset(L,-3);
  lua_pushliteral(L,"output");
  lua_pushliteral(L,"darkage:ors_cobble");
  lua_rawset(L,-3);
  lua_pushliteral(L,"recipe");
  lua_pushliteral(L,"default:desert_stone");
  lua_rawset(L,-3);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_craft({
   * 	output = 'default:desert_stone 2',
   * 	recipe = {
   * 	{'default:desert_sand','default:desert_sand'},
   * 		{'default:desert_sand','default:desert_sand'},
   * 	}
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_craft");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,2);
  lua_pushliteral(L,"output");
  lua_pushliteral(L,"default:desert_stone 2");
  lua_rawset(L,-3);
  lua_pushliteral(L,"recipe");
  lua_createtable(L,2,0);
  lua_createtable(L,2,0);
  lua_pushliteral(L,"default:desert_sand");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"default:desert_sand");
  lua_rawseti(L,-2,2);
  lua_rawseti(L,-2,1);
  lua_createtable(L,2,0);
  lua_pushliteral(L,"default:desert_sand");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"default:desert_sand");
  lua_rawseti(L,-2,2);
  lua_rawseti(L,-2,2);
  lua_rawset(L,-3);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  return 0;
}


/* from lua.c */
static int traceback (lua_State *L) {
  if (!lua_isstring(L, 1))  /* 'message' not a string? */
    return 1;  /* keep it intact */
  lua_getfield(L, LUA_GLOBALSINDEX, "debug");
  if (!lua_istable(L, -1)) {
    lua_pop(L, 1);
    return 1;
  }
  lua_getfield(L, -1, "traceback");
  if (!lua_isfunction(L, -1)) {
    lua_pop(L, 2);
    return 1;
  }
  lua_pushvalue(L, 1);  /* pass error message */
  lua_pushinteger(L, 2);  /* skip this function and traceback */
  lua_call(L, 2, 1);  /* call debug.traceback */
  return 1;
}


static void lc_l_message (const char *pname, const char *msg) {
  if (pname) fprintf(stderr, "%s: ", pname);
  fprintf(stderr, "%s\n", msg);
  fflush(stderr);
}

static int lc_report (lua_State *L, int status) {
  if (status && !lua_isnil(L, -1)) {
    const char *msg = lua_tostring(L, -1);
    if (msg == NULL) msg = "(error object is not a string)";
    /*FIX-IMROVE:progname*/
    lc_l_message("lua", msg);
    lua_pop(L, 1);
  }
  return status;
}

static int lc_docall (lua_State *L, int narg, int clear) {
  int status;
  int base = lua_gettop(L) - narg;  /* function index */
  lua_pushcfunction(L, traceback);  /* push traceback function */
  lua_insert(L, base);  /* put it under chunk and args */
  /*FIX? signal(SIGINT, laction); */
  status = lua_pcall(L, narg, (clear ? 0 : LUA_MULTRET), base);
  /*FIX? signal(SIGINT, SIG_DFL); */
  lua_remove(L, base);  /* remove traceback function */
  /* force a complete garbage collection in case of errors */
  if (status != 0) lua_gc(L, LUA_GCCOLLECT, 0);
  return status;
}

static int lc_dofile (lua_State *L, const char *name) {
  int status = luaL_loadfile(L, name) || lc_docall(L, 0, 1);
  return lc_report(L, status);
}

static int lc_dostring (lua_State *L, const char *s, const char *name) {
  int status = luaL_loadbuffer(L, s, strlen(s), name) || lc_docall(L, 0, 1);
  return lc_report(L, status);
}

static int lc_handle_luainit (lua_State *L) {
  const char *init = getenv(LUA_INIT);
  if (init == NULL) return 0;  /* status OK */
  else if (init[0] == '@')
    return lc_dofile(L, init+1);
  else
    return lc_dostring(L, init, "=" LUA_INIT);
}


typedef struct {
  int c;
  const char ** v;
} lc_args_t;


/* create global arg table */
static void lc_createarg(lua_State * L, const lc_args_t * const args) {
  int i;
  lua_newtable(L);
  for (i=0; i < args->c; i++) {
    lua_pushstring(L, args->v[i]);
    lua_rawseti(L, -2, i);
  }
  lua_setglobal(L, "arg");
}


int lc_pmain_mod_darkage_init(lua_State * L) {
  luaL_openlibs(L);

  lua_pushcfunction(L, traceback);

  const int status1 = lc_handle_luainit(L);
  if (status1 != 0) return 0;

  /* note: IMPROVE: closure not always needed here */
  lua_newtable(L); /* closure table */
  lua_pushcclosure(L, lcf_main, 1);

  int status2 = lua_pcall(L, 0, 0, -2);
  if (status2 != 0) {
    const char * msg = lua_tostring(L,-1);
    if (msg == NULL) msg = "(error object is not a string)";
    fputs(msg, stderr);
  }
  return 0;
}


