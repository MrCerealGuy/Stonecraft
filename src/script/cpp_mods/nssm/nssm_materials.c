/* WARNING: This file was automatically generated by lua2c. */

#ifdef __cplusplus
extern "C" {
#endif
#include <lua.h>
#include <lauxlib.h>
#include <lualib.h>
#ifdef __cplusplus
}
#endif
#include <stdio.h>
#include <stdlib.h>


#include <string.h>


#include <assert.h>

/* name: nssm_register_noneatcraftitems
 * function(name, descr) */
static int lcf1_nssm_register_noneatcraftitems (lua_State * L) {
  enum { lc_nformalargs = 2 };
  lua_settop(L,2);
  
  /* minetest.register_craftitem("nssm:"..name, {
   * 	description = descr,
   * 	image = name ..".png",
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_craftitem");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_pushliteral(L,"nssm:");
  lua_pushvalue(L,1);
  lua_concat(L,2);
  lua_createtable(L,0,2);
  lua_pushliteral(L,"description");
  lua_pushvalue(L,2);
  lua_rawset(L,-3);
  lua_pushliteral(L,"image");
  lua_pushvalue(L,1);
  lua_pushliteral(L,".png");
  lua_concat(L,2);
  lua_rawset(L,-3);
  lua_call(L,2,0);
  assert(lua_gettop(L) == 2);
  return 0;
}


/* name: nssm_register_eatcraftitems
 * function(name, descr, gnam) */
static int lcf1_nssm_register_eatcraftitems (lua_State * L) {
  enum { lc_nformalargs = 3 };
  lua_settop(L,3);
  
  /* minetest.register_craftitem("nssm:"..name, {
   * 	description = descr,
   * 	image = name..".png",
   * 	on_use = minetest.item_eat(gnam),
   * 	groups = { meat=1, eatable=1 },
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_craftitem");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_pushliteral(L,"nssm:");
  lua_pushvalue(L,1);
  lua_concat(L,2);
  lua_createtable(L,0,4);
  lua_pushliteral(L,"description");
  lua_pushvalue(L,2);
  lua_rawset(L,-3);
  lua_pushliteral(L,"image");
  lua_pushvalue(L,1);
  lua_pushliteral(L,".png");
  lua_concat(L,2);
  lua_rawset(L,-3);
  lua_pushliteral(L,"on_use");
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"item_eat");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_pushvalue(L,3);
  lua_call(L,1,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"groups");
  lua_createtable(L,0,2);
  lua_pushliteral(L,"meat");
  lua_pushnumber(L,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"eatable");
  lua_pushnumber(L,1);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_call(L,2,0);
  assert(lua_gettop(L) == 3);
  return 0;
}


/* function(pos, elapsed) */
static int lcf1 (lua_State * L) {
  enum { lc_nformalargs = 2 };
  lua_settop(L,2);
  
  /* nssm:explosion(pos, 3, 1) */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm");
  lua_pushliteral(L,"explosion");
  lua_gettable(L,-2);
  lua_insert(L,-2);
  lua_pushvalue(L,1);
  lua_pushnumber(L,3);
  lua_pushnumber(L,1);
  lua_call(L,4,0);
  assert(lua_gettop(L) == 2);
  
  /* minetest.env:set_node(pos, {name="air"}) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"env");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_pushliteral(L,"set_node");
  lua_gettable(L,-2);
  lua_insert(L,-2);
  lua_pushvalue(L,1);
  lua_createtable(L,0,1);
  lua_pushliteral(L,"name");
  lua_pushliteral(L,"air");
  lua_rawset(L,-3);
  lua_call(L,3,0);
  assert(lua_gettop(L) == 2);
  return 0;
}


/* __add metamethod handler.
 * warning: assumes indices in range LUA_REGISTRYINDEX < x < 0 are relative. */
static void lc_add(lua_State * L, int idxa, int idxb) {
  if (lua_isnumber(L,idxa) && lua_isnumber(L,idxb)) {
    lua_pushnumber(L,lua_tonumber(L,idxa) + lua_tonumber(L,idxb));
  }
  else {
    if (luaL_getmetafield(L,idxa,"__add")||luaL_getmetafield(L,idxb,"__add")) {
      lua_pushvalue(L,idxa < 0 && idxa > LUA_REGISTRYINDEX ? idxa-1 : idxa);
      lua_pushvalue(L,idxb < 0 && idxb > LUA_REGISTRYINDEX ? idxb-2 : idxb);
      lua_call(L,2,1);
    }
    else {
      luaL_error(L, "attempt to perform arithmetic");
    }
  }
}


/* __sub metamethod handler.
 * warning: assumes indices in range LUA_REGISTRYINDEX < x < 0 are relative. */
static void lc_sub(lua_State * L, int idxa, int idxb) {
  if (lua_isnumber(L,idxa) && lua_isnumber(L,idxb)) {
    lua_pushnumber(L,lua_tonumber(L,idxa) - lua_tonumber(L,idxb));
  }
  else {
    if (luaL_getmetafield(L,idxa,"__sub")||luaL_getmetafield(L,idxb,"__sub")) {
      lua_pushvalue(L,idxa < 0 && idxa > LUA_REGISTRYINDEX ? idxa-1 : idxa);
      lua_pushvalue(L,idxb < 0 && idxb > LUA_REGISTRYINDEX ? idxb-2 : idxb);
      lua_call(L,2,1);
    }
    else {
      luaL_error(L, "attempt to perform arithmetic");
    }
  }
}


/* function(pos, node, active_object_count, active_object_count_wider) */
static int lcf2 (lua_State * L) {
  enum { lc_nformalargs = 4 };
  lua_settop(L,4);
  
  /* --local under = {x=pos.x, y=pos.y-1, z=pos.z}
   * --local n = minetest.env:get_node(under).name
   * --if n~= "air" then
   * minetest.set_node({x=pos.x+1, y=pos.y, z=pos.z}, {name = "fire:basic_flame"}) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"set_node");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,3);
  lua_pushliteral(L,"x");
  lua_pushliteral(L,"x");
  lua_gettable(L,1);
  lua_pushnumber(L,1);
  lc_add(L,-2,-1);
  lua_remove(L,-2);
  lua_remove(L,-2);
  lua_rawset(L,-3);
  lua_pushliteral(L,"y");
  lua_pushliteral(L,"y");
  lua_gettable(L,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"z");
  lua_pushliteral(L,"z");
  lua_gettable(L,1);
  lua_rawset(L,-3);
  lua_createtable(L,0,1);
  lua_pushliteral(L,"name");
  lua_pushliteral(L,"fire:basic_flame");
  lua_rawset(L,-3);
  lua_call(L,2,0);
  assert(lua_gettop(L) == 4);
  
  /* minetest.set_node({x=pos.x-1, y=pos.y, z=pos.z}, {name = "fire:basic_flame"}) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"set_node");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,3);
  lua_pushliteral(L,"x");
  lua_pushliteral(L,"x");
  lua_gettable(L,1);
  lua_pushnumber(L,1);
  lc_sub(L,-2,-1);
  lua_remove(L,-2);
  lua_remove(L,-2);
  lua_rawset(L,-3);
  lua_pushliteral(L,"y");
  lua_pushliteral(L,"y");
  lua_gettable(L,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"z");
  lua_pushliteral(L,"z");
  lua_gettable(L,1);
  lua_rawset(L,-3);
  lua_createtable(L,0,1);
  lua_pushliteral(L,"name");
  lua_pushliteral(L,"fire:basic_flame");
  lua_rawset(L,-3);
  lua_call(L,2,0);
  assert(lua_gettop(L) == 4);
  
  /* minetest.set_node({x=pos.x, y=pos.y, z=pos.z-1}, {name = "fire:basic_flame"}) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"set_node");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,3);
  lua_pushliteral(L,"x");
  lua_pushliteral(L,"x");
  lua_gettable(L,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"y");
  lua_pushliteral(L,"y");
  lua_gettable(L,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"z");
  lua_pushliteral(L,"z");
  lua_gettable(L,1);
  lua_pushnumber(L,1);
  lc_sub(L,-2,-1);
  lua_remove(L,-2);
  lua_remove(L,-2);
  lua_rawset(L,-3);
  lua_createtable(L,0,1);
  lua_pushliteral(L,"name");
  lua_pushliteral(L,"fire:basic_flame");
  lua_rawset(L,-3);
  lua_call(L,2,0);
  assert(lua_gettop(L) == 4);
  
  /* minetest.set_node({x=pos.x, y=pos.y, z=pos.z+1}, {name = "fire:basic_flame"}) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"set_node");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,3);
  lua_pushliteral(L,"x");
  lua_pushliteral(L,"x");
  lua_gettable(L,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"y");
  lua_pushliteral(L,"y");
  lua_gettable(L,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"z");
  lua_pushliteral(L,"z");
  lua_gettable(L,1);
  lua_pushnumber(L,1);
  lc_add(L,-2,-1);
  lua_remove(L,-2);
  lua_remove(L,-2);
  lua_rawset(L,-3);
  lua_createtable(L,0,1);
  lua_pushliteral(L,"name");
  lua_pushliteral(L,"fire:basic_flame");
  lua_rawset(L,-3);
  lua_call(L,2,0);
  assert(lua_gettop(L) == 4);
  
  /* minetest.set_node({x=pos.x, y=pos.y+1, z=pos.z}, {name = "fire:basic_flame"}) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"set_node");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,3);
  lua_pushliteral(L,"x");
  lua_pushliteral(L,"x");
  lua_gettable(L,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"y");
  lua_pushliteral(L,"y");
  lua_gettable(L,1);
  lua_pushnumber(L,1);
  lc_add(L,-2,-1);
  lua_remove(L,-2);
  lua_remove(L,-2);
  lua_rawset(L,-3);
  lua_pushliteral(L,"z");
  lua_pushliteral(L,"z");
  lua_gettable(L,1);
  lua_rawset(L,-3);
  lua_createtable(L,0,1);
  lua_pushliteral(L,"name");
  lua_pushliteral(L,"fire:basic_flame");
  lua_rawset(L,-3);
  lua_call(L,2,0);
  assert(lua_gettop(L) == 4);
  return 0;
}


/* function(pos, node, active_object_count, active_object_count_wider) */
static int lcf6 (lua_State * L) {
  enum { lc_nformalargs = 4 };
  lua_settop(L,4);
  
  /* local n = minetest.env:get_node(pos).name */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"env");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_pushliteral(L,"get_node");
  lua_gettable(L,-2);
  lua_insert(L,-2);
  lua_pushvalue(L,1);
  lua_call(L,2,1);
  lua_pushliteral(L,"name");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  assert(lua_gettop(L) == 5);
  
  /* if n== "air" then */
  enum { lc3 = 5 };
  lua_pushliteral(L,"air");
  const int lc4 = lua_equal(L,5,-1);
  lua_pop(L,1);
  lua_pushboolean(L,lc4);
  const int lc5 = lua_toboolean(L,-1);
  lua_pop(L,1);
  if (lc5) {
    
    /* minetest.set_node({x = pos.x, y = pos.y + 1, z = pos.z}, {name = "nssm:web"}) */
    lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
    lua_pushliteral(L,"set_node");
    lua_gettable(L,-2);
    lua_remove(L,-2);
    lua_createtable(L,0,3);
    lua_pushliteral(L,"x");
    lua_pushliteral(L,"x");
    lua_gettable(L,1);
    lua_rawset(L,-3);
    lua_pushliteral(L,"y");
    lua_pushliteral(L,"y");
    lua_gettable(L,1);
    lua_pushnumber(L,1);
    lc_add(L,-2,-1);
    lua_remove(L,-2);
    lua_remove(L,-2);
    lua_rawset(L,-3);
    lua_pushliteral(L,"z");
    lua_pushliteral(L,"z");
    lua_gettable(L,1);
    lua_rawset(L,-3);
    lua_createtable(L,0,1);
    lua_pushliteral(L,"name");
    lua_pushliteral(L,"nssm:web");
    lua_rawset(L,-3);
    lua_call(L,2,0);
    assert(lua_gettop(L) == 5);
  }
  lua_settop(L,lc3);
  assert(lua_gettop(L) == 5);
  return 0;
}


/* function(pos, node, active_object_count, active_object_count_wider) */
static int lcf10 (lua_State * L) {
  enum { lc_nformalargs = 4 };
  lua_settop(L,4);
  
  /* local n = minetest.env:get_node(pos).name */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"env");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_pushliteral(L,"get_node");
  lua_gettable(L,-2);
  lua_insert(L,-2);
  lua_pushvalue(L,1);
  lua_call(L,2,1);
  lua_pushliteral(L,"name");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  assert(lua_gettop(L) == 5);
  
  /* if n== "air" then */
  enum { lc7 = 5 };
  lua_pushliteral(L,"air");
  const int lc8 = lua_equal(L,5,-1);
  lua_pop(L,1);
  lua_pushboolean(L,lc8);
  const int lc9 = lua_toboolean(L,-1);
  lua_pop(L,1);
  if (lc9) {
    
    /* minetest.set_node({x = pos.x + 1, y = pos.y, z = pos.z}, {name = "nssm:web"}) */
    lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
    lua_pushliteral(L,"set_node");
    lua_gettable(L,-2);
    lua_remove(L,-2);
    lua_createtable(L,0,3);
    lua_pushliteral(L,"x");
    lua_pushliteral(L,"x");
    lua_gettable(L,1);
    lua_pushnumber(L,1);
    lc_add(L,-2,-1);
    lua_remove(L,-2);
    lua_remove(L,-2);
    lua_rawset(L,-3);
    lua_pushliteral(L,"y");
    lua_pushliteral(L,"y");
    lua_gettable(L,1);
    lua_rawset(L,-3);
    lua_pushliteral(L,"z");
    lua_pushliteral(L,"z");
    lua_gettable(L,1);
    lua_rawset(L,-3);
    lua_createtable(L,0,1);
    lua_pushliteral(L,"name");
    lua_pushliteral(L,"nssm:web");
    lua_rawset(L,-3);
    lua_call(L,2,0);
    assert(lua_gettop(L) == 5);
  }
  lua_settop(L,lc7);
  assert(lua_gettop(L) == 5);
  return 0;
}


/* function(pos, node, active_object_count, active_object_count_wider) */
static int lcf14 (lua_State * L) {
  enum { lc_nformalargs = 4 };
  lua_settop(L,4);
  
  /* local n = minetest.env:get_node(pos).name */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"env");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_pushliteral(L,"get_node");
  lua_gettable(L,-2);
  lua_insert(L,-2);
  lua_pushvalue(L,1);
  lua_call(L,2,1);
  lua_pushliteral(L,"name");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  assert(lua_gettop(L) == 5);
  
  /* if n== "air" then */
  enum { lc11 = 5 };
  lua_pushliteral(L,"air");
  const int lc12 = lua_equal(L,5,-1);
  lua_pop(L,1);
  lua_pushboolean(L,lc12);
  const int lc13 = lua_toboolean(L,-1);
  lua_pop(L,1);
  if (lc13) {
    
    /* minetest.set_node({x = pos.x - 1, y = pos.y, z = pos.z}, {name = "nssm:web"}) */
    lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
    lua_pushliteral(L,"set_node");
    lua_gettable(L,-2);
    lua_remove(L,-2);
    lua_createtable(L,0,3);
    lua_pushliteral(L,"x");
    lua_pushliteral(L,"x");
    lua_gettable(L,1);
    lua_pushnumber(L,1);
    lc_sub(L,-2,-1);
    lua_remove(L,-2);
    lua_remove(L,-2);
    lua_rawset(L,-3);
    lua_pushliteral(L,"y");
    lua_pushliteral(L,"y");
    lua_gettable(L,1);
    lua_rawset(L,-3);
    lua_pushliteral(L,"z");
    lua_pushliteral(L,"z");
    lua_gettable(L,1);
    lua_rawset(L,-3);
    lua_createtable(L,0,1);
    lua_pushliteral(L,"name");
    lua_pushliteral(L,"nssm:web");
    lua_rawset(L,-3);
    lua_call(L,2,0);
    assert(lua_gettop(L) == 5);
  }
  lua_settop(L,lc11);
  assert(lua_gettop(L) == 5);
  return 0;
}


/* function(pos, node, puncher, pointed_thing) */
static int lcf22 (lua_State * L) {
  enum { lc_nformalargs = 4 };
  lua_settop(L,4);
  
  /* if puncher:get_wielded_item():get_name() == 'nssm:sun_sword' then */
  enum { lc16 = 4 };
  lua_pushvalue(L,3);
  lua_pushliteral(L,"get_wielded_item");
  lua_gettable(L,-2);
  lua_insert(L,-2);
  lua_call(L,1,1);
  lua_pushliteral(L,"get_name");
  lua_gettable(L,-2);
  lua_insert(L,-2);
  lua_call(L,1,1);
  lua_pushliteral(L,"nssm:sun_sword");
  const int lc17 = lua_equal(L,-2,-1);
  lua_pop(L,2);
  lua_pushboolean(L,lc17);
  const int lc18 = lua_toboolean(L,-1);
  lua_pop(L,1);
  if (lc18) {
    
    /* if node.name ~= "air" then */
    enum { lc19 = 4 };
    lua_pushliteral(L,"name");
    lua_gettable(L,2);
    lua_pushliteral(L,"air");
    const int lc20 = lua_equal(L,-2,-1);
    lua_pop(L,2);
    lua_pushboolean(L,lc20);
    lua_pushboolean(L,!(lua_toboolean(L,-1)));
    lua_remove(L,-2);
    const int lc21 = lua_toboolean(L,-1);
    lua_pop(L,1);
    if (lc21) {
      
      /* minetest.add_node(pointed_thing.above, {name = "fire:basic_flame"}) */
      lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
      lua_pushliteral(L,"add_node");
      lua_gettable(L,-2);
      lua_remove(L,-2);
      lua_pushliteral(L,"above");
      lua_gettable(L,4);
      lua_createtable(L,0,1);
      lua_pushliteral(L,"name");
      lua_pushliteral(L,"fire:basic_flame");
      lua_rawset(L,-3);
      lua_call(L,2,0);
      assert(lua_gettop(L) == 4);
    }
    lua_settop(L,lc19);
    assert(lua_gettop(L) == 4);
  }
  lua_settop(L,lc16);
  assert(lua_gettop(L) == 4);
  return 0;
}


/* pushes new closure table onto the stack, using closure table at
 * given index as its parent */
static void lc_newclosuretable(lua_State * L, int idx) {

  lua_newtable(L);
  lua_pushvalue(L,idx);
  lua_rawseti(L,-2,0);


}

/* gets upvalue with ID varid by consulting upvalue table at index
 * tidx for the upvalue table at given nesting level. */
static void lc_getupvalue(lua_State * L, int tidx, int level, int varid) {
  if (level == 0) {
    lua_rawgeti(L,tidx,varid);
  }
  else {
    lua_pushvalue(L,tidx);
    while (--level >= 0) {
      lua_rawgeti(L,tidx,0); /* 0 links to parent table */
      lua_remove(L,-2);
      tidx = -1;
    }
    lua_rawgeti(L,-1,varid);
    lua_remove(L,-2);
  }
}


/* function() */
static int lcf25 (lua_State * L) {
  enum { lc_nformalargs = 0 };
  lua_settop(L,0);
  
  /* minetest.add_entity(pos1, "nssm:".. name) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"add_entity");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lc_getupvalue(L,lua_upvalueindex(1),0,2);
  lua_pushliteral(L,"nssm:");
  lc_getupvalue(L,lua_upvalueindex(1),1,1);
  lua_concat(L,2);
  lua_call(L,2,0);
  assert(lua_gettop(L) == 0);
  return 0;
}


/* function(itemstack, placer, pointed_thing) */
static int lcf26 (lua_State * L) {
  enum { lc_nformalargs = 3 };
  lua_settop(L,3);
  
  /* local pos1=minetest.get_pointed_thing_position(pointed_thing, true) */
  lc_newclosuretable(L,lua_upvalueindex(1));
  enum { lc24 = 4 };
  assert((lua_gettop(L) == lc24));
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"get_pointed_thing_position");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_pushvalue(L,3);
  lua_pushboolean(L,1);
  lua_call(L,2,1);
  lua_rawseti(L,lc24,2);
  assert(lua_gettop(L) == 4);
  
  /* pos1.y=pos1.y+1.5 */
  lc_getupvalue(L,lc24,0,2);
  lua_pushliteral(L,"y");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_pushnumber(L,1.5);
  lc_add(L,-2,-1);
  lua_remove(L,-2);
  lua_remove(L,-2);
  lc_getupvalue(L,lc24,0,2);
  lua_insert(L,-2);
  lua_pushliteral(L,"y");
  lua_insert(L,-2);
  lua_settable(L,-3);
  lua_pop(L,1);
  assert(lua_gettop(L) == 4);
  
  /* core.after(0.1, function()
   * 			minetest.add_entity(pos1, "nssm:".. name)
   * 		end) */
  lua_getfield(L,LUA_ENVIRONINDEX,"core");
  lua_pushliteral(L,"after");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_pushnumber(L,0.1);
  lua_pushvalue(L,lc24);
  lua_pushcclosure(L,lcf25,1);
  lua_call(L,2,0);
  assert(lua_gettop(L) == 4);
  
  /* itemstack:take_item() */
  lua_pushvalue(L,1);
  lua_pushliteral(L,"take_item");
  lua_gettable(L,-2);
  lua_insert(L,-2);
  lua_call(L,1,0);
  assert(lua_gettop(L) == 4);
  
  /* return itemstack */
  lua_pushvalue(L,1);
  return 1;
  assert(lua_gettop(L) == 4);
}


/* name: nssm_register_egg
 * function(name, descr) */
static int lcf1_nssm_register_egg (lua_State * L) {
  enum { lc_nformalargs = 2 };
  lua_settop(L,2);
  lc_newclosuretable(L,lua_upvalueindex(1));
  enum { lc23 = 3 };
  assert((lua_gettop(L) == lc23));
  lua_pushvalue(L,1);
  lua_rawseti(L,-2,1);
  
  /* minetest.register_craftitem("nssm:".. name .."_egg", {
   * 	description = descr .. " Egg",
   * 	image = name .. "_egg.png",
   * 	on_place = function(itemstack, placer, pointed_thing)
   * 		local pos1=minetest.get_pointed_thing_position(pointed_thing, true)
   * 		pos1.y=pos1.y+1.5
   * 		core.after(0.1, function()
   * 			minetest.add_entity(pos1, "nssm:".. name)
   * 		end)
   * 		itemstack:take_item()
   * 		return itemstack
   * 	end,
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_craftitem");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_pushliteral(L,"nssm:");
  lc_getupvalue(L,lc23,0,1);
  lua_pushliteral(L,"_egg");
  lua_concat(L,2);
  lua_concat(L,2);
  lua_createtable(L,0,3);
  lua_pushliteral(L,"description");
  lua_pushvalue(L,2);
  lua_pushliteral(L," Egg");
  lua_concat(L,2);
  lua_rawset(L,-3);
  lua_pushliteral(L,"image");
  lc_getupvalue(L,lc23,0,1);
  lua_pushliteral(L,"_egg.png");
  lua_concat(L,2);
  lua_rawset(L,-3);
  lua_pushliteral(L,"on_place");
  lua_pushvalue(L,lc23);
  lua_pushcclosure(L,lcf26,1);
  lua_rawset(L,-3);
  lua_call(L,2,0);
  assert(lua_gettop(L) == 3);
  return 0;
}


/* function() */
static int lcf28 (lua_State * L) {
  enum { lc_nformalargs = 0 };
  lua_settop(L,0);
  
  /* minetest.add_entity(pos1, "nssm:mese_dragon") */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"add_entity");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lc_getupvalue(L,lua_upvalueindex(1),0,3);
  lua_pushliteral(L,"nssm:mese_dragon");
  lua_call(L,2,0);
  assert(lua_gettop(L) == 0);
  return 0;
}


/* function(itemstack, placer, pointed_thing) */
static int lcf29 (lua_State * L) {
  enum { lc_nformalargs = 3 };
  lua_settop(L,3);
  
  /* local pos1=minetest.get_pointed_thing_position(pointed_thing, true) */
  lc_newclosuretable(L,lua_upvalueindex(1));
  enum { lc27 = 4 };
  assert((lua_gettop(L) == lc27));
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"get_pointed_thing_position");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_pushvalue(L,3);
  lua_pushboolean(L,1);
  lua_call(L,2,1);
  lua_rawseti(L,lc27,3);
  assert(lua_gettop(L) == 4);
  
  /* pos1.y=pos1.y+1.5 */
  lc_getupvalue(L,lc27,0,3);
  lua_pushliteral(L,"y");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_pushnumber(L,1.5);
  lc_add(L,-2,-1);
  lua_remove(L,-2);
  lua_remove(L,-2);
  lc_getupvalue(L,lc27,0,3);
  lua_insert(L,-2);
  lua_pushliteral(L,"y");
  lua_insert(L,-2);
  lua_settable(L,-3);
  lua_pop(L,1);
  assert(lua_gettop(L) == 4);
  
  /* minetest.add_particlespawner({
   * 			amount = 1000,
   * 			time = 0.2,
   * 			minpos = {x=pos1.x-1, y=pos1.y-1, z=pos1.z-1},
   * 			maxpos = {x=pos1.x+1, y=pos1.y+4, z=pos1.z+1},
   * 			minvel = {x=0, y=0, z=0},
   * 			maxvel = {x=1, y=5, z=1},
   * 			minacc = {x=-0.5,y=5,z=-0.5},
   * 			maxacc = {x=0.5,y=5,z=0.5},
   * 			minexptime = 1,
   * 			maxexptime = 3,
   * 			minsize = 2,
   * 			maxsize = 4,
   * 			collisiondetection = false,
   * 			vertical = false,
   * 			texture = "tnt_smoke.png",
   * 		}) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"add_particlespawner");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,15);
  lua_pushliteral(L,"amount");
  lua_pushnumber(L,1000);
  lua_rawset(L,-3);
  lua_pushliteral(L,"time");
  lua_pushnumber(L,0.2);
  lua_rawset(L,-3);
  lua_pushliteral(L,"minpos");
  lua_createtable(L,0,3);
  lua_pushliteral(L,"x");
  lc_getupvalue(L,lc27,0,3);
  lua_pushliteral(L,"x");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_pushnumber(L,1);
  lc_sub(L,-2,-1);
  lua_remove(L,-2);
  lua_remove(L,-2);
  lua_rawset(L,-3);
  lua_pushliteral(L,"y");
  lc_getupvalue(L,lc27,0,3);
  lua_pushliteral(L,"y");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_pushnumber(L,1);
  lc_sub(L,-2,-1);
  lua_remove(L,-2);
  lua_remove(L,-2);
  lua_rawset(L,-3);
  lua_pushliteral(L,"z");
  lc_getupvalue(L,lc27,0,3);
  lua_pushliteral(L,"z");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_pushnumber(L,1);
  lc_sub(L,-2,-1);
  lua_remove(L,-2);
  lua_remove(L,-2);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"maxpos");
  lua_createtable(L,0,3);
  lua_pushliteral(L,"x");
  lc_getupvalue(L,lc27,0,3);
  lua_pushliteral(L,"x");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_pushnumber(L,1);
  lc_add(L,-2,-1);
  lua_remove(L,-2);
  lua_remove(L,-2);
  lua_rawset(L,-3);
  lua_pushliteral(L,"y");
  lc_getupvalue(L,lc27,0,3);
  lua_pushliteral(L,"y");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_pushnumber(L,4);
  lc_add(L,-2,-1);
  lua_remove(L,-2);
  lua_remove(L,-2);
  lua_rawset(L,-3);
  lua_pushliteral(L,"z");
  lc_getupvalue(L,lc27,0,3);
  lua_pushliteral(L,"z");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_pushnumber(L,1);
  lc_add(L,-2,-1);
  lua_remove(L,-2);
  lua_remove(L,-2);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"minvel");
  lua_createtable(L,0,3);
  lua_pushliteral(L,"x");
  lua_pushnumber(L,0);
  lua_rawset(L,-3);
  lua_pushliteral(L,"y");
  lua_pushnumber(L,0);
  lua_rawset(L,-3);
  lua_pushliteral(L,"z");
  lua_pushnumber(L,0);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"maxvel");
  lua_createtable(L,0,3);
  lua_pushliteral(L,"x");
  lua_pushnumber(L,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"y");
  lua_pushnumber(L,5);
  lua_rawset(L,-3);
  lua_pushliteral(L,"z");
  lua_pushnumber(L,1);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"minacc");
  lua_createtable(L,0,3);
  lua_pushliteral(L,"x");
  lua_pushnumber(L,-0.5);
  lua_rawset(L,-3);
  lua_pushliteral(L,"y");
  lua_pushnumber(L,5);
  lua_rawset(L,-3);
  lua_pushliteral(L,"z");
  lua_pushnumber(L,-0.5);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"maxacc");
  lua_createtable(L,0,3);
  lua_pushliteral(L,"x");
  lua_pushnumber(L,0.5);
  lua_rawset(L,-3);
  lua_pushliteral(L,"y");
  lua_pushnumber(L,5);
  lua_rawset(L,-3);
  lua_pushliteral(L,"z");
  lua_pushnumber(L,0.5);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"minexptime");
  lua_pushnumber(L,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"maxexptime");
  lua_pushnumber(L,3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"minsize");
  lua_pushnumber(L,2);
  lua_rawset(L,-3);
  lua_pushliteral(L,"maxsize");
  lua_pushnumber(L,4);
  lua_rawset(L,-3);
  lua_pushliteral(L,"collisiondetection");
  lua_pushboolean(L,0);
  lua_rawset(L,-3);
  lua_pushliteral(L,"vertical");
  lua_pushboolean(L,0);
  lua_rawset(L,-3);
  lua_pushliteral(L,"texture");
  lua_pushliteral(L,"tnt_smoke.png");
  lua_rawset(L,-3);
  lua_call(L,1,0);
  assert(lua_gettop(L) == 4);
  
  /* core.after(0.4, function()
   * 			minetest.add_entity(pos1, "nssm:mese_dragon")
   * 		end) */
  lua_getfield(L,LUA_ENVIRONINDEX,"core");
  lua_pushliteral(L,"after");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_pushnumber(L,0.4);
  lua_pushvalue(L,lc27);
  lua_pushcclosure(L,lcf28,1);
  lua_call(L,2,0);
  assert(lua_gettop(L) == 4);
  
  /* itemstack:take_item() */
  lua_pushvalue(L,1);
  lua_pushliteral(L,"take_item");
  lua_gettable(L,-2);
  lua_insert(L,-2);
  lua_call(L,1,0);
  assert(lua_gettop(L) == 4);
  
  /* return itemstack */
  lua_pushvalue(L,1);
  return 1;
  assert(lua_gettop(L) == 4);
}


/* name: (main)
 * function(...) */
static int lcf_main (lua_State * L) {
  enum { lc_nformalargs = 0 };
  #ifndef NDEBUG
  const int lc_nactualargs = lua_gettop(L);
  #endif
  #ifndef NDEBUG
  const int lc_nextra = (lc_nactualargs - lc_nformalargs);
  #endif
  
  /* --[[
   * 
   * 
   * 2016-05-03 modified by MrCerealGuy <mrcerealguy@gmx.de>
   * 	removed flying_duck
   * 
   * --]] 
   * --non eatable craftitems
   * function nssm_register_noneatcraftitems (name, descr)
   * 
   * minetest.register_craftitem("nssm:"..name, {
   * 	description = descr,
   * 	image = name ..".png",
   * })
   * 
   * end */
  lua_pushcfunction(L,lcf1_nssm_register_noneatcraftitems);
  lua_setfield(L,LUA_ENVIRONINDEX,"nssm_register_noneatcraftitems");
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_noneatcraftitems ('sky_feather','Sky Feather') */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_noneatcraftitems");
  lua_pushliteral(L,"sky_feather");
  lua_pushliteral(L,"Sky Feather");
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_noneatcraftitems ('snake_scute','Snake Scute') */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_noneatcraftitems");
  lua_pushliteral(L,"snake_scute");
  lua_pushliteral(L,"Snake Scute");
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_noneatcraftitems ('eyed_tentacle','Eyed Tentacle') */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_noneatcraftitems");
  lua_pushliteral(L,"eyed_tentacle");
  lua_pushliteral(L,"Eyed Tentacle");
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_noneatcraftitems ('king_duck_crown','King Duck Crown') */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_noneatcraftitems");
  lua_pushliteral(L,"king_duck_crown");
  lua_pushliteral(L,"King Duck Crown");
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_noneatcraftitems ('great_energy_globe','Great Energy Globe') */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_noneatcraftitems");
  lua_pushliteral(L,"great_energy_globe");
  lua_pushliteral(L,"Great Energy Globe");
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_noneatcraftitems ('superior_energy_globe','Superior Energy Globe') */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_noneatcraftitems");
  lua_pushliteral(L,"superior_energy_globe");
  lua_pushliteral(L,"Superior Energy Globe");
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_noneatcraftitems ('ant_queen_abdomen','Ant Queen Abdomen') */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_noneatcraftitems");
  lua_pushliteral(L,"ant_queen_abdomen");
  lua_pushliteral(L,"Ant Queen Abdomen");
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_noneatcraftitems ('masticone_skull','Masticone Skull') */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_noneatcraftitems");
  lua_pushliteral(L,"masticone_skull");
  lua_pushliteral(L,"Masticone Skull");
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_noneatcraftitems ('masticone_skull_fragments','Masticone Skull Fragments') */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_noneatcraftitems");
  lua_pushliteral(L,"masticone_skull_fragments");
  lua_pushliteral(L,"Masticone Skull Fragments");
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_noneatcraftitems ('masticone_skull_crowned','Masticone Skull Crowned') */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_noneatcraftitems");
  lua_pushliteral(L,"masticone_skull_crowned");
  lua_pushliteral(L,"Masticone Skull Crowned");
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_noneatcraftitems ('tentacle_curly','Kraken Tentacle') */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_noneatcraftitems");
  lua_pushliteral(L,"tentacle_curly");
  lua_pushliteral(L,"Kraken Tentacle");
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_noneatcraftitems ('lava_titan_eye','Lava Titan Eye') */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_noneatcraftitems");
  lua_pushliteral(L,"lava_titan_eye");
  lua_pushliteral(L,"Lava Titan Eye");
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_noneatcraftitems ('duck_beak','Duck Beak') */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_noneatcraftitems");
  lua_pushliteral(L,"duck_beak");
  lua_pushliteral(L,"Duck Beak");
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_noneatcraftitems ('ice_tooth','Ice Tooth') */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_noneatcraftitems");
  lua_pushliteral(L,"ice_tooth");
  lua_pushliteral(L,"Ice Tooth");
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_noneatcraftitems ('little_ice_tooth','Little Ice Tooth') */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_noneatcraftitems");
  lua_pushliteral(L,"little_ice_tooth");
  lua_pushliteral(L,"Little Ice Tooth");
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_noneatcraftitems ('black_sand',"Black Sand") */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_noneatcraftitems");
  lua_pushliteral(L,"black_sand");
  lua_pushliteral(L,"Black Sand");
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_noneatcraftitems ('black_ice_tooth','Black Ice Tooth') */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_noneatcraftitems");
  lua_pushliteral(L,"black_ice_tooth");
  lua_pushliteral(L,"Black Ice Tooth");
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_noneatcraftitems ('tarantula_chelicerae','Tarantula Chelicerae') */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_noneatcraftitems");
  lua_pushliteral(L,"tarantula_chelicerae");
  lua_pushliteral(L,"Tarantula Chelicerae");
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_noneatcraftitems ('crab_chela','Crab Chela') */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_noneatcraftitems");
  lua_pushliteral(L,"crab_chela");
  lua_pushliteral(L,"Crab Chela");
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_noneatcraftitems ('cursed_pumpkin_seed','Cursed Pumpkin Seed') */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_noneatcraftitems");
  lua_pushliteral(L,"cursed_pumpkin_seed");
  lua_pushliteral(L,"Cursed Pumpkin Seed");
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_noneatcraftitems ('mantis_claw','Mantis Claw') */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_noneatcraftitems");
  lua_pushliteral(L,"mantis_claw");
  lua_pushliteral(L,"Mantis Claw");
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* --nssm_register_noneatcraftitems ('manticore_fur','Manticore Fur')
   * --nssm_register_noneatcraftitems ('ant_hard_skin','Ant Hard Skin')
   * --nssm_register_noneatcraftitems ('bloco_skin','Bloco Skin')
   * --nssm_register_noneatcraftitems ('crab_carapace_fragment','Crab Carapace Fragment')
   * --nssm_register_noneatcraftitems ('crocodile_skin','Crocodile Skin')
   * nssm_register_noneatcraftitems ('manticore_spine','Manticore Spine') */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_noneatcraftitems");
  lua_pushliteral(L,"manticore_spine");
  lua_pushliteral(L,"Manticore Spine");
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_noneatcraftitems ('night_feather','Night Feather') */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_noneatcraftitems");
  lua_pushliteral(L,"night_feather");
  lua_pushliteral(L,"Night Feather");
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_noneatcraftitems ('sun_feather','Sun Feather') */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_noneatcraftitems");
  lua_pushliteral(L,"sun_feather");
  lua_pushliteral(L,"Sun Feather");
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_noneatcraftitems ('masticone_fang','Masticone Fang') */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_noneatcraftitems");
  lua_pushliteral(L,"masticone_fang");
  lua_pushliteral(L,"Masticone Fang");
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_noneatcraftitems ('white_wolf_fur','White Wolf Fur') */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_noneatcraftitems");
  lua_pushliteral(L,"white_wolf_fur");
  lua_pushliteral(L,"White Wolf Fur");
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_noneatcraftitems ('stoneater_mandible','Stoneater Mandible') */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_noneatcraftitems");
  lua_pushliteral(L,"stoneater_mandible");
  lua_pushliteral(L,"Stoneater Mandible");
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_noneatcraftitems ('ant_mandible','Ant Mandible') */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_noneatcraftitems");
  lua_pushliteral(L,"ant_mandible");
  lua_pushliteral(L,"Ant Mandible");
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_noneatcraftitems ('life_energy','Life Energy') */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_noneatcraftitems");
  lua_pushliteral(L,"life_energy");
  lua_pushliteral(L,"Life Energy");
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_noneatcraftitems ('wolf_fur','Wolf Fur') */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_noneatcraftitems");
  lua_pushliteral(L,"wolf_fur");
  lua_pushliteral(L,"Wolf Fur");
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_noneatcraftitems ('energy_globe','Energy Globe') */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_noneatcraftitems");
  lua_pushliteral(L,"energy_globe");
  lua_pushliteral(L,"Energy Globe");
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* function nssm_register_eatcraftitems (name, descr, gnam)
   * 
   * minetest.register_craftitem("nssm:"..name, {
   * 	description = descr,
   * 	image = name..".png",
   * 	on_use = minetest.item_eat(gnam),
   * 	groups = { meat=1, eatable=1 },
   * })
   * 
   * end */
  lua_pushcfunction(L,lcf1_nssm_register_eatcraftitems);
  lua_setfield(L,LUA_ENVIRONINDEX,"nssm_register_eatcraftitems");
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_eatcraftitems ('werewolf_leg','Werewolf Leg',3) */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_eatcraftitems");
  lua_pushliteral(L,"werewolf_leg");
  lua_pushliteral(L,"Werewolf Leg");
  lua_pushnumber(L,3);
  lua_call(L,3,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_eatcraftitems ('heron_leg','Moonheron Leg',2) */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_eatcraftitems");
  lua_pushliteral(L,"heron_leg");
  lua_pushliteral(L,"Moonheron Leg");
  lua_pushnumber(L,2);
  lua_call(L,3,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_eatcraftitems ('chichibios_heron_leg',"Chichibio's Moonheron Leg",4) */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_eatcraftitems");
  lua_pushliteral(L,"chichibios_heron_leg");
  lua_pushliteral(L,"Chichibio's Moonheron Leg");
  lua_pushnumber(L,4);
  lua_call(L,3,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_eatcraftitems ('crocodile_tail','Crocodile Tail',3) */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_eatcraftitems");
  lua_pushliteral(L,"crocodile_tail");
  lua_pushliteral(L,"Crocodile Tail");
  lua_pushnumber(L,3);
  lua_call(L,3,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_eatcraftitems ('roasted_crocodile_tail','Roasted Crocodile Tail',6) */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_eatcraftitems");
  lua_pushliteral(L,"roasted_crocodile_tail");
  lua_pushliteral(L,"Roasted Crocodile Tail");
  lua_pushnumber(L,6);
  lua_call(L,3,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_eatcraftitems ('roasted_werewolf_leg','Roasted_Werewolf Leg',6) */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_eatcraftitems");
  lua_pushliteral(L,"roasted_werewolf_leg");
  lua_pushliteral(L,"Roasted_Werewolf Leg");
  lua_pushnumber(L,6);
  lua_call(L,3,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_eatcraftitems ('duck_legs','Duck Legs',1) */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_eatcraftitems");
  lua_pushliteral(L,"duck_legs");
  lua_pushliteral(L,"Duck Legs");
  lua_pushnumber(L,1);
  lua_call(L,3,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_eatcraftitems ('roasted_duck_legs','Roasted Duck Leg',3) */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_eatcraftitems");
  lua_pushliteral(L,"roasted_duck_legs");
  lua_pushliteral(L,"Roasted Duck Leg");
  lua_pushnumber(L,3);
  lua_call(L,3,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_eatcraftitems ('ant_leg','Ant Leg',1) */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_eatcraftitems");
  lua_pushliteral(L,"ant_leg");
  lua_pushliteral(L,"Ant Leg");
  lua_pushnumber(L,1);
  lua_call(L,3,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_eatcraftitems ('roasted_ant_leg','Roasted Ant Leg',4) */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_eatcraftitems");
  lua_pushliteral(L,"roasted_ant_leg");
  lua_pushliteral(L,"Roasted Ant Leg");
  lua_pushnumber(L,4);
  lua_call(L,3,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_eatcraftitems ('spider_leg','Spider Leg',1) */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_eatcraftitems");
  lua_pushliteral(L,"spider_leg");
  lua_pushliteral(L,"Spider Leg");
  lua_pushnumber(L,1);
  lua_call(L,3,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_eatcraftitems ('roasted_spider_leg','Roasted Spider Leg',4) */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_eatcraftitems");
  lua_pushliteral(L,"roasted_spider_leg");
  lua_pushliteral(L,"Roasted Spider Leg");
  lua_pushnumber(L,4);
  lua_call(L,3,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* --nssm_register_eatcraftitems ('brain','Brain',3)
   * --nssm_register_eatcraftitems ('roasted_brain','Roasted Brain',8)
   * nssm_register_eatcraftitems ('tentacle','Tentacle',2) */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_eatcraftitems");
  lua_pushliteral(L,"tentacle");
  lua_pushliteral(L,"Tentacle");
  lua_pushnumber(L,2);
  lua_call(L,3,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_eatcraftitems ('roasted_tentacle','Roasted Tentacle',5) */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_eatcraftitems");
  lua_pushliteral(L,"roasted_tentacle");
  lua_pushliteral(L,"Roasted Tentacle");
  lua_pushnumber(L,5);
  lua_call(L,3,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_eatcraftitems ('worm_flesh','Worm Flesh',-1) */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_eatcraftitems");
  lua_pushliteral(L,"worm_flesh");
  lua_pushliteral(L,"Worm Flesh");
  lua_pushnumber(L,-1);
  lua_call(L,3,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_eatcraftitems ('roasted_worm_flesh','Roasted Worm Flesh',3) */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_eatcraftitems");
  lua_pushliteral(L,"roasted_worm_flesh");
  lua_pushliteral(L,"Roasted Worm Flesh");
  lua_pushnumber(L,3);
  lua_call(L,3,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_eatcraftitems ('amphibian_heart','Amphibian Heart',1) */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_eatcraftitems");
  lua_pushliteral(L,"amphibian_heart");
  lua_pushliteral(L,"Amphibian Heart");
  lua_pushnumber(L,1);
  lua_call(L,3,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_eatcraftitems ('roasted_amphibian_heart','Roasted Amphibian Heart',8) */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_eatcraftitems");
  lua_pushliteral(L,"roasted_amphibian_heart");
  lua_pushliteral(L,"Roasted Amphibian Heart");
  lua_pushnumber(L,8);
  lua_call(L,3,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_eatcraftitems ('raw_scrausics_wing','Raw Scrausics Wing',1) */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_eatcraftitems");
  lua_pushliteral(L,"raw_scrausics_wing");
  lua_pushliteral(L,"Raw Scrausics Wing");
  lua_pushnumber(L,1);
  lua_call(L,3,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_eatcraftitems ('spicy_scrausics_wing','Spicy Scrausics Wing',6) */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_eatcraftitems");
  lua_pushliteral(L,"spicy_scrausics_wing");
  lua_pushliteral(L,"Spicy Scrausics Wing");
  lua_pushnumber(L,6);
  lua_call(L,3,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_eatcraftitems ('phoenix_nuggets','Phoenix Nuggets',20) */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_eatcraftitems");
  lua_pushliteral(L,"phoenix_nuggets");
  lua_pushliteral(L,"Phoenix Nuggets");
  lua_pushnumber(L,20);
  lua_call(L,3,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_eatcraftitems ('phoenix_tear','Phoenix Tear',20) */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_eatcraftitems");
  lua_pushliteral(L,"phoenix_tear");
  lua_pushliteral(L,"Phoenix Tear");
  lua_pushnumber(L,20);
  lua_call(L,3,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_eatcraftitems ('frosted_amphibian_heart','Frosted Amphibian Heart',-1) */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_eatcraftitems");
  lua_pushliteral(L,"frosted_amphibian_heart");
  lua_pushliteral(L,"Frosted Amphibian Heart");
  lua_pushnumber(L,-1);
  lua_call(L,3,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_eatcraftitems ('surimi','Surimi',4) */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_eatcraftitems");
  lua_pushliteral(L,"surimi");
  lua_pushliteral(L,"Surimi");
  lua_pushnumber(L,4);
  lua_call(L,3,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* --ore generation
   * minetest.register_ore({
   * 		ore_type       = "scatter",
   * 		ore            = "nssm:modders_block",
   * 		wherein        = "default:stone",
   * 		clust_scarcity = 50*50*50,
   * 		clust_num_ores = 1,
   * 		clust_size     = 1,
   * 		y_min     = -115,
   * 		y_max     = -95,
   * 			}) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_ore");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,8);
  lua_pushliteral(L,"ore_type");
  lua_pushliteral(L,"scatter");
  lua_rawset(L,-3);
  lua_pushliteral(L,"ore");
  lua_pushliteral(L,"nssm:modders_block");
  lua_rawset(L,-3);
  lua_pushliteral(L,"wherein");
  lua_pushliteral(L,"default:stone");
  lua_rawset(L,-3);
  lua_pushliteral(L,"clust_scarcity");
  lua_pushnumber(L,125000);
  lua_rawset(L,-3);
  lua_pushliteral(L,"clust_num_ores");
  lua_pushnumber(L,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"clust_size");
  lua_pushnumber(L,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"y_min");
  lua_pushnumber(L,-115);
  lua_rawset(L,-3);
  lua_pushliteral(L,"y_max");
  lua_pushnumber(L,-95);
  lua_rawset(L,-3);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_ore({
   * 		ore_type       = "scatter",
   * 		ore            = "nssm:ant_dirt",
   * 		wherein        = "default:cobble",
   * 		clust_scarcity = 1,
   * 		clust_num_ores = 27,
   * 		clust_size     = 3,
   * 		y_min     = -1,
   * 		y_max     = 40,
   * 			}) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_ore");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,8);
  lua_pushliteral(L,"ore_type");
  lua_pushliteral(L,"scatter");
  lua_rawset(L,-3);
  lua_pushliteral(L,"ore");
  lua_pushliteral(L,"nssm:ant_dirt");
  lua_rawset(L,-3);
  lua_pushliteral(L,"wherein");
  lua_pushliteral(L,"default:cobble");
  lua_rawset(L,-3);
  lua_pushliteral(L,"clust_scarcity");
  lua_pushnumber(L,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"clust_num_ores");
  lua_pushnumber(L,27);
  lua_rawset(L,-3);
  lua_pushliteral(L,"clust_size");
  lua_pushnumber(L,3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"y_min");
  lua_pushnumber(L,-1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"y_max");
  lua_pushnumber(L,40);
  lua_rawset(L,-3);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_ore({
   * 		ore_type       = "scatter",
   * 		ore            = "nssm:ant_dirt",
   * 		wherein        = "default:mossycobble",
   * 		clust_scarcity = 1,
   * 		clust_num_ores = 27,
   * 		clust_size     = 3,
   * 		y_min     = -1000,
   * 		y_max     = 40,
   * 			}) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_ore");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,8);
  lua_pushliteral(L,"ore_type");
  lua_pushliteral(L,"scatter");
  lua_rawset(L,-3);
  lua_pushliteral(L,"ore");
  lua_pushliteral(L,"nssm:ant_dirt");
  lua_rawset(L,-3);
  lua_pushliteral(L,"wherein");
  lua_pushliteral(L,"default:mossycobble");
  lua_rawset(L,-3);
  lua_pushliteral(L,"clust_scarcity");
  lua_pushnumber(L,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"clust_num_ores");
  lua_pushnumber(L,27);
  lua_rawset(L,-3);
  lua_pushliteral(L,"clust_size");
  lua_pushnumber(L,3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"y_min");
  lua_pushnumber(L,-1000);
  lua_rawset(L,-3);
  lua_pushliteral(L,"y_max");
  lua_pushnumber(L,40);
  lua_rawset(L,-3);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_ore({
   * 		ore_type       = "scatter",
   * 		ore            = "nssm:ant_dirt",
   * 		wherein        = "default:sandstonebrick",
   * 		clust_scarcity = 1,
   * 		clust_num_ores = 27,
   * 		clust_size     = 3,
   * 		y_min     = -1000,
   * 		y_max     = 40,
   * 			}) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_ore");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,8);
  lua_pushliteral(L,"ore_type");
  lua_pushliteral(L,"scatter");
  lua_rawset(L,-3);
  lua_pushliteral(L,"ore");
  lua_pushliteral(L,"nssm:ant_dirt");
  lua_rawset(L,-3);
  lua_pushliteral(L,"wherein");
  lua_pushliteral(L,"default:sandstonebrick");
  lua_rawset(L,-3);
  lua_pushliteral(L,"clust_scarcity");
  lua_pushnumber(L,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"clust_num_ores");
  lua_pushnumber(L,27);
  lua_rawset(L,-3);
  lua_pushliteral(L,"clust_size");
  lua_pushnumber(L,3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"y_min");
  lua_pushnumber(L,-1000);
  lua_rawset(L,-3);
  lua_pushliteral(L,"y_max");
  lua_pushnumber(L,40);
  lua_rawset(L,-3);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_ore({
   * 		ore_type       = "scatter",
   * 		ore            = "nssm:ant_dirt",
   * 		wherein        = "stairs:stair_sandstonebrick",
   * 		clust_scarcity = 1,
   * 		clust_num_ores = 27,
   * 		clust_size     = 3,
   * 		y_min     = -1000,
   * 		y_max     = 40,
   * 			}) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_ore");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,8);
  lua_pushliteral(L,"ore_type");
  lua_pushliteral(L,"scatter");
  lua_rawset(L,-3);
  lua_pushliteral(L,"ore");
  lua_pushliteral(L,"nssm:ant_dirt");
  lua_rawset(L,-3);
  lua_pushliteral(L,"wherein");
  lua_pushliteral(L,"stairs:stair_sandstonebrick");
  lua_rawset(L,-3);
  lua_pushliteral(L,"clust_scarcity");
  lua_pushnumber(L,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"clust_num_ores");
  lua_pushnumber(L,27);
  lua_rawset(L,-3);
  lua_pushliteral(L,"clust_size");
  lua_pushnumber(L,3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"y_min");
  lua_pushnumber(L,-1000);
  lua_rawset(L,-3);
  lua_pushliteral(L,"y_max");
  lua_pushnumber(L,40);
  lua_rawset(L,-3);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_ore({
   * 		ore_type       = "scatter",
   * 		ore            = "nssm:ant_dirt",
   * 		wherein        = "stairs:stair_cobble",
   * 		clust_scarcity = 1,
   * 		clust_num_ores = 27,
   * 		clust_size     = 3,
   * 		y_min     = -1000,
   * 		y_max     = 40,
   * 			}) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_ore");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,8);
  lua_pushliteral(L,"ore_type");
  lua_pushliteral(L,"scatter");
  lua_rawset(L,-3);
  lua_pushliteral(L,"ore");
  lua_pushliteral(L,"nssm:ant_dirt");
  lua_rawset(L,-3);
  lua_pushliteral(L,"wherein");
  lua_pushliteral(L,"stairs:stair_cobble");
  lua_rawset(L,-3);
  lua_pushliteral(L,"clust_scarcity");
  lua_pushnumber(L,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"clust_num_ores");
  lua_pushnumber(L,27);
  lua_rawset(L,-3);
  lua_pushliteral(L,"clust_size");
  lua_pushnumber(L,3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"y_min");
  lua_pushnumber(L,-1000);
  lua_rawset(L,-3);
  lua_pushliteral(L,"y_max");
  lua_pushnumber(L,40);
  lua_rawset(L,-3);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_ore({
   * 		ore_type       = "scatter",
   * 		ore            = "nssm:web",
   * 		wherein        = "default:junglegrass",
   * 		clust_scarcity = 2*2*2,
   * 		clust_num_ores = 2,
   * 		clust_size     = 2,
   * 		y_min     = -20,
   * 		y_max     = 200,
   * 			}) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_ore");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,8);
  lua_pushliteral(L,"ore_type");
  lua_pushliteral(L,"scatter");
  lua_rawset(L,-3);
  lua_pushliteral(L,"ore");
  lua_pushliteral(L,"nssm:web");
  lua_rawset(L,-3);
  lua_pushliteral(L,"wherein");
  lua_pushliteral(L,"default:junglegrass");
  lua_rawset(L,-3);
  lua_pushliteral(L,"clust_scarcity");
  lua_pushnumber(L,8);
  lua_rawset(L,-3);
  lua_pushliteral(L,"clust_num_ores");
  lua_pushnumber(L,2);
  lua_rawset(L,-3);
  lua_pushliteral(L,"clust_size");
  lua_pushnumber(L,2);
  lua_rawset(L,-3);
  lua_pushliteral(L,"y_min");
  lua_pushnumber(L,-20);
  lua_rawset(L,-3);
  lua_pushliteral(L,"y_max");
  lua_pushnumber(L,200);
  lua_rawset(L,-3);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_ore({
   * 		ore_type       = "scatter",
   * 		ore            = "nssm:web",
   * 		wherein        = "default:jungleleaves",
   * 		clust_scarcity = 4*4*4,
   * 		clust_num_ores = 5,
   * 		clust_size     = 5,
   * 		y_min     = -20,
   * 		y_max     = 200,
   * 			}
   * ) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_ore");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,8);
  lua_pushliteral(L,"ore_type");
  lua_pushliteral(L,"scatter");
  lua_rawset(L,-3);
  lua_pushliteral(L,"ore");
  lua_pushliteral(L,"nssm:web");
  lua_rawset(L,-3);
  lua_pushliteral(L,"wherein");
  lua_pushliteral(L,"default:jungleleaves");
  lua_rawset(L,-3);
  lua_pushliteral(L,"clust_scarcity");
  lua_pushnumber(L,64);
  lua_rawset(L,-3);
  lua_pushliteral(L,"clust_num_ores");
  lua_pushnumber(L,5);
  lua_rawset(L,-3);
  lua_pushliteral(L,"clust_size");
  lua_pushnumber(L,5);
  lua_rawset(L,-3);
  lua_pushliteral(L,"y_min");
  lua_pushnumber(L,-20);
  lua_rawset(L,-3);
  lua_pushliteral(L,"y_max");
  lua_pushnumber(L,200);
  lua_rawset(L,-3);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* --nodes
   * minetest.register_node("nssm:ant_dirt", {
   * 	description = "Ant Dirt",
   * 	tiles = {"ant_dirt.png"},
   * 	groups = {crumbly=3},
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_node");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_pushliteral(L,"nssm:ant_dirt");
  lua_createtable(L,0,3);
  lua_pushliteral(L,"description");
  lua_pushliteral(L,"Ant Dirt");
  lua_rawset(L,-3);
  lua_pushliteral(L,"tiles");
  lua_createtable(L,1,0);
  lua_pushliteral(L,"ant_dirt.png");
  lua_rawseti(L,-2,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"groups");
  lua_createtable(L,0,1);
  lua_pushliteral(L,"crumbly");
  lua_pushnumber(L,3);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_node("nssm:venomous_gas", {
   * 	description = "Venomous Gas",
   * 	inventory_image = minetest.inventorycube("venomous_gas.png"),
   * 	drawtype = "airlike",
   * 	tiles = {
   * 		{name="venomous_gas_animated.png", animation={type="vertical_frames", aspect_w=16, aspect_h=16, length=3.0}}
   * 	},
   * 	paramtype = "light",
   * 	walkable = false,
   * 	sunlight_propagates = true,
   * 	pointable = false,
   * 	diggable = false,
   * 	buildable_to = true,
   * 	drop = "",
   * 	drowning = 1,
   * 	damage_per_second = 1,
   * 	post_effect_color = {a=100, r=1, g=100, b=1},
   * 	groups = {flammable = 2},
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_node");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_pushliteral(L,"nssm:venomous_gas");
  lua_createtable(L,0,15);
  lua_pushliteral(L,"description");
  lua_pushliteral(L,"Venomous Gas");
  lua_rawset(L,-3);
  lua_pushliteral(L,"inventory_image");
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"inventorycube");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_pushliteral(L,"venomous_gas.png");
  lua_call(L,1,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"drawtype");
  lua_pushliteral(L,"airlike");
  lua_rawset(L,-3);
  lua_pushliteral(L,"tiles");
  lua_createtable(L,1,0);
  lua_createtable(L,0,2);
  lua_pushliteral(L,"name");
  lua_pushliteral(L,"venomous_gas_animated.png");
  lua_rawset(L,-3);
  lua_pushliteral(L,"animation");
  lua_createtable(L,0,4);
  lua_pushliteral(L,"type");
  lua_pushliteral(L,"vertical_frames");
  lua_rawset(L,-3);
  lua_pushliteral(L,"aspect_w");
  lua_pushnumber(L,16);
  lua_rawset(L,-3);
  lua_pushliteral(L,"aspect_h");
  lua_pushnumber(L,16);
  lua_rawset(L,-3);
  lua_pushliteral(L,"length");
  lua_pushnumber(L,3);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_rawseti(L,-2,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"paramtype");
  lua_pushliteral(L,"light");
  lua_rawset(L,-3);
  lua_pushliteral(L,"walkable");
  lua_pushboolean(L,0);
  lua_rawset(L,-3);
  lua_pushliteral(L,"sunlight_propagates");
  lua_pushboolean(L,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"pointable");
  lua_pushboolean(L,0);
  lua_rawset(L,-3);
  lua_pushliteral(L,"diggable");
  lua_pushboolean(L,0);
  lua_rawset(L,-3);
  lua_pushliteral(L,"buildable_to");
  lua_pushboolean(L,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"drop");
  lua_pushliteral(L,"");
  lua_rawset(L,-3);
  lua_pushliteral(L,"drowning");
  lua_pushnumber(L,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"damage_per_second");
  lua_pushnumber(L,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"post_effect_color");
  lua_createtable(L,0,4);
  lua_pushliteral(L,"a");
  lua_pushnumber(L,100);
  lua_rawset(L,-3);
  lua_pushliteral(L,"r");
  lua_pushnumber(L,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"g");
  lua_pushnumber(L,100);
  lua_rawset(L,-3);
  lua_pushliteral(L,"b");
  lua_pushnumber(L,1);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"groups");
  lua_createtable(L,0,1);
  lua_pushliteral(L,"flammable");
  lua_pushnumber(L,2);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_node("nssm:modders_block", {
   * 	description = "Modders Block",
   * 	tiles = {"modders_block.png"},
   * 	is_ground_content = true,
   * 	groups = {crumbly=3, not_in_creative_inventory =1},
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_node");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_pushliteral(L,"nssm:modders_block");
  lua_createtable(L,0,4);
  lua_pushliteral(L,"description");
  lua_pushliteral(L,"Modders Block");
  lua_rawset(L,-3);
  lua_pushliteral(L,"tiles");
  lua_createtable(L,1,0);
  lua_pushliteral(L,"modders_block.png");
  lua_rawseti(L,-2,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"is_ground_content");
  lua_pushboolean(L,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"groups");
  lua_createtable(L,0,2);
  lua_pushliteral(L,"crumbly");
  lua_pushnumber(L,3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"not_in_creative_inventory");
  lua_pushnumber(L,1);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_node("nssm:web", {
   * 	description = "Web",
   * 	inventory_image = "web.png",
   * 	tiles = {"web.png"} ,
   *     drawtype = "plantlike",
   * 	paramtype = "light",
   * 	walkable = false,
   * 	pointable = true,
   * 	diggable = true,
   * 	buildable_to = false,
   * 	drop = "",
   * 	drowning = 0,
   * 	liquid_renewable = false,
   * 	liquidtype = "source",
   * 	liquid_range= 0,
   * 	liquid_alternative_flowing = "nssm:web",
   * 	liquid_alternative_source = "nssm:web",
   * 	liquid_viscosity = 20,
   * 	groups = {flammable=2, snappy=1, liquid=1},
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_node");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_pushliteral(L,"nssm:web");
  lua_createtable(L,0,18);
  lua_pushliteral(L,"description");
  lua_pushliteral(L,"Web");
  lua_rawset(L,-3);
  lua_pushliteral(L,"inventory_image");
  lua_pushliteral(L,"web.png");
  lua_rawset(L,-3);
  lua_pushliteral(L,"tiles");
  lua_createtable(L,1,0);
  lua_pushliteral(L,"web.png");
  lua_rawseti(L,-2,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"drawtype");
  lua_pushliteral(L,"plantlike");
  lua_rawset(L,-3);
  lua_pushliteral(L,"paramtype");
  lua_pushliteral(L,"light");
  lua_rawset(L,-3);
  lua_pushliteral(L,"walkable");
  lua_pushboolean(L,0);
  lua_rawset(L,-3);
  lua_pushliteral(L,"pointable");
  lua_pushboolean(L,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"diggable");
  lua_pushboolean(L,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"buildable_to");
  lua_pushboolean(L,0);
  lua_rawset(L,-3);
  lua_pushliteral(L,"drop");
  lua_pushliteral(L,"");
  lua_rawset(L,-3);
  lua_pushliteral(L,"drowning");
  lua_pushnumber(L,0);
  lua_rawset(L,-3);
  lua_pushliteral(L,"liquid_renewable");
  lua_pushboolean(L,0);
  lua_rawset(L,-3);
  lua_pushliteral(L,"liquidtype");
  lua_pushliteral(L,"source");
  lua_rawset(L,-3);
  lua_pushliteral(L,"liquid_range");
  lua_pushnumber(L,0);
  lua_rawset(L,-3);
  lua_pushliteral(L,"liquid_alternative_flowing");
  lua_pushliteral(L,"nssm:web");
  lua_rawset(L,-3);
  lua_pushliteral(L,"liquid_alternative_source");
  lua_pushliteral(L,"nssm:web");
  lua_rawset(L,-3);
  lua_pushliteral(L,"liquid_viscosity");
  lua_pushnumber(L,20);
  lua_rawset(L,-3);
  lua_pushliteral(L,"groups");
  lua_createtable(L,0,3);
  lua_pushliteral(L,"flammable");
  lua_pushnumber(L,2);
  lua_rawset(L,-3);
  lua_pushliteral(L,"snappy");
  lua_pushnumber(L,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"liquid");
  lua_pushnumber(L,1);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_node("nssm:ink", {
   * 	description = "Ink",
   * 	inventory_image = minetest.inventorycube("ink.png"),
   * 	drawtype = "liquid",
   * 	tiles = {
   * 		{
   * 			name = "ink_animated.png",
   * 			animation = {
   * 				type = "vertical_frames",
   * 				aspect_w = 16,
   * 				aspect_h = 16,
   * 				length = 2.0,
   * 			},
   * 		},
   * 	},
   * 	--alpha = 420,
   * 	paramtype = "light",
   * 	walkable = false,
   * 	pointable = false,
   * 	diggable = false,
   * 	buildable_to = true,
   * 	is_ground_content = false,
   * 	drop = "",
   * 	liquid_range= 0,
   * 	drowning = 1,
   * 	liquid_renewable = false,
   * 	liquidtype = "source",
   * 	liquid_alternative_flowing = "nssm:ink",
   * 	liquid_alternative_source = "nssm:ink",
   * 	liquid_viscosity = 1,
   * 	post_effect_color = {a=2000, r=30, g=30, b=30},
   * 	groups = {water=3, liquid=3, puts_out_fire=1},
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_node");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_pushliteral(L,"nssm:ink");
  lua_createtable(L,0,20);
  lua_pushliteral(L,"description");
  lua_pushliteral(L,"Ink");
  lua_rawset(L,-3);
  lua_pushliteral(L,"inventory_image");
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"inventorycube");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_pushliteral(L,"ink.png");
  lua_call(L,1,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"drawtype");
  lua_pushliteral(L,"liquid");
  lua_rawset(L,-3);
  lua_pushliteral(L,"tiles");
  lua_createtable(L,1,0);
  lua_createtable(L,0,2);
  lua_pushliteral(L,"name");
  lua_pushliteral(L,"ink_animated.png");
  lua_rawset(L,-3);
  lua_pushliteral(L,"animation");
  lua_createtable(L,0,4);
  lua_pushliteral(L,"type");
  lua_pushliteral(L,"vertical_frames");
  lua_rawset(L,-3);
  lua_pushliteral(L,"aspect_w");
  lua_pushnumber(L,16);
  lua_rawset(L,-3);
  lua_pushliteral(L,"aspect_h");
  lua_pushnumber(L,16);
  lua_rawset(L,-3);
  lua_pushliteral(L,"length");
  lua_pushnumber(L,2);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_rawseti(L,-2,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"paramtype");
  lua_pushliteral(L,"light");
  lua_rawset(L,-3);
  lua_pushliteral(L,"walkable");
  lua_pushboolean(L,0);
  lua_rawset(L,-3);
  lua_pushliteral(L,"pointable");
  lua_pushboolean(L,0);
  lua_rawset(L,-3);
  lua_pushliteral(L,"diggable");
  lua_pushboolean(L,0);
  lua_rawset(L,-3);
  lua_pushliteral(L,"buildable_to");
  lua_pushboolean(L,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"is_ground_content");
  lua_pushboolean(L,0);
  lua_rawset(L,-3);
  lua_pushliteral(L,"drop");
  lua_pushliteral(L,"");
  lua_rawset(L,-3);
  lua_pushliteral(L,"liquid_range");
  lua_pushnumber(L,0);
  lua_rawset(L,-3);
  lua_pushliteral(L,"drowning");
  lua_pushnumber(L,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"liquid_renewable");
  lua_pushboolean(L,0);
  lua_rawset(L,-3);
  lua_pushliteral(L,"liquidtype");
  lua_pushliteral(L,"source");
  lua_rawset(L,-3);
  lua_pushliteral(L,"liquid_alternative_flowing");
  lua_pushliteral(L,"nssm:ink");
  lua_rawset(L,-3);
  lua_pushliteral(L,"liquid_alternative_source");
  lua_pushliteral(L,"nssm:ink");
  lua_rawset(L,-3);
  lua_pushliteral(L,"liquid_viscosity");
  lua_pushnumber(L,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"post_effect_color");
  lua_createtable(L,0,4);
  lua_pushliteral(L,"a");
  lua_pushnumber(L,2000);
  lua_rawset(L,-3);
  lua_pushliteral(L,"r");
  lua_pushnumber(L,30);
  lua_rawset(L,-3);
  lua_pushliteral(L,"g");
  lua_pushnumber(L,30);
  lua_rawset(L,-3);
  lua_pushliteral(L,"b");
  lua_pushnumber(L,30);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"groups");
  lua_createtable(L,0,3);
  lua_pushliteral(L,"water");
  lua_pushnumber(L,3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"liquid");
  lua_pushnumber(L,3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"puts_out_fire");
  lua_pushnumber(L,1);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_node("nssm:mese_meteor", {
   * 	description = "Mese Meteor",
   * 	tiles = {"mese_meteor.png"} ,
   * 	paramtype = "light",
   * 	drop = "",
   * 	groups = {crumbly=1, falling_node=1, flammable = 2},
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_node");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_pushliteral(L,"nssm:mese_meteor");
  lua_createtable(L,0,5);
  lua_pushliteral(L,"description");
  lua_pushliteral(L,"Mese Meteor");
  lua_rawset(L,-3);
  lua_pushliteral(L,"tiles");
  lua_createtable(L,1,0);
  lua_pushliteral(L,"mese_meteor.png");
  lua_rawseti(L,-2,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"paramtype");
  lua_pushliteral(L,"light");
  lua_rawset(L,-3);
  lua_pushliteral(L,"drop");
  lua_pushliteral(L,"");
  lua_rawset(L,-3);
  lua_pushliteral(L,"groups");
  lua_createtable(L,0,3);
  lua_pushliteral(L,"crumbly");
  lua_pushnumber(L,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"falling_node");
  lua_pushnumber(L,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"flammable");
  lua_pushnumber(L,2);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_node("nssm:pumpbomb", {
   * 	tiles = {"pumpbomb_top.png","pumpbomb_bottom.png", "pumpbomb_side.png", "pumpbomb_side.png", "pumpbomb_side.png", "pumpbomb_front.png"},
   * 	light_source = 5,
   * 	groups = {not_in_creative_inventory =1},
   * 	drop = "",
   * 	on_timer = function(pos, elapsed)
   * 		nssm:explosion(pos, 3, 1)
   * 		minetest.env:set_node(pos, {name="air"})
   * 	end,
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_node");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_pushliteral(L,"nssm:pumpbomb");
  lua_createtable(L,0,5);
  lua_pushliteral(L,"tiles");
  lua_createtable(L,6,0);
  lua_pushliteral(L,"pumpbomb_top.png");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"pumpbomb_bottom.png");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"pumpbomb_side.png");
  lua_rawseti(L,-2,3);
  lua_pushliteral(L,"pumpbomb_side.png");
  lua_rawseti(L,-2,4);
  lua_pushliteral(L,"pumpbomb_side.png");
  lua_rawseti(L,-2,5);
  lua_pushliteral(L,"pumpbomb_front.png");
  lua_rawseti(L,-2,6);
  lua_rawset(L,-3);
  lua_pushliteral(L,"light_source");
  lua_pushnumber(L,5);
  lua_rawset(L,-3);
  lua_pushliteral(L,"groups");
  lua_createtable(L,0,1);
  lua_pushliteral(L,"not_in_creative_inventory");
  lua_pushnumber(L,1);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"drop");
  lua_pushliteral(L,"");
  lua_rawset(L,-3);
  lua_pushliteral(L,"on_timer");
  lua_pushcfunction(L,lcf1);
  lua_rawset(L,-3);
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* --abms
   * minetest.register_abm({
   * 	nodenames = {"nssm:mese_meteor"},
   * 	neighbors = {"air"},
   * 	interval = 1,
   * 	chance = 1,
   * 	action = function(pos, node, active_object_count, active_object_count_wider)
   * 		--local under = {x=pos.x, y=pos.y-1, z=pos.z}
   * 		--local n = minetest.env:get_node(under).name
   * 		--if n~= "air" then
   * 		minetest.set_node({x=pos.x+1, y=pos.y, z=pos.z}, {name = "fire:basic_flame"})
   * 		minetest.set_node({x=pos.x-1, y=pos.y, z=pos.z}, {name = "fire:basic_flame"})
   * 		minetest.set_node({x=pos.x, y=pos.y, z=pos.z-1}, {name = "fire:basic_flame"})
   * 		minetest.set_node({x=pos.x, y=pos.y, z=pos.z+1}, {name = "fire:basic_flame"})
   * 		minetest.set_node({x=pos.x, y=pos.y+1, z=pos.z}, {name = "fire:basic_flame"})
   * 
   * 	end
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_abm");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,5);
  lua_pushliteral(L,"nodenames");
  lua_createtable(L,1,0);
  lua_pushliteral(L,"nssm:mese_meteor");
  lua_rawseti(L,-2,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"neighbors");
  lua_createtable(L,1,0);
  lua_pushliteral(L,"air");
  lua_rawseti(L,-2,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"interval");
  lua_pushnumber(L,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"chance");
  lua_pushnumber(L,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"action");
  lua_pushcfunction(L,lcf2);
  lua_rawset(L,-3);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_abm({
   * 	nodenames = {"nssm:web"},
   * 	neighbors = {"default:junglegrass"},
   * 	interval = 20.0,
   * 	chance = 20,
   * 	action = function(pos, node, active_object_count, active_object_count_wider)
   * 		local n = minetest.env:get_node(pos).name
   * 		if n== "air" then
   * 			minetest.set_node({x = pos.x, y = pos.y + 1, z = pos.z}, {name = "nssm:web"})
   * 		end
   * 	end
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_abm");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,5);
  lua_pushliteral(L,"nodenames");
  lua_createtable(L,1,0);
  lua_pushliteral(L,"nssm:web");
  lua_rawseti(L,-2,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"neighbors");
  lua_createtable(L,1,0);
  lua_pushliteral(L,"default:junglegrass");
  lua_rawseti(L,-2,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"interval");
  lua_pushnumber(L,20);
  lua_rawset(L,-3);
  lua_pushliteral(L,"chance");
  lua_pushnumber(L,20);
  lua_rawset(L,-3);
  lua_pushliteral(L,"action");
  lua_pushcfunction(L,lcf6);
  lua_rawset(L,-3);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_abm({
   * 	nodenames = {"nssm:web"},
   * 	neighbors = {"default:junglegrass"},
   * 	interval = 20.0,
   * 	chance = 20,
   * 	action = function(pos, node, active_object_count, active_object_count_wider)
   * 		local n = minetest.env:get_node(pos).name
   * 		if n== "air" then
   * 			minetest.set_node({x = pos.x + 1, y = pos.y, z = pos.z}, {name = "nssm:web"})
   * 		end
   * 	end
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_abm");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,5);
  lua_pushliteral(L,"nodenames");
  lua_createtable(L,1,0);
  lua_pushliteral(L,"nssm:web");
  lua_rawseti(L,-2,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"neighbors");
  lua_createtable(L,1,0);
  lua_pushliteral(L,"default:junglegrass");
  lua_rawseti(L,-2,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"interval");
  lua_pushnumber(L,20);
  lua_rawset(L,-3);
  lua_pushliteral(L,"chance");
  lua_pushnumber(L,20);
  lua_rawset(L,-3);
  lua_pushliteral(L,"action");
  lua_pushcfunction(L,lcf10);
  lua_rawset(L,-3);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_abm({
   * 	nodenames = {"nssm:web"},
   * 	neighbors = {"default:junglegrass"},
   * 	interval = 20.0,
   * 	chance = 20,
   * 	action = function(pos, node, active_object_count, active_object_count_wider)
   * 		local n = minetest.env:get_node(pos).name
   * 		if n== "air" then
   * 			minetest.set_node({x = pos.x - 1, y = pos.y, z = pos.z}, {name = "nssm:web"})
   * 		end
   * 	end
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_abm");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,5);
  lua_pushliteral(L,"nodenames");
  lua_createtable(L,1,0);
  lua_pushliteral(L,"nssm:web");
  lua_rawseti(L,-2,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"neighbors");
  lua_createtable(L,1,0);
  lua_pushliteral(L,"default:junglegrass");
  lua_rawseti(L,-2,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"interval");
  lua_pushnumber(L,20);
  lua_rawset(L,-3);
  lua_pushliteral(L,"chance");
  lua_pushnumber(L,20);
  lua_rawset(L,-3);
  lua_pushliteral(L,"action");
  lua_pushcfunction(L,lcf14);
  lua_rawset(L,-3);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* --tools
   * minetest.register_tool('nssm:sun_sword', {
   * 	description = 'Sun Sword',
   * 	inventory_image = 'sun_sword.png',
   * 	tool_capabilities = {
   * 		full_punch_interval = 0.6,
   * 		max_drop_level=1,
   * 		groupcaps={
   * 			snappy={times={[1]=0.80, [2]=0.40, [3]=0.20}, uses=70, maxlevel=1},
   * 			fleshy={times={[2]=0.6, [3]=0.2}, uses=70, maxlevel=1}
   * 		},
   * 		damage_groups = {fleshy=10},
   * 	},
   * 	minetest.register_on_punchnode(function(pos, node, puncher, pointed_thing)
   * 		if puncher:get_wielded_item():get_name() == 'nssm:sun_sword' then
   * 			if node.name ~= "air" then
   * 				minetest.add_node(pointed_thing.above, {name = "fire:basic_flame"})
   * 			end
   * 		end
   * 	end)
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_tool");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_pushliteral(L,"nssm:sun_sword");
  lua_createtable(L,1,3);
  lua_pushliteral(L,"description");
  lua_pushliteral(L,"Sun Sword");
  lua_rawset(L,-3);
  lua_pushliteral(L,"inventory_image");
  lua_pushliteral(L,"sun_sword.png");
  lua_rawset(L,-3);
  lua_pushliteral(L,"tool_capabilities");
  lua_createtable(L,0,4);
  lua_pushliteral(L,"full_punch_interval");
  lua_pushnumber(L,0.6);
  lua_rawset(L,-3);
  lua_pushliteral(L,"max_drop_level");
  lua_pushnumber(L,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"groupcaps");
  lua_createtable(L,0,2);
  lua_pushliteral(L,"snappy");
  lua_createtable(L,0,3);
  lua_pushliteral(L,"times");
  lua_createtable(L,0,3);
  lua_pushnumber(L,1);
  lua_pushnumber(L,0.8);
  lua_rawset(L,-3);
  lua_pushnumber(L,2);
  lua_pushnumber(L,0.4);
  lua_rawset(L,-3);
  lua_pushnumber(L,3);
  lua_pushnumber(L,0.2);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"uses");
  lua_pushnumber(L,70);
  lua_rawset(L,-3);
  lua_pushliteral(L,"maxlevel");
  lua_pushnumber(L,1);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"fleshy");
  lua_createtable(L,0,3);
  lua_pushliteral(L,"times");
  lua_createtable(L,0,2);
  lua_pushnumber(L,2);
  lua_pushnumber(L,0.6);
  lua_rawset(L,-3);
  lua_pushnumber(L,3);
  lua_pushnumber(L,0.2);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"uses");
  lua_pushnumber(L,70);
  lua_rawset(L,-3);
  lua_pushliteral(L,"maxlevel");
  lua_pushnumber(L,1);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"damage_groups");
  lua_createtable(L,0,1);
  lua_pushliteral(L,"fleshy");
  lua_pushnumber(L,10);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  const int lc15 = lua_gettop(L);
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_on_punchnode");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_pushcfunction(L,lcf22);
  lua_call(L,1,LUA_MULTRET);
  while ((lua_gettop(L) > lc15)) {
    lua_rawseti(L,lc15,(0 + (lua_gettop(L) - lc15)));
  }
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_tool("nssm:masticone_fang_sword", {
   * 	description = "Masticone Fang Sword",
   * 	inventory_image = "masticone_fang_sword.png",
   * 	tool_capabilities = {
   * 		full_punch_interval =0.7 ,
   * 		max_drop_level=1,
   * 		groupcaps={
   * 			snappy={times={[1]=0.6, [2]=0.5, [3]=0.4}, uses=200, maxlevel=1},
   * 			fleshy={times={[2]=0.8, [3]=0.4}, uses=200, maxlevel=1}
   * 		},
   * 		damage_groups = {fleshy=8},
   * 	},
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_tool");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_pushliteral(L,"nssm:masticone_fang_sword");
  lua_createtable(L,0,3);
  lua_pushliteral(L,"description");
  lua_pushliteral(L,"Masticone Fang Sword");
  lua_rawset(L,-3);
  lua_pushliteral(L,"inventory_image");
  lua_pushliteral(L,"masticone_fang_sword.png");
  lua_rawset(L,-3);
  lua_pushliteral(L,"tool_capabilities");
  lua_createtable(L,0,4);
  lua_pushliteral(L,"full_punch_interval");
  lua_pushnumber(L,0.7);
  lua_rawset(L,-3);
  lua_pushliteral(L,"max_drop_level");
  lua_pushnumber(L,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"groupcaps");
  lua_createtable(L,0,2);
  lua_pushliteral(L,"snappy");
  lua_createtable(L,0,3);
  lua_pushliteral(L,"times");
  lua_createtable(L,0,3);
  lua_pushnumber(L,1);
  lua_pushnumber(L,0.6);
  lua_rawset(L,-3);
  lua_pushnumber(L,2);
  lua_pushnumber(L,0.5);
  lua_rawset(L,-3);
  lua_pushnumber(L,3);
  lua_pushnumber(L,0.4);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"uses");
  lua_pushnumber(L,200);
  lua_rawset(L,-3);
  lua_pushliteral(L,"maxlevel");
  lua_pushnumber(L,1);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"fleshy");
  lua_createtable(L,0,3);
  lua_pushliteral(L,"times");
  lua_createtable(L,0,2);
  lua_pushnumber(L,2);
  lua_pushnumber(L,0.8);
  lua_rawset(L,-3);
  lua_pushnumber(L,3);
  lua_pushnumber(L,0.4);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"uses");
  lua_pushnumber(L,200);
  lua_rawset(L,-3);
  lua_pushliteral(L,"maxlevel");
  lua_pushnumber(L,1);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"damage_groups");
  lua_createtable(L,0,1);
  lua_pushliteral(L,"fleshy");
  lua_pushnumber(L,8);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_tool("nssm:night_sword", {
   * 	description = "Night Sword",
   * 	inventory_image = "night_sword.png",
   * 	tool_capabilities = {
   * 		full_punch_interval =0.4 ,
   * 		max_drop_level=1,
   * 		groupcaps={
   * 			snappy={times={[1]=0.4, [2]=0.3, [3]=0.2}, uses=300, maxlevel=1},
   * 			fleshy={times={[2]=0.7, [3]=0.3}, uses=300, maxlevel=1}
   * 		},
   * 		damage_groups = {fleshy=12},
   * 	},
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_tool");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_pushliteral(L,"nssm:night_sword");
  lua_createtable(L,0,3);
  lua_pushliteral(L,"description");
  lua_pushliteral(L,"Night Sword");
  lua_rawset(L,-3);
  lua_pushliteral(L,"inventory_image");
  lua_pushliteral(L,"night_sword.png");
  lua_rawset(L,-3);
  lua_pushliteral(L,"tool_capabilities");
  lua_createtable(L,0,4);
  lua_pushliteral(L,"full_punch_interval");
  lua_pushnumber(L,0.4);
  lua_rawset(L,-3);
  lua_pushliteral(L,"max_drop_level");
  lua_pushnumber(L,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"groupcaps");
  lua_createtable(L,0,2);
  lua_pushliteral(L,"snappy");
  lua_createtable(L,0,3);
  lua_pushliteral(L,"times");
  lua_createtable(L,0,3);
  lua_pushnumber(L,1);
  lua_pushnumber(L,0.4);
  lua_rawset(L,-3);
  lua_pushnumber(L,2);
  lua_pushnumber(L,0.3);
  lua_rawset(L,-3);
  lua_pushnumber(L,3);
  lua_pushnumber(L,0.2);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"uses");
  lua_pushnumber(L,300);
  lua_rawset(L,-3);
  lua_pushliteral(L,"maxlevel");
  lua_pushnumber(L,1);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"fleshy");
  lua_createtable(L,0,3);
  lua_pushliteral(L,"times");
  lua_createtable(L,0,2);
  lua_pushnumber(L,2);
  lua_pushnumber(L,0.7);
  lua_rawset(L,-3);
  lua_pushnumber(L,3);
  lua_pushnumber(L,0.3);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"uses");
  lua_pushnumber(L,300);
  lua_rawset(L,-3);
  lua_pushliteral(L,"maxlevel");
  lua_pushnumber(L,1);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"damage_groups");
  lua_createtable(L,0,1);
  lua_pushliteral(L,"fleshy");
  lua_pushnumber(L,12);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_tool("nssm:crab_light_mace", {
   * 	description = "Light Crab Mace",
   * 	inventory_image = "crab_light_mace.png",
   * 	tool_capabilities = {
   * 		full_punch_interval =2 ,
   * 		max_drop_level=1,
   * 		groupcaps={
   * 			fleshy={times={[2]=1.4, [3]=1}, uses=120, maxlevel=1}
   * 		},
   * 		damage_groups = {fleshy=8},
   * 	},
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_tool");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_pushliteral(L,"nssm:crab_light_mace");
  lua_createtable(L,0,3);
  lua_pushliteral(L,"description");
  lua_pushliteral(L,"Light Crab Mace");
  lua_rawset(L,-3);
  lua_pushliteral(L,"inventory_image");
  lua_pushliteral(L,"crab_light_mace.png");
  lua_rawset(L,-3);
  lua_pushliteral(L,"tool_capabilities");
  lua_createtable(L,0,4);
  lua_pushliteral(L,"full_punch_interval");
  lua_pushnumber(L,2);
  lua_rawset(L,-3);
  lua_pushliteral(L,"max_drop_level");
  lua_pushnumber(L,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"groupcaps");
  lua_createtable(L,0,1);
  lua_pushliteral(L,"fleshy");
  lua_createtable(L,0,3);
  lua_pushliteral(L,"times");
  lua_createtable(L,0,2);
  lua_pushnumber(L,2);
  lua_pushnumber(L,1.4);
  lua_rawset(L,-3);
  lua_pushnumber(L,3);
  lua_pushnumber(L,1);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"uses");
  lua_pushnumber(L,120);
  lua_rawset(L,-3);
  lua_pushliteral(L,"maxlevel");
  lua_pushnumber(L,1);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"damage_groups");
  lua_createtable(L,0,1);
  lua_pushliteral(L,"fleshy");
  lua_pushnumber(L,8);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_tool("nssm:crab_heavy_mace", {
   * 	description = "Heavy Crab Mace",
   * 	inventory_image = "crab_heavy_mace.png",
   * 	tool_capabilities = {
   * 		full_punch_interval =4 ,
   * 		max_drop_level=1,
   * 		groupcaps={
   * 			fleshy={times={[2]=2, [3]=1.4}, uses=120, maxlevel=1}
   * 		},
   * 		damage_groups = {fleshy=12},
   * 	},
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_tool");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_pushliteral(L,"nssm:crab_heavy_mace");
  lua_createtable(L,0,3);
  lua_pushliteral(L,"description");
  lua_pushliteral(L,"Heavy Crab Mace");
  lua_rawset(L,-3);
  lua_pushliteral(L,"inventory_image");
  lua_pushliteral(L,"crab_heavy_mace.png");
  lua_rawset(L,-3);
  lua_pushliteral(L,"tool_capabilities");
  lua_createtable(L,0,4);
  lua_pushliteral(L,"full_punch_interval");
  lua_pushnumber(L,4);
  lua_rawset(L,-3);
  lua_pushliteral(L,"max_drop_level");
  lua_pushnumber(L,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"groupcaps");
  lua_createtable(L,0,1);
  lua_pushliteral(L,"fleshy");
  lua_createtable(L,0,3);
  lua_pushliteral(L,"times");
  lua_createtable(L,0,2);
  lua_pushnumber(L,2);
  lua_pushnumber(L,2);
  lua_rawset(L,-3);
  lua_pushnumber(L,3);
  lua_pushnumber(L,1.4);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"uses");
  lua_pushnumber(L,120);
  lua_rawset(L,-3);
  lua_pushliteral(L,"maxlevel");
  lua_pushnumber(L,1);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"damage_groups");
  lua_createtable(L,0,1);
  lua_pushliteral(L,"fleshy");
  lua_pushnumber(L,12);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_node("nssm:rope", {
   *     description = "Rope",
   *     paramtype = "light",
   * 	walkable = false,
   *     climbable = true,
   *     sunlight_propagates = true,
   * 	drawtype = "plantlike",
   *     drops = "nssm:rope",
   *     tiles = { "rope.png" },
   *     groups = {snappy=1},
   *     }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_node");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_pushliteral(L,"nssm:rope");
  lua_createtable(L,0,9);
  lua_pushliteral(L,"description");
  lua_pushliteral(L,"Rope");
  lua_rawset(L,-3);
  lua_pushliteral(L,"paramtype");
  lua_pushliteral(L,"light");
  lua_rawset(L,-3);
  lua_pushliteral(L,"walkable");
  lua_pushboolean(L,0);
  lua_rawset(L,-3);
  lua_pushliteral(L,"climbable");
  lua_pushboolean(L,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"sunlight_propagates");
  lua_pushboolean(L,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"drawtype");
  lua_pushliteral(L,"plantlike");
  lua_rawset(L,-3);
  lua_pushliteral(L,"drops");
  lua_pushliteral(L,"nssm:rope");
  lua_rawset(L,-3);
  lua_pushliteral(L,"tiles");
  lua_createtable(L,1,0);
  lua_pushliteral(L,"rope.png");
  lua_rawseti(L,-2,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"groups");
  lua_createtable(L,0,1);
  lua_pushliteral(L,"snappy");
  lua_pushnumber(L,1);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_tool("nssm:stoneater_pick", {
   * 	description = "Stoneater Pickaxe",
   * 	inventory_image = "stoneater_pick.png",
   * 	tool_capabilities = {
   * 		full_punch_interval = 0.9,
   * 		max_drop_level=0,
   * 		groupcaps={
   * 			cracky = {times={[3]=0.0}, uses=200, maxlevel=1},
   * 		},
   * 		damage_groups = {fleshy=5},
   * 	},
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_tool");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_pushliteral(L,"nssm:stoneater_pick");
  lua_createtable(L,0,3);
  lua_pushliteral(L,"description");
  lua_pushliteral(L,"Stoneater Pickaxe");
  lua_rawset(L,-3);
  lua_pushliteral(L,"inventory_image");
  lua_pushliteral(L,"stoneater_pick.png");
  lua_rawset(L,-3);
  lua_pushliteral(L,"tool_capabilities");
  lua_createtable(L,0,4);
  lua_pushliteral(L,"full_punch_interval");
  lua_pushnumber(L,0.9);
  lua_rawset(L,-3);
  lua_pushliteral(L,"max_drop_level");
  lua_pushnumber(L,0);
  lua_rawset(L,-3);
  lua_pushliteral(L,"groupcaps");
  lua_createtable(L,0,1);
  lua_pushliteral(L,"cracky");
  lua_createtable(L,0,3);
  lua_pushliteral(L,"times");
  lua_createtable(L,0,1);
  lua_pushnumber(L,3);
  lua_pushnumber(L,0);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"uses");
  lua_pushnumber(L,200);
  lua_rawset(L,-3);
  lua_pushliteral(L,"maxlevel");
  lua_pushnumber(L,1);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"damage_groups");
  lua_createtable(L,0,1);
  lua_pushliteral(L,"fleshy");
  lua_pushnumber(L,5);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_tool("nssm:mantis_sword", {
   * 	description = "Mantis Sword",
   * 	inventory_image = "mantis_sword.png",
   * 	tool_capabilities = {
   * 		full_punch_interval =0.7 ,
   * 		max_drop_level=1,
   * 		groupcaps={
   * 			fleshy={times={[2]=1.0, [3]=0.4}, uses=50, maxlevel=1},
   * 			snappy={times={[2]=0.80, [3]=0.3}, uses=100, maxlevel=1},
   * 		},
   * 		damage_groups = {fleshy=6},
   * 	},
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_tool");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_pushliteral(L,"nssm:mantis_sword");
  lua_createtable(L,0,3);
  lua_pushliteral(L,"description");
  lua_pushliteral(L,"Mantis Sword");
  lua_rawset(L,-3);
  lua_pushliteral(L,"inventory_image");
  lua_pushliteral(L,"mantis_sword.png");
  lua_rawset(L,-3);
  lua_pushliteral(L,"tool_capabilities");
  lua_createtable(L,0,4);
  lua_pushliteral(L,"full_punch_interval");
  lua_pushnumber(L,0.7);
  lua_rawset(L,-3);
  lua_pushliteral(L,"max_drop_level");
  lua_pushnumber(L,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"groupcaps");
  lua_createtable(L,0,2);
  lua_pushliteral(L,"fleshy");
  lua_createtable(L,0,3);
  lua_pushliteral(L,"times");
  lua_createtable(L,0,2);
  lua_pushnumber(L,2);
  lua_pushnumber(L,1);
  lua_rawset(L,-3);
  lua_pushnumber(L,3);
  lua_pushnumber(L,0.4);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"uses");
  lua_pushnumber(L,50);
  lua_rawset(L,-3);
  lua_pushliteral(L,"maxlevel");
  lua_pushnumber(L,1);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"snappy");
  lua_createtable(L,0,3);
  lua_pushliteral(L,"times");
  lua_createtable(L,0,2);
  lua_pushnumber(L,2);
  lua_pushnumber(L,0.8);
  lua_rawset(L,-3);
  lua_pushnumber(L,3);
  lua_pushnumber(L,0.3);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"uses");
  lua_pushnumber(L,100);
  lua_rawset(L,-3);
  lua_pushliteral(L,"maxlevel");
  lua_pushnumber(L,1);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"damage_groups");
  lua_createtable(L,0,1);
  lua_pushliteral(L,"fleshy");
  lua_pushnumber(L,6);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_tool("nssm:ant_sword", {
   * 	description = "Ant Sword",
   * 	inventory_image = "ant_sword.png",
   * 	tool_capabilities = {
   * 		full_punch_interval = 0.8,
   * 		max_drop_level=1,
   * 		groupcaps={
   * 			snappy={times={[1]=1.30, [2]=0.90, [3]=0.40}, uses=40, maxlevel=3},
   * 		},
   * 		damage_groups = {fleshy=8},
   * 	},
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_tool");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_pushliteral(L,"nssm:ant_sword");
  lua_createtable(L,0,3);
  lua_pushliteral(L,"description");
  lua_pushliteral(L,"Ant Sword");
  lua_rawset(L,-3);
  lua_pushliteral(L,"inventory_image");
  lua_pushliteral(L,"ant_sword.png");
  lua_rawset(L,-3);
  lua_pushliteral(L,"tool_capabilities");
  lua_createtable(L,0,4);
  lua_pushliteral(L,"full_punch_interval");
  lua_pushnumber(L,0.8);
  lua_rawset(L,-3);
  lua_pushliteral(L,"max_drop_level");
  lua_pushnumber(L,1);
  lua_rawset(L,-3);
  lua_pushliteral(L,"groupcaps");
  lua_createtable(L,0,1);
  lua_pushliteral(L,"snappy");
  lua_createtable(L,0,3);
  lua_pushliteral(L,"times");
  lua_createtable(L,0,3);
  lua_pushnumber(L,1);
  lua_pushnumber(L,1.3);
  lua_rawset(L,-3);
  lua_pushnumber(L,2);
  lua_pushnumber(L,0.9);
  lua_rawset(L,-3);
  lua_pushnumber(L,3);
  lua_pushnumber(L,0.4);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"uses");
  lua_pushnumber(L,40);
  lua_rawset(L,-3);
  lua_pushliteral(L,"maxlevel");
  lua_pushnumber(L,3);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_pushliteral(L,"damage_groups");
  lua_createtable(L,0,1);
  lua_pushliteral(L,"fleshy");
  lua_pushnumber(L,8);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_rawset(L,-3);
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* --recipes
   * minetest.register_craft({
   * 	output = 'nssm:mantis_sword',
   * 	recipe = {
   * 		{'', 'nssm:mantis_claw', ''},
   * 		{'', 'nssm:mantis_claw', ''},
   * 		{'', 'group:stick', ''},
   * 	}
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_craft");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,2);
  lua_pushliteral(L,"output");
  lua_pushliteral(L,"nssm:mantis_sword");
  lua_rawset(L,-3);
  lua_pushliteral(L,"recipe");
  lua_createtable(L,3,0);
  lua_createtable(L,3,0);
  lua_pushliteral(L,"");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"nssm:mantis_claw");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"");
  lua_rawseti(L,-2,3);
  lua_rawseti(L,-2,1);
  lua_createtable(L,3,0);
  lua_pushliteral(L,"");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"nssm:mantis_claw");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"");
  lua_rawseti(L,-2,3);
  lua_rawseti(L,-2,2);
  lua_createtable(L,3,0);
  lua_pushliteral(L,"");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"group:stick");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"");
  lua_rawseti(L,-2,3);
  lua_rawseti(L,-2,3);
  lua_rawset(L,-3);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_craft({
   * 	output = 'nssm:masticone_fang_sword',
   * 	recipe = {
   * 		{'', 'nssm:masticone_fang', 'nssm:masticone_fang'},
   * 		{'', 'nssm:masticone_fang', ''},
   * 		{'', 'group:stick', ''},
   * 	}
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_craft");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,2);
  lua_pushliteral(L,"output");
  lua_pushliteral(L,"nssm:masticone_fang_sword");
  lua_rawset(L,-3);
  lua_pushliteral(L,"recipe");
  lua_createtable(L,3,0);
  lua_createtable(L,3,0);
  lua_pushliteral(L,"");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"nssm:masticone_fang");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"nssm:masticone_fang");
  lua_rawseti(L,-2,3);
  lua_rawseti(L,-2,1);
  lua_createtable(L,3,0);
  lua_pushliteral(L,"");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"nssm:masticone_fang");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"");
  lua_rawseti(L,-2,3);
  lua_rawseti(L,-2,2);
  lua_createtable(L,3,0);
  lua_pushliteral(L,"");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"group:stick");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"");
  lua_rawseti(L,-2,3);
  lua_rawseti(L,-2,3);
  lua_rawset(L,-3);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_craft({
   * 	output = 'nssm:black_ice_tooth',
   * 	recipe = {
   * 		{'', 'nssm:black_sand', ''},
   * 		{'', 'nssm:ice_tooth', ''},
   * 		{'', '', ''},
   * 	}
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_craft");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,2);
  lua_pushliteral(L,"output");
  lua_pushliteral(L,"nssm:black_ice_tooth");
  lua_rawset(L,-3);
  lua_pushliteral(L,"recipe");
  lua_createtable(L,3,0);
  lua_createtable(L,3,0);
  lua_pushliteral(L,"");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"nssm:black_sand");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"");
  lua_rawseti(L,-2,3);
  lua_rawseti(L,-2,1);
  lua_createtable(L,3,0);
  lua_pushliteral(L,"");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"nssm:ice_tooth");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"");
  lua_rawseti(L,-2,3);
  lua_rawseti(L,-2,2);
  lua_createtable(L,3,0);
  lua_pushliteral(L,"");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"");
  lua_rawseti(L,-2,3);
  lua_rawseti(L,-2,3);
  lua_rawset(L,-3);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_craft({
   * 	output = 'nssm:crab_light_mace',
   * 	recipe = {
   * 		{'', 'nssm:crab_chela', ''},
   * 		{'', 'group:stick', ''},
   * 		{'', 'group:stick', ''},
   * 	}
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_craft");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,2);
  lua_pushliteral(L,"output");
  lua_pushliteral(L,"nssm:crab_light_mace");
  lua_rawset(L,-3);
  lua_pushliteral(L,"recipe");
  lua_createtable(L,3,0);
  lua_createtable(L,3,0);
  lua_pushliteral(L,"");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"nssm:crab_chela");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"");
  lua_rawseti(L,-2,3);
  lua_rawseti(L,-2,1);
  lua_createtable(L,3,0);
  lua_pushliteral(L,"");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"group:stick");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"");
  lua_rawseti(L,-2,3);
  lua_rawseti(L,-2,2);
  lua_createtable(L,3,0);
  lua_pushliteral(L,"");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"group:stick");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"");
  lua_rawseti(L,-2,3);
  lua_rawseti(L,-2,3);
  lua_rawset(L,-3);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_craft({
   * 	output = 'nssm:crab_heavy_mace',
   * 	recipe = {
   * 		{'', 'nssm:crab_chela', ''},
   * 		{'nssm:crab_chela', 'nssm:crab_chela', 'nssm:crab_chela'},
   * 		{'', 'group:stick', ''},
   * 	}
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_craft");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,2);
  lua_pushliteral(L,"output");
  lua_pushliteral(L,"nssm:crab_heavy_mace");
  lua_rawset(L,-3);
  lua_pushliteral(L,"recipe");
  lua_createtable(L,3,0);
  lua_createtable(L,3,0);
  lua_pushliteral(L,"");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"nssm:crab_chela");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"");
  lua_rawseti(L,-2,3);
  lua_rawseti(L,-2,1);
  lua_createtable(L,3,0);
  lua_pushliteral(L,"nssm:crab_chela");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"nssm:crab_chela");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"nssm:crab_chela");
  lua_rawseti(L,-2,3);
  lua_rawseti(L,-2,2);
  lua_createtable(L,3,0);
  lua_pushliteral(L,"");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"group:stick");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"");
  lua_rawseti(L,-2,3);
  lua_rawseti(L,-2,3);
  lua_rawset(L,-3);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_craft({
   * 	output = 'nssm:energy_globe',
   * 	recipe = {
   * 		{'nssm:life_energy', 'nssm:life_energy', 'nssm:life_energy'},
   * 		{'nssm:life_energy', 'nssm:life_energy', 'nssm:life_energy'},
   * 		{'nssm:life_energy', 'nssm:life_energy', 'nssm:life_energy'},
   * 	}
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_craft");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,2);
  lua_pushliteral(L,"output");
  lua_pushliteral(L,"nssm:energy_globe");
  lua_rawset(L,-3);
  lua_pushliteral(L,"recipe");
  lua_createtable(L,3,0);
  lua_createtable(L,3,0);
  lua_pushliteral(L,"nssm:life_energy");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"nssm:life_energy");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"nssm:life_energy");
  lua_rawseti(L,-2,3);
  lua_rawseti(L,-2,1);
  lua_createtable(L,3,0);
  lua_pushliteral(L,"nssm:life_energy");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"nssm:life_energy");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"nssm:life_energy");
  lua_rawseti(L,-2,3);
  lua_rawseti(L,-2,2);
  lua_createtable(L,3,0);
  lua_pushliteral(L,"nssm:life_energy");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"nssm:life_energy");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"nssm:life_energy");
  lua_rawseti(L,-2,3);
  lua_rawseti(L,-2,3);
  lua_rawset(L,-3);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_craft({
   * 	output = 'nssm:great_energy_globe',
   * 	recipe = {
   * 		{'nssm:energy_globe', 'nssm:energy_globe', 'nssm:energy_globe'},
   * 		{'nssm:energy_globe', 'nssm:energy_globe', 'nssm:energy_globe'},
   * 		{'nssm:energy_globe', 'nssm:energy_globe', 'nssm:energy_globe'},
   * 	}
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_craft");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,2);
  lua_pushliteral(L,"output");
  lua_pushliteral(L,"nssm:great_energy_globe");
  lua_rawset(L,-3);
  lua_pushliteral(L,"recipe");
  lua_createtable(L,3,0);
  lua_createtable(L,3,0);
  lua_pushliteral(L,"nssm:energy_globe");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"nssm:energy_globe");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"nssm:energy_globe");
  lua_rawseti(L,-2,3);
  lua_rawseti(L,-2,1);
  lua_createtable(L,3,0);
  lua_pushliteral(L,"nssm:energy_globe");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"nssm:energy_globe");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"nssm:energy_globe");
  lua_rawseti(L,-2,3);
  lua_rawseti(L,-2,2);
  lua_createtable(L,3,0);
  lua_pushliteral(L,"nssm:energy_globe");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"nssm:energy_globe");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"nssm:energy_globe");
  lua_rawseti(L,-2,3);
  lua_rawseti(L,-2,3);
  lua_rawset(L,-3);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_craft({
   * 	output = 'nssm:superior_energy_globe',
   * 	recipe = {
   * 		{'nssm:great_energy_globe', 'nssm:great_energy_globe', 'nssm:great_energy_globe'},
   * 		{'nssm:great_energy_globe', 'nssm:great_energy_globe', 'nssm:great_energy_globe'},
   * 		{'nssm:great_energy_globe', 'nssm:great_energy_globe', 'nssm:great_energy_globe'},
   * 	}
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_craft");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,2);
  lua_pushliteral(L,"output");
  lua_pushliteral(L,"nssm:superior_energy_globe");
  lua_rawset(L,-3);
  lua_pushliteral(L,"recipe");
  lua_createtable(L,3,0);
  lua_createtable(L,3,0);
  lua_pushliteral(L,"nssm:great_energy_globe");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"nssm:great_energy_globe");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"nssm:great_energy_globe");
  lua_rawseti(L,-2,3);
  lua_rawseti(L,-2,1);
  lua_createtable(L,3,0);
  lua_pushliteral(L,"nssm:great_energy_globe");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"nssm:great_energy_globe");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"nssm:great_energy_globe");
  lua_rawseti(L,-2,3);
  lua_rawseti(L,-2,2);
  lua_createtable(L,3,0);
  lua_pushliteral(L,"nssm:great_energy_globe");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"nssm:great_energy_globe");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"nssm:great_energy_globe");
  lua_rawseti(L,-2,3);
  lua_rawseti(L,-2,3);
  lua_rawset(L,-3);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_craft({
   * 	output = 'nssm:mese_egg',
   * 	recipe = {
   * 		{'nssm:tarantula_chelicerae', 'nssm:masticone_skull_crowned', 'nssm:eyed_tentacle'},
   * 		{'nssm:black_ice_tooth', 'nssm:superior_energy_globe', 'nssm:sky_feather'},
   * 		{'nssm:cursed_pumpkin_seed', 'nssm:ant_queen_abdomen', 'nssm:snake_scute'},
   * 	}
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_craft");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,2);
  lua_pushliteral(L,"output");
  lua_pushliteral(L,"nssm:mese_egg");
  lua_rawset(L,-3);
  lua_pushliteral(L,"recipe");
  lua_createtable(L,3,0);
  lua_createtable(L,3,0);
  lua_pushliteral(L,"nssm:tarantula_chelicerae");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"nssm:masticone_skull_crowned");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"nssm:eyed_tentacle");
  lua_rawseti(L,-2,3);
  lua_rawseti(L,-2,1);
  lua_createtable(L,3,0);
  lua_pushliteral(L,"nssm:black_ice_tooth");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"nssm:superior_energy_globe");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"nssm:sky_feather");
  lua_rawseti(L,-2,3);
  lua_rawseti(L,-2,2);
  lua_createtable(L,3,0);
  lua_pushliteral(L,"nssm:cursed_pumpkin_seed");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"nssm:ant_queen_abdomen");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"nssm:snake_scute");
  lua_rawseti(L,-2,3);
  lua_rawseti(L,-2,3);
  lua_rawset(L,-3);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_craft({
   * 	output = 'nssm:masticone_skull_crowned',
   * 	recipe = {
   * 		{'', 'nssm:king_duck_crown', ''},
   * 		{'', 'nssm:masticone_skull', ''},
   * 		{'', '', ''},
   * 	}
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_craft");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,2);
  lua_pushliteral(L,"output");
  lua_pushliteral(L,"nssm:masticone_skull_crowned");
  lua_rawset(L,-3);
  lua_pushliteral(L,"recipe");
  lua_createtable(L,3,0);
  lua_createtable(L,3,0);
  lua_pushliteral(L,"");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"nssm:king_duck_crown");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"");
  lua_rawseti(L,-2,3);
  lua_rawseti(L,-2,1);
  lua_createtable(L,3,0);
  lua_pushliteral(L,"");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"nssm:masticone_skull");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"");
  lua_rawseti(L,-2,3);
  lua_rawseti(L,-2,2);
  lua_createtable(L,3,0);
  lua_pushliteral(L,"");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"");
  lua_rawseti(L,-2,3);
  lua_rawseti(L,-2,3);
  lua_rawset(L,-3);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_craft({
   * 	output = 'nssm:eyed_tentacle',
   * 	recipe = {
   * 		{'', 'nssm:lava_titan_eye', ''},
   * 		{'', 'nssm:tentacle_curly', ''},
   * 		{'', '', ''},
   * 	}
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_craft");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,2);
  lua_pushliteral(L,"output");
  lua_pushliteral(L,"nssm:eyed_tentacle");
  lua_rawset(L,-3);
  lua_pushliteral(L,"recipe");
  lua_createtable(L,3,0);
  lua_createtable(L,3,0);
  lua_pushliteral(L,"");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"nssm:lava_titan_eye");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"");
  lua_rawseti(L,-2,3);
  lua_rawseti(L,-2,1);
  lua_createtable(L,3,0);
  lua_pushliteral(L,"");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"nssm:tentacle_curly");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"");
  lua_rawseti(L,-2,3);
  lua_rawseti(L,-2,2);
  lua_createtable(L,3,0);
  lua_pushliteral(L,"");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"");
  lua_rawseti(L,-2,3);
  lua_rawseti(L,-2,3);
  lua_rawset(L,-3);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_craft({
   * 	output = 'nssm:masticone_skull',
   * 	recipe = {
   * 		{'nssm:masticone_skull_fragments', 'nssm:masticone_skull_fragments', 'nssm:masticone_skull_fragments'},
   * 		{'nssm:masticone_skull_fragments', 'nssm:masticone_skull_fragments', 'nssm:masticone_skull_fragments'},
   * 		{'nssm:masticone_skull_fragments', 'nssm:masticone_skull_fragments', 'nssm:masticone_skull_fragments'},
   * 	}
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_craft");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,2);
  lua_pushliteral(L,"output");
  lua_pushliteral(L,"nssm:masticone_skull");
  lua_rawset(L,-3);
  lua_pushliteral(L,"recipe");
  lua_createtable(L,3,0);
  lua_createtable(L,3,0);
  lua_pushliteral(L,"nssm:masticone_skull_fragments");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"nssm:masticone_skull_fragments");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"nssm:masticone_skull_fragments");
  lua_rawseti(L,-2,3);
  lua_rawseti(L,-2,1);
  lua_createtable(L,3,0);
  lua_pushliteral(L,"nssm:masticone_skull_fragments");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"nssm:masticone_skull_fragments");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"nssm:masticone_skull_fragments");
  lua_rawseti(L,-2,3);
  lua_rawseti(L,-2,2);
  lua_createtable(L,3,0);
  lua_pushliteral(L,"nssm:masticone_skull_fragments");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"nssm:masticone_skull_fragments");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"nssm:masticone_skull_fragments");
  lua_rawseti(L,-2,3);
  lua_rawseti(L,-2,3);
  lua_rawset(L,-3);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_craft({
   * 	output = 'nssm:rope 16',
   * 	recipe = {
   * 		{'', 'nssm:wolf_fur', ''},
   * 		{'', 'nssm:wolf_fur', ''},
   * 		{'', 'nssm:wolf_fur', ''},
   * 	}
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_craft");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,2);
  lua_pushliteral(L,"output");
  lua_pushliteral(L,"nssm:rope 16");
  lua_rawset(L,-3);
  lua_pushliteral(L,"recipe");
  lua_createtable(L,3,0);
  lua_createtable(L,3,0);
  lua_pushliteral(L,"");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"nssm:wolf_fur");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"");
  lua_rawseti(L,-2,3);
  lua_rawseti(L,-2,1);
  lua_createtable(L,3,0);
  lua_pushliteral(L,"");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"nssm:wolf_fur");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"");
  lua_rawseti(L,-2,3);
  lua_rawseti(L,-2,2);
  lua_createtable(L,3,0);
  lua_pushliteral(L,"");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"nssm:wolf_fur");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"");
  lua_rawseti(L,-2,3);
  lua_rawseti(L,-2,3);
  lua_rawset(L,-3);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_craft({
   * 	output = 'nssm:rope 16',
   * 	recipe = {
   * 		{'', 'nssm:white_wolf_fur', ''},
   * 		{'', 'nssm:white_wolf_fur', ''},
   * 		{'', 'nssm:white_wolf_fur', ''},
   * 	}
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_craft");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,2);
  lua_pushliteral(L,"output");
  lua_pushliteral(L,"nssm:rope 16");
  lua_rawset(L,-3);
  lua_pushliteral(L,"recipe");
  lua_createtable(L,3,0);
  lua_createtable(L,3,0);
  lua_pushliteral(L,"");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"nssm:white_wolf_fur");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"");
  lua_rawseti(L,-2,3);
  lua_rawseti(L,-2,1);
  lua_createtable(L,3,0);
  lua_pushliteral(L,"");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"nssm:white_wolf_fur");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"");
  lua_rawseti(L,-2,3);
  lua_rawseti(L,-2,2);
  lua_createtable(L,3,0);
  lua_pushliteral(L,"");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"nssm:white_wolf_fur");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"");
  lua_rawseti(L,-2,3);
  lua_rawseti(L,-2,3);
  lua_rawset(L,-3);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_craft({
   * 	output = 'nssm:sky_feather',
   * 	recipe = {
   * 		{'', '', ''},
   * 		{'nssm:sun_feather', '', 'nssm:night_feather'},
   * 		{'', '', ''},
   * 	}
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_craft");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,2);
  lua_pushliteral(L,"output");
  lua_pushliteral(L,"nssm:sky_feather");
  lua_rawset(L,-3);
  lua_pushliteral(L,"recipe");
  lua_createtable(L,3,0);
  lua_createtable(L,3,0);
  lua_pushliteral(L,"");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"");
  lua_rawseti(L,-2,3);
  lua_rawseti(L,-2,1);
  lua_createtable(L,3,0);
  lua_pushliteral(L,"nssm:sun_feather");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"nssm:night_feather");
  lua_rawseti(L,-2,3);
  lua_rawseti(L,-2,2);
  lua_createtable(L,3,0);
  lua_pushliteral(L,"");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"");
  lua_rawseti(L,-2,3);
  lua_rawseti(L,-2,3);
  lua_rawset(L,-3);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_craft({
   * 	output = 'nssm:sun_sword',
   * 	recipe = {
   * 		{'', 'default:diamond', ''},
   * 		{'', 'nssm:sun_feather', ''},
   * 		{'', 'group:stick', ''},
   * 	}
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_craft");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,2);
  lua_pushliteral(L,"output");
  lua_pushliteral(L,"nssm:sun_sword");
  lua_rawset(L,-3);
  lua_pushliteral(L,"recipe");
  lua_createtable(L,3,0);
  lua_createtable(L,3,0);
  lua_pushliteral(L,"");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"default:diamond");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"");
  lua_rawseti(L,-2,3);
  lua_rawseti(L,-2,1);
  lua_createtable(L,3,0);
  lua_pushliteral(L,"");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"nssm:sun_feather");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"");
  lua_rawseti(L,-2,3);
  lua_rawseti(L,-2,2);
  lua_createtable(L,3,0);
  lua_pushliteral(L,"");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"group:stick");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"");
  lua_rawseti(L,-2,3);
  lua_rawseti(L,-2,3);
  lua_rawset(L,-3);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_craft({
   * 	output = 'nssm:night_sword',
   * 	recipe = {
   * 		{'', 'default:diamond', ''},
   * 		{'', 'nssm:night_feather', ''},
   * 		{'', 'group:stick', ''},
   * 	}
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_craft");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,2);
  lua_pushliteral(L,"output");
  lua_pushliteral(L,"nssm:night_sword");
  lua_rawset(L,-3);
  lua_pushliteral(L,"recipe");
  lua_createtable(L,3,0);
  lua_createtable(L,3,0);
  lua_pushliteral(L,"");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"default:diamond");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"");
  lua_rawseti(L,-2,3);
  lua_rawseti(L,-2,1);
  lua_createtable(L,3,0);
  lua_pushliteral(L,"");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"nssm:night_feather");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"");
  lua_rawseti(L,-2,3);
  lua_rawseti(L,-2,2);
  lua_createtable(L,3,0);
  lua_pushliteral(L,"");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"group:stick");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"");
  lua_rawseti(L,-2,3);
  lua_rawseti(L,-2,3);
  lua_rawset(L,-3);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_craft({
   * 	type = "cooking",
   * 	output = "nssm:roasted_worm_flesh",
   * 	recipe = "nssm:worm_flesh",
   * 	cooktime = 12,
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_craft");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,4);
  lua_pushliteral(L,"type");
  lua_pushliteral(L,"cooking");
  lua_rawset(L,-3);
  lua_pushliteral(L,"output");
  lua_pushliteral(L,"nssm:roasted_worm_flesh");
  lua_rawset(L,-3);
  lua_pushliteral(L,"recipe");
  lua_pushliteral(L,"nssm:worm_flesh");
  lua_rawset(L,-3);
  lua_pushliteral(L,"cooktime");
  lua_pushnumber(L,12);
  lua_rawset(L,-3);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_craft({
   * 	type = "cooking",
   * 	output = "nssm:roasted_duck_legs",
   * 	recipe = "nssm:duck_legs",
   * 	cooktime = 6,
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_craft");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,4);
  lua_pushliteral(L,"type");
  lua_pushliteral(L,"cooking");
  lua_rawset(L,-3);
  lua_pushliteral(L,"output");
  lua_pushliteral(L,"nssm:roasted_duck_legs");
  lua_rawset(L,-3);
  lua_pushliteral(L,"recipe");
  lua_pushliteral(L,"nssm:duck_legs");
  lua_rawset(L,-3);
  lua_pushliteral(L,"cooktime");
  lua_pushnumber(L,6);
  lua_rawset(L,-3);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_craft({
   * 	type = "cooking",
   * 	output = "nssm:roasted_spider_leg",
   * 	recipe = "nssm:spider_leg",
   * 	cooktime = 6,
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_craft");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,4);
  lua_pushliteral(L,"type");
  lua_pushliteral(L,"cooking");
  lua_rawset(L,-3);
  lua_pushliteral(L,"output");
  lua_pushliteral(L,"nssm:roasted_spider_leg");
  lua_rawset(L,-3);
  lua_pushliteral(L,"recipe");
  lua_pushliteral(L,"nssm:spider_leg");
  lua_rawset(L,-3);
  lua_pushliteral(L,"cooktime");
  lua_pushnumber(L,6);
  lua_rawset(L,-3);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_craft({
   * 	type = "cooking",
   * 	output = "nssm:roasted_werewolf_leg",
   * 	recipe = "nssm:werewolf_leg",
   * 	cooktime = 10,
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_craft");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,4);
  lua_pushliteral(L,"type");
  lua_pushliteral(L,"cooking");
  lua_rawset(L,-3);
  lua_pushliteral(L,"output");
  lua_pushliteral(L,"nssm:roasted_werewolf_leg");
  lua_rawset(L,-3);
  lua_pushliteral(L,"recipe");
  lua_pushliteral(L,"nssm:werewolf_leg");
  lua_rawset(L,-3);
  lua_pushliteral(L,"cooktime");
  lua_pushnumber(L,10);
  lua_rawset(L,-3);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_craft({
   * 	type = "cooking",
   * 	output = "nssm:roasted_brain",
   * 	recipe = "nssm:brain",
   * 	cooktime = 6,
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_craft");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,4);
  lua_pushliteral(L,"type");
  lua_pushliteral(L,"cooking");
  lua_rawset(L,-3);
  lua_pushliteral(L,"output");
  lua_pushliteral(L,"nssm:roasted_brain");
  lua_rawset(L,-3);
  lua_pushliteral(L,"recipe");
  lua_pushliteral(L,"nssm:brain");
  lua_rawset(L,-3);
  lua_pushliteral(L,"cooktime");
  lua_pushnumber(L,6);
  lua_rawset(L,-3);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_craft({
   * 	type = "cooking",
   * 	output = "nssm:roasted_amphibian_heart",
   * 	recipe = "nssm:amphibian_heart",
   * 	cooktime = 5,
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_craft");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,4);
  lua_pushliteral(L,"type");
  lua_pushliteral(L,"cooking");
  lua_rawset(L,-3);
  lua_pushliteral(L,"output");
  lua_pushliteral(L,"nssm:roasted_amphibian_heart");
  lua_rawset(L,-3);
  lua_pushliteral(L,"recipe");
  lua_pushliteral(L,"nssm:amphibian_heart");
  lua_rawset(L,-3);
  lua_pushliteral(L,"cooktime");
  lua_pushnumber(L,5);
  lua_rawset(L,-3);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_craft({
   * 	type = "cooking",
   * 	output = "nssm:roasted_tentacle",
   * 	recipe = "nssm:tentacle",
   * 	cooktime = 5,
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_craft");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,4);
  lua_pushliteral(L,"type");
  lua_pushliteral(L,"cooking");
  lua_rawset(L,-3);
  lua_pushliteral(L,"output");
  lua_pushliteral(L,"nssm:roasted_tentacle");
  lua_rawset(L,-3);
  lua_pushliteral(L,"recipe");
  lua_pushliteral(L,"nssm:tentacle");
  lua_rawset(L,-3);
  lua_pushliteral(L,"cooktime");
  lua_pushnumber(L,5);
  lua_rawset(L,-3);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_craft({
   * 	type = "cooking",
   * 	output = "nssm:amphibian_heart",
   * 	recipe = "nssm:frosted_amphibian_heart",
   * 	cooktime = 8,
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_craft");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,4);
  lua_pushliteral(L,"type");
  lua_pushliteral(L,"cooking");
  lua_rawset(L,-3);
  lua_pushliteral(L,"output");
  lua_pushliteral(L,"nssm:amphibian_heart");
  lua_rawset(L,-3);
  lua_pushliteral(L,"recipe");
  lua_pushliteral(L,"nssm:frosted_amphibian_heart");
  lua_rawset(L,-3);
  lua_pushliteral(L,"cooktime");
  lua_pushnumber(L,8);
  lua_rawset(L,-3);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_craft({
   * 	type = "cooking",
   * 	output = "nssm:chichibios_heron_leg",
   * 	recipe = "nssm:heron_leg",
   * 	cooktime = 20,
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_craft");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,4);
  lua_pushliteral(L,"type");
  lua_pushliteral(L,"cooking");
  lua_rawset(L,-3);
  lua_pushliteral(L,"output");
  lua_pushliteral(L,"nssm:chichibios_heron_leg");
  lua_rawset(L,-3);
  lua_pushliteral(L,"recipe");
  lua_pushliteral(L,"nssm:heron_leg");
  lua_rawset(L,-3);
  lua_pushliteral(L,"cooktime");
  lua_pushnumber(L,20);
  lua_rawset(L,-3);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_craft({
   * 	type = "cooking",
   * 	output = "nssm:spicy_scrausics_wing",
   * 	recipe = "nssm:raw_scrausics_wing",
   * 	cooktime = 12,
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_craft");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,4);
  lua_pushliteral(L,"type");
  lua_pushliteral(L,"cooking");
  lua_rawset(L,-3);
  lua_pushliteral(L,"output");
  lua_pushliteral(L,"nssm:spicy_scrausics_wing");
  lua_rawset(L,-3);
  lua_pushliteral(L,"recipe");
  lua_pushliteral(L,"nssm:raw_scrausics_wing");
  lua_rawset(L,-3);
  lua_pushliteral(L,"cooktime");
  lua_pushnumber(L,12);
  lua_rawset(L,-3);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_craft({
   * 	type = "cooking",
   * 	output = "nssm:roasted_ant_leg",
   * 	recipe = "nssm:ant_leg",
   * 	cooktime = 10,
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_craft");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,4);
  lua_pushliteral(L,"type");
  lua_pushliteral(L,"cooking");
  lua_rawset(L,-3);
  lua_pushliteral(L,"output");
  lua_pushliteral(L,"nssm:roasted_ant_leg");
  lua_rawset(L,-3);
  lua_pushliteral(L,"recipe");
  lua_pushliteral(L,"nssm:ant_leg");
  lua_rawset(L,-3);
  lua_pushliteral(L,"cooktime");
  lua_pushnumber(L,10);
  lua_rawset(L,-3);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_craft({
   * 	type = "cooking",
   * 	output = "nssm:roasted_crocodile_tail",
   * 	recipe = "nssm:crocodile_tail",
   * 	cooktime = 16,
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_craft");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,4);
  lua_pushliteral(L,"type");
  lua_pushliteral(L,"cooking");
  lua_rawset(L,-3);
  lua_pushliteral(L,"output");
  lua_pushliteral(L,"nssm:roasted_crocodile_tail");
  lua_rawset(L,-3);
  lua_pushliteral(L,"recipe");
  lua_pushliteral(L,"nssm:crocodile_tail");
  lua_rawset(L,-3);
  lua_pushliteral(L,"cooktime");
  lua_pushnumber(L,16);
  lua_rawset(L,-3);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_craft({
   * 	output = 'nssm:ant_sword',
   * 	recipe = {
   * 		{'', 'nssm:ant_mandible', ''},
   * 		{'', 'nssm:ant_mandible', ''},
   * 		{'', 'group:stick', ''},
   * 	}
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_craft");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,2);
  lua_pushliteral(L,"output");
  lua_pushliteral(L,"nssm:ant_sword");
  lua_rawset(L,-3);
  lua_pushliteral(L,"recipe");
  lua_createtable(L,3,0);
  lua_createtable(L,3,0);
  lua_pushliteral(L,"");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"nssm:ant_mandible");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"");
  lua_rawseti(L,-2,3);
  lua_rawseti(L,-2,1);
  lua_createtable(L,3,0);
  lua_pushliteral(L,"");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"nssm:ant_mandible");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"");
  lua_rawseti(L,-2,3);
  lua_rawseti(L,-2,2);
  lua_createtable(L,3,0);
  lua_pushliteral(L,"");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"group:stick");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"");
  lua_rawseti(L,-2,3);
  lua_rawseti(L,-2,3);
  lua_rawset(L,-3);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_craft({
   * 	output = 'nssm:stoneater_pick',
   * 	recipe = {
   * 		{'nssm:stoneater_mandible', 'nssm:stoneater_mandible', 'nssm:stoneater_mandible'},
   * 		{'', 'group:stick', ''},
   * 		{'', 'group:stick', ''},
   * 	}
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_craft");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_createtable(L,0,2);
  lua_pushliteral(L,"output");
  lua_pushliteral(L,"nssm:stoneater_pick");
  lua_rawset(L,-3);
  lua_pushliteral(L,"recipe");
  lua_createtable(L,3,0);
  lua_createtable(L,3,0);
  lua_pushliteral(L,"nssm:stoneater_mandible");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"nssm:stoneater_mandible");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"nssm:stoneater_mandible");
  lua_rawseti(L,-2,3);
  lua_rawseti(L,-2,1);
  lua_createtable(L,3,0);
  lua_pushliteral(L,"");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"group:stick");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"");
  lua_rawseti(L,-2,3);
  lua_rawseti(L,-2,2);
  lua_createtable(L,3,0);
  lua_pushliteral(L,"");
  lua_rawseti(L,-2,1);
  lua_pushliteral(L,"group:stick");
  lua_rawseti(L,-2,2);
  lua_pushliteral(L,"");
  lua_rawseti(L,-2,3);
  lua_rawseti(L,-2,3);
  lua_rawset(L,-3);
  lua_call(L,1,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* --Eggs
   * function nssm_register_egg (name, descr)
   * 
   * 
   * minetest.register_craftitem("nssm:".. name .."_egg", {
   * 	description = descr .. " Egg",
   * 	image = name .. "_egg.png",
   * 	on_place = function(itemstack, placer, pointed_thing)
   * 		local pos1=minetest.get_pointed_thing_position(pointed_thing, true)
   * 		pos1.y=pos1.y+1.5
   * 		core.after(0.1, function()
   * 			minetest.add_entity(pos1, "nssm:".. name)
   * 		end)
   * 		itemstack:take_item()
   * 		return itemstack
   * 	end,
   * })
   * 
   * end */
  lua_pushcfunction(L,lcf1_nssm_register_egg);
  lua_setfield(L,LUA_ENVIRONINDEX,"nssm_register_egg");
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* --nssm_register_egg ('flying_duck', 'Flying Duck')
   * nssm_register_egg ('stone_eater', 'Stoneater') */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_egg");
  lua_pushliteral(L,"stone_eater");
  lua_pushliteral(L,"Stoneater");
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_egg ('signosigno', 'Signosigno') */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_egg");
  lua_pushliteral(L,"signosigno");
  lua_pushliteral(L,"Signosigno");
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_egg ('bloco', 'Bloco') */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_egg");
  lua_pushliteral(L,"bloco");
  lua_pushliteral(L,"Bloco");
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_egg ('sand_bloco', 'Sand Bloco') */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_egg");
  lua_pushliteral(L,"sand_bloco");
  lua_pushliteral(L,"Sand Bloco");
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_egg ('swimming_duck', 'Swimming Duck') */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_egg");
  lua_pushliteral(L,"swimming_duck");
  lua_pushliteral(L,"Swimming Duck");
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_egg ('duck', 'Duck') */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_egg");
  lua_pushliteral(L,"duck");
  lua_pushliteral(L,"Duck");
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_egg ('duckking', 'Duckking') */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_egg");
  lua_pushliteral(L,"duckking");
  lua_pushliteral(L,"Duckking");
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_egg ('enderduck', 'Enderduck') */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_egg");
  lua_pushliteral(L,"enderduck");
  lua_pushliteral(L,"Enderduck");
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_egg ('spiderduck', 'Spiderduck') */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_egg");
  lua_pushliteral(L,"spiderduck");
  lua_pushliteral(L,"Spiderduck");
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_egg ('echidna', 'Echidna') */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_egg");
  lua_pushliteral(L,"echidna");
  lua_pushliteral(L,"Echidna");
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_egg ('werewolf', 'Werewolf') */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_egg");
  lua_pushliteral(L,"werewolf");
  lua_pushliteral(L,"Werewolf");
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_egg ('white_werewolf', 'White Werewolf') */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_egg");
  lua_pushliteral(L,"white_werewolf");
  lua_pushliteral(L,"White Werewolf");
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_egg ('snow_biter', 'Snow Biter') */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_egg");
  lua_pushliteral(L,"snow_biter");
  lua_pushliteral(L,"Snow Biter");
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_egg ('icelamander', 'Icelamander') */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_egg");
  lua_pushliteral(L,"icelamander");
  lua_pushliteral(L,"Icelamander");
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_egg ('icesnake', 'Icesnake') */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_egg");
  lua_pushliteral(L,"icesnake");
  lua_pushliteral(L,"Icesnake");
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_egg ('lava_titan', 'Lava Titan') */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_egg");
  lua_pushliteral(L,"lava_titan");
  lua_pushliteral(L,"Lava Titan");
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_egg ('masticone', 'Masticone') */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_egg");
  lua_pushliteral(L,"masticone");
  lua_pushliteral(L,"Masticone");
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_egg ('mantis_beast', 'Mantis Beast') */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_egg");
  lua_pushliteral(L,"mantis_beast");
  lua_pushliteral(L,"Mantis Beast");
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_egg ('mantis', 'mantis') */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_egg");
  lua_pushliteral(L,"mantis");
  lua_pushliteral(L,"mantis");
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_egg ('larva', 'Larva') */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_egg");
  lua_pushliteral(L,"larva");
  lua_pushliteral(L,"Larva");
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_egg ('phoenix', 'Phoenix') */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_egg");
  lua_pushliteral(L,"phoenix");
  lua_pushliteral(L,"Phoenix");
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_egg ('night_master', 'Night Master') */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_egg");
  lua_pushliteral(L,"night_master");
  lua_pushliteral(L,"Night Master");
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_egg ('scrausics', 'Scrausics') */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_egg");
  lua_pushliteral(L,"scrausics");
  lua_pushliteral(L,"Scrausics");
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_egg ('moonheron', 'Moonheron') */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_egg");
  lua_pushliteral(L,"moonheron");
  lua_pushliteral(L,"Moonheron");
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_egg ('sandworm', 'Sandworm') */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_egg");
  lua_pushliteral(L,"sandworm");
  lua_pushliteral(L,"Sandworm");
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_egg ('giant_sandworm', 'Giant Sandworm') */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_egg");
  lua_pushliteral(L,"giant_sandworm");
  lua_pushliteral(L,"Giant Sandworm");
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_egg ('ant_queen', 'Ant Queen') */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_egg");
  lua_pushliteral(L,"ant_queen");
  lua_pushliteral(L,"Ant Queen");
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_egg ('ant_soldier', 'Ant Soldier') */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_egg");
  lua_pushliteral(L,"ant_soldier");
  lua_pushliteral(L,"Ant Soldier");
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_egg ('ant_worker', 'Ant Worker') */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_egg");
  lua_pushliteral(L,"ant_worker");
  lua_pushliteral(L,"Ant Worker");
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_egg ('crocodile', 'Crocodile') */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_egg");
  lua_pushliteral(L,"crocodile");
  lua_pushliteral(L,"Crocodile");
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_egg ('dolidrosaurus', 'Dolidrosaurus') */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_egg");
  lua_pushliteral(L,"dolidrosaurus");
  lua_pushliteral(L,"Dolidrosaurus");
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_egg ('crab', 'Crab') */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_egg");
  lua_pushliteral(L,"crab");
  lua_pushliteral(L,"Crab");
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_egg ('octopus', 'Octopus') */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_egg");
  lua_pushliteral(L,"octopus");
  lua_pushliteral(L,"Octopus");
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_egg ('xgaloctopus', 'Xgaloctopus') */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_egg");
  lua_pushliteral(L,"xgaloctopus");
  lua_pushliteral(L,"Xgaloctopus");
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_egg ('black_widow', 'Black Widow') */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_egg");
  lua_pushliteral(L,"black_widow");
  lua_pushliteral(L,"Black Widow");
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_egg ('uloboros', 'Uloboros') */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_egg");
  lua_pushliteral(L,"uloboros");
  lua_pushliteral(L,"Uloboros");
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_egg ('tarantula', 'Tarantula') */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_egg");
  lua_pushliteral(L,"tarantula");
  lua_pushliteral(L,"Tarantula");
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_egg ('daddy_long_legs', 'Daddy Long Legs') */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_egg");
  lua_pushliteral(L,"daddy_long_legs");
  lua_pushliteral(L,"Daddy Long Legs");
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_egg ('kraken', 'Kraken') */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_egg");
  lua_pushliteral(L,"kraken");
  lua_pushliteral(L,"Kraken");
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_egg ('pumpking', 'Pumpking') */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_egg");
  lua_pushliteral(L,"pumpking");
  lua_pushliteral(L,"Pumpking");
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_egg ('manticore', 'Manticore') */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_egg");
  lua_pushliteral(L,"manticore");
  lua_pushliteral(L,"Manticore");
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_egg ('pumpboom_large', 'Large Pumpboom') */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_egg");
  lua_pushliteral(L,"pumpboom_large");
  lua_pushliteral(L,"Large Pumpboom");
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_egg ('pumpboom_small', 'Small Pumpboom') */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_egg");
  lua_pushliteral(L,"pumpboom_small");
  lua_pushliteral(L,"Small Pumpboom");
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* nssm_register_egg ('pumpboom_medium', 'Medium Pumpboom') */
  lua_getfield(L,LUA_ENVIRONINDEX,"nssm_register_egg");
  lua_pushliteral(L,"pumpboom_medium");
  lua_pushliteral(L,"Medium Pumpboom");
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  
  /* minetest.register_craftitem("nssm:mese_egg", {
   * 	description = "Mese Egg",
   * 	image = "mese_egg.png",
   * 	on_place = function(itemstack, placer, pointed_thing)
   * 		local pos1=minetest.get_pointed_thing_position(pointed_thing, true)
   * 		pos1.y=pos1.y+1.5
   * 		minetest.add_particlespawner({
   * 			amount = 1000,
   * 			time = 0.2,
   * 			minpos = {x=pos1.x-1, y=pos1.y-1, z=pos1.z-1},
   * 			maxpos = {x=pos1.x+1, y=pos1.y+4, z=pos1.z+1},
   * 			minvel = {x=0, y=0, z=0},
   * 			maxvel = {x=1, y=5, z=1},
   * 			minacc = {x=-0.5,y=5,z=-0.5},
   * 			maxacc = {x=0.5,y=5,z=0.5},
   * 			minexptime = 1,
   * 			maxexptime = 3,
   * 			minsize = 2,
   * 			maxsize = 4,
   * 			collisiondetection = false,
   * 			vertical = false,
   * 			texture = "tnt_smoke.png",
   * 		})
   * 		core.after(0.4, function()
   * 			minetest.add_entity(pos1, "nssm:mese_dragon")
   * 		end)
   * 		itemstack:take_item()
   * 		return itemstack
   * 	end,
   * }) */
  lua_getfield(L,LUA_ENVIRONINDEX,"minetest");
  lua_pushliteral(L,"register_craftitem");
  lua_gettable(L,-2);
  lua_remove(L,-2);
  lua_pushliteral(L,"nssm:mese_egg");
  lua_createtable(L,0,3);
  lua_pushliteral(L,"description");
  lua_pushliteral(L,"Mese Egg");
  lua_rawset(L,-3);
  lua_pushliteral(L,"image");
  lua_pushliteral(L,"mese_egg.png");
  lua_rawset(L,-3);
  lua_pushliteral(L,"on_place");
  lua_pushcfunction(L,lcf29);
  lua_rawset(L,-3);
  lua_call(L,2,0);
  assert(lua_gettop(L) - lc_nextra == 0);
  return 0;
}


/* from lua.c */
static int traceback (lua_State *L) {
  if (!lua_isstring(L, 1))  /* 'message' not a string? */
    return 1;  /* keep it intact */
  lua_getfield(L, LUA_GLOBALSINDEX, "debug");
  if (!lua_istable(L, -1)) {
    lua_pop(L, 1);
    return 1;
  }
  lua_getfield(L, -1, "traceback");
  if (!lua_isfunction(L, -1)) {
    lua_pop(L, 2);
    return 1;
  }
  lua_pushvalue(L, 1);  /* pass error message */
  lua_pushinteger(L, 2);  /* skip this function and traceback */
  lua_call(L, 2, 1);  /* call debug.traceback */
  return 1;
}


static void lc_l_message (const char *pname, const char *msg) {
  if (pname) fprintf(stderr, "%s: ", pname);
  fprintf(stderr, "%s\n", msg);
  fflush(stderr);
}

static int lc_report (lua_State *L, int status) {
  if (status && !lua_isnil(L, -1)) {
    const char *msg = lua_tostring(L, -1);
    if (msg == NULL) msg = "(error object is not a string)";
    /*FIX-IMROVE:progname*/
    lc_l_message("lua", msg);
    lua_pop(L, 1);
  }
  return status;
}

static int lc_docall (lua_State *L, int narg, int clear) {
  int status;
  int base = lua_gettop(L) - narg;  /* function index */
  lua_pushcfunction(L, traceback);  /* push traceback function */
  lua_insert(L, base);  /* put it under chunk and args */
  /*FIX? signal(SIGINT, laction); */
  status = lua_pcall(L, narg, (clear ? 0 : LUA_MULTRET), base);
  /*FIX? signal(SIGINT, SIG_DFL); */
  lua_remove(L, base);  /* remove traceback function */
  /* force a complete garbage collection in case of errors */
  if (status != 0) lua_gc(L, LUA_GCCOLLECT, 0);
  return status;
}

static int lc_dofile (lua_State *L, const char *name) {
  int status = luaL_loadfile(L, name) || lc_docall(L, 0, 1);
  return lc_report(L, status);
}

static int lc_dostring (lua_State *L, const char *s, const char *name) {
  int status = luaL_loadbuffer(L, s, strlen(s), name) || lc_docall(L, 0, 1);
  return lc_report(L, status);
}

static int lc_handle_luainit (lua_State *L) {
  const char *init = getenv(LUA_INIT);
  if (init == NULL) return 0;  /* status OK */
  else if (init[0] == '@')
    return lc_dofile(L, init+1);
  else
    return lc_dostring(L, init, "=" LUA_INIT);
}


typedef struct {
  int c;
  const char ** v;
} lc_args_t;


/* create global arg table */
static void lc_createarg(lua_State * L, const lc_args_t * const args) {
  int i;
  lua_newtable(L);
  for (i=0; i < args->c; i++) {
    lua_pushstring(L, args->v[i]);
    lua_rawseti(L, -2, i);
  }
  lua_setglobal(L, "arg");
}


int lc_pmain_mod_nssm_nssm_materials(lua_State * L) {
  luaL_openlibs(L);

  lua_pushcfunction(L, traceback);

  const int status1 = lc_handle_luainit(L);
  if (status1 != 0) return 0;

  /* note: IMPROVE: closure not always needed here */
  lua_newtable(L); /* closure table */
  lua_pushcclosure(L, lcf_main, 1);

  int status2 = lua_pcall(L, 0, 0, -2);
  if (status2 != 0) {
    const char * msg = lua_tostring(L,-1);
    if (msg == NULL) msg = "(error object is not a string)";
    fputs(msg, stderr);
  }
  return 0;
}


